<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>反义词大挑战 - 双人对战</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script defer src="./wellness.js"></script>
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        player1: '#FF6B6B',
                        player2: '#4ECDC4',
                        neutral: '#F7FFF7',
                        accent: '#FFD166',
                        text: '#292F36'
                    },
                    fontFamily: {
                        kids: ['"Comic Sans MS"', '"Marker Felt"', 'Arial', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            }
            .bounce-light {
                animation: bounce-light 0.5s ease infinite alternate;
            }
            .pulse-slow {
                animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
            .scale-hover {
                transition: transform 0.2s;
            }
            .scale-hover:hover {
                transform: scale(1.05);
            }
            .correct-animation {
                animation: correct 0.5s ease-in-out;
            }
            @keyframes bounce-light {
                from { transform: translateY(0); }
                to { transform: translateY(-5px); }
            }
            @keyframes correct {
                0% { transform: scale(1); }
                50% { transform: scale(1.2); }
                100% { transform: scale(1); }
            }
            
            /* 按钮容器样式 - 由JavaScript动态设置 */
            

        }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-50 to-indigo-50 min-h-screen font-kids text-text overflow-hidden">
    <!-- 提示框 - 放在body的直接子元素位置 -->
    <!-- 玩家1提示框 -->
    <div id="notification-player1" class="hidden fixed top-1/4 left-1/4 bg-white rounded-2xl shadow-2xl p-4 text-center z-[9999] transform rotate-90">
        <p id="notification-text-player1" class="text-xl font-bold mb-1"></p>
        <p id="notification-subtext-player1" class="text-lg text-gray-600 mb-1"></p>
    </div>
    
    <!-- 玩家2提示框 -->
    <div id="notification-player2" class="hidden fixed top-1/4 right-1/4 bg-white rounded-2xl shadow-2xl p-4 text-center z-[9999] transform -rotate-90">
        <p id="notification-text-player2" class="text-xl font-bold mb-1"></p>
        <p id="notification-subtext-player2" class="text-lg text-gray-600 mb-1"></p>
    </div>
    
    <!-- 开始界面 -->
    <div id="start-screen" class="flex flex-col items-center justify-center h-screen p-6 z-30 relative">
        <!-- 返回首页按钮 -->
        <button onclick="window.location.href='index.html'" class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg transition-all duration-300 hover:scale-105 active:scale-95 text-sm font-bold text-gray-600 hover:text-gray-800 z-40">
            <i class="fa fa-home mr-2"></i>首页
        </button>
        <div class="text-center max-w-md mx-auto bg-white rounded-3xl shadow-2xl p-8 transform transition-all duration-500">
            <h1 class="text-[clamp(2rem,5vw,3rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-player1 to-player2 mb-4">反义词大挑战</h1>
            <p class="text-lg mb-6">两个人，一人一边<br>找出正确的反义词，看谁更快！</p>
            
            <div class="flex justify-center mb-8">
                <div class="w-24 h-24 bg-player1 rounded-full flex items-center justify-center text-white text-4xl shadow-lg">
                    <i class="fa fa-user"></i>
                </div>
                <div class="mx-4 text-2xl flex items-center">VS</div>
                <div class="w-24 h-24 bg-player2 rounded-full flex items-center justify-center text-white text-4xl shadow-lg">
                    <i class="fa fa-user"></i>
                </div>
            </div>
            
            <!-- 倒计时开关 -->
            <div class="mb-6 flex items-center justify-center gap-4 bg-gray-50 rounded-2xl p-4">
                <i class="fa fa-clock-o text-gray-600"></i>
                <span class="text-gray-700 font-medium">倒计时模式</span>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="timer-toggle" class="sr-only peer" checked>
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
                <span class="text-xs text-gray-500" id="timer-description">每题10秒限时</span>
            </div>
            
            <button id="start-btn" class="bg-accent hover:bg-yellow-400 text-text font-bold py-3 px-8 rounded-full text-xl shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                开始游戏 <i class="fa fa-play ml-2"></i>
            </button>
            
            <div class="mt-6 text-sm text-gray-500">
                <p>适合年龄：6-9岁</p>
            </div>
        </div>
        
        <!-- 装饰元素 -->
        <div class="absolute top-10 left-10 text-5xl text-player1/30">
            <i class="fa fa-star bounce-light"></i>
        </div>
        <div class="absolute bottom-10 right-10 text-5xl text-player2/30">
            <i class="fa fa-heart bounce-light" style="animation-delay: 0.2s"></i>
        </div>
    </div>

    <!-- 游戏界面 -->
    <div id="game-screen" class="hidden h-screen flex flex-col">
        <!-- 顶部信息栏 -->
        <div class="flex justify-between items-center p-4 bg-white/80 backdrop-blur-sm shadow-md">
            <div class="flex items-center gap-3">
                <!-- 返回首页按钮 -->
                <button onclick="window.location.href='index.html'" class="bg-white/90 backdrop-blur-sm px-3 py-2 rounded-full shadow-md transition-all duration-300 hover:scale-105 active:scale-95 text-sm font-bold text-gray-600 hover:text-gray-800">
                    <i class="fa fa-home mr-1"></i><span class="hidden sm:inline">首页</span>
                </button>
                <div class="bg-accent px-4 py-2 rounded-full text-sm font-bold shadow-md">
                    <span id="round-counter">第1轮</span> / 共10轮
                </div>
            </div>
            
            <div class="flex items-center gap-4">
                <!-- 布局切换按钮 -->
                <button id="layout-toggle-btn" class="bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-md transition-all duration-300 hover:scale-105 active:scale-95">
                    <i id="layout-icon" class="fa fa-mobile text-gray-600"></i>
                    <span id="layout-text" class="ml-2 text-sm font-bold text-gray-600">手机版</span>
                </button>
                
                <!-- 锁定旋转按钮 -->
                <button id="lock-rotation-btn" class="bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-md transition-all duration-300 hover:scale-105 active:scale-95">
                    <i id="lock-icon" class="fa fa-lock text-gray-600"></i>
                    <span id="lock-text" class="ml-2 text-sm font-bold text-gray-600">锁定旋转</span>
                </button>
                
                <div id="timer" class="text-2xl font-bold text-accent bg-white/90 backdrop-blur-sm px-6 py-2 rounded-full shadow-md">
                    <i class="fa fa-clock-o mr-2"></i><span id="countdown">5</span>
                </div>
            </div>
        </div>
        
        <!-- 主要内容区域 -->
        <div class="flex-1 flex overflow-hidden">
            <!-- 左侧玩家1区域 - 90度顺时针旋转 -->
            <div class="w-1/3 bg-player1/10 flex flex-col transform rotate-90 origin-center mr-24 -translate-x-20">
                <!-- 玩家1分数显示 -->
                <div class="text-center p-2">
                    <p class="text-player1 font-bold text-lg">玩家1</p>
                    <p id="score1" class="text-player1 font-bold text-3xl">0</p>
                </div>
                
                <!-- 玩家1倒计时显示 -->
                <div class="text-center p-2">
                    <div class="bg-player1/20 rounded-lg p-2 inline-block">
                        <i class="fa fa-clock-o text-player1 mr-1"></i>
                        <span id="countdown-player1" class="text-player1 font-bold text-lg">5</span>
                    </div>
                </div>
                
                <!-- 玩家1选项区域 -->
                <div class="flex-1 flex items-start justify-center p-16">
                    <div id="options-player1" class="grid grid-cols-2 gap-4 w-48 h-32">
                        <!-- 选项会动态生成 -->
                    </div>
                </div>
            </div>
            
            <!-- 中间目标字区域 -->
            <div class="w-1/3 bg-white flex flex-col justify-center items-center p-4">
                <!-- 上方目标字卡片 - 跟玩家1方向一致（顺时针旋转90度） -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 text-center mb-4 transform rotate-90">
                    <p class="text-gray-500 text-sm mb-1">找出它的反义词！</p>
                    <p class="text-[clamp(1.8rem,6vw,3rem)] font-bold text-text whitespace-nowrap" id="target-word">大</p>
                    <p class="text-gray-400 text-xs mt-1" id="target-pinyin">dà</p>
                </div>
                
                <!-- 下方目标字卡片 - 跟玩家2方向一致（逆时针旋转90度） -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 text-center transform -rotate-90 hidden" id="second-target-card">
                    <p class="text-gray-500 text-sm mb-1">找出它的反义词！</p>
                    <p class="text-[clamp(1.8rem,6vw,3rem)] font-bold text-text whitespace-nowrap" id="target-word-2">大</p>
                    <p class="text-gray-400 text-xs mt-1" id="target-pinyin-2">dà</p>
                </div>
            </div>
            
            <!-- 右侧玩家2区域 - 90度逆时针旋转 -->
            <div class="w-1/3 bg-player2/10 flex flex-col transform -rotate-90 origin-center ml-24 translate-x-20">
                <!-- 玩家2分数显示 -->
                <div class="text-center p-2">
                    <p class="text-player2 font-bold text-lg">玩家2</p>
                    <p id="score2" class="text-player2 font-bold text-3xl">0</p>
                </div>
                
                <!-- 玩家2倒计时显示 -->
                <div class="text-center p-2">
                    <div class="bg-player2/20 rounded-lg p-2 inline-block">
                        <i class="fa fa-clock-o text-player2 mr-1"></i>
                        <span id="countdown-player2" class="text-player2 font-bold text-lg">5</span>
                    </div>
                </div>
                
                <!-- 玩家2选项区域 -->
                <div class="flex-1 flex items-start justify-center p-16">
                    <div id="options-player2" class="grid grid-cols-2 gap-4 w-48 h-32">
                        <!-- 选项会动态生成 -->
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    
    <!-- 结果界面 -->
    <div id="result-screen" class="hidden flex flex-col items-center justify-center h-screen p-6 z-20 relative bg-white/90 backdrop-blur-md">
        <div class="text-center max-w-md mx-auto">
            <h2 class="text-[clamp(1.8rem,5vw,2.5rem)] font-bold mb-6">游戏结束！</h2>
            
            <div class="bg-neutral rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex justify-between items-center mb-4 pb-4 border-b">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-player1 rounded-full flex items-center justify-center text-white mr-2">
                            <i class="fa fa-user"></i>
                        </div>
                        <span class="font-bold">玩家1</span>
                    </div>
                    <span id="final-score1" class="text-2xl font-bold text-player1">0</span>
                </div>
                
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-player2 rounded-full flex items-center justify-center text-white mr-2">
                            <i class="fa fa-user"></i>
                        </div>
                        <span class="font-bold">玩家2</span>
                    </div>
                    <span id="final-score2" class="text-2xl font-bold text-player2">0</span>
                </div>
            </div>
            
            <div id="winner-message" class="text-xl font-bold mb-8 p-4 rounded-xl">
                平局！你们都很棒！
            </div>
            
            <button id="restart-btn" class="bg-accent hover:bg-yellow-400 text-text font-bold py-3 px-8 rounded-full text-xl shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                再玩一次 <i class="fa fa-refresh ml-2"></i>
            </button>
        </div>
    </div>

    <script>
        // 反义词数据库 - 200对反义词（含拼音）
        const antonymsList = [
            // 形容词类
            { word: "大", pinyin: "dà", antonym: "小", antonymPinyin: "xiǎo" },
            { word: "多", pinyin: "duō", antonym: "少", antonymPinyin: "shǎo" },
            { word: "高", pinyin: "gāo", antonym: "矮", antonymPinyin: "ǎi" },
            { word: "胖", pinyin: "pàng", antonym: "瘦", antonymPinyin: "shòu" },
            { word: "长", pinyin: "cháng", antonym: "短", antonymPinyin: "duǎn" },
            { word: "宽", pinyin: "kuān", antonym: "窄", antonymPinyin: "zhǎi" },
            { word: "厚", pinyin: "hòu", antonym: "薄", antonymPinyin: "báo" },
            { word: "粗", pinyin: "cū", antonym: "细", antonymPinyin: "xì" },
            { word: "快", pinyin: "kuài", antonym: "慢", antonymPinyin: "màn" },
            { word: "远", pinyin: "yuǎn", antonym: "近", antonymPinyin: "jìn" },
            { word: "黑", pinyin: "hēi", antonym: "白", antonymPinyin: "bái" },
            { word: "红", pinyin: "hóng", antonym: "绿", antonymPinyin: "lǜ" },
            { word: "明", pinyin: "míng", antonym: "暗", antonymPinyin: "àn" },
            { word: "亮", pinyin: "liàng", antonym: "暗", antonymPinyin: "àn" },
            { word: "甜", pinyin: "tián", antonym: "苦", antonymPinyin: "kǔ" },
            { word: "酸", pinyin: "suān", antonym: "甜", antonymPinyin: "tián" },
            { word: "咸", pinyin: "xián", antonym: "淡", antonymPinyin: "dàn" },
            { word: "冷", pinyin: "lěng", antonym: "热", antonymPinyin: "rè" },
            { word: "温", pinyin: "wēn", antonym: "凉", antonymPinyin: "liáng" },
            { word: "干", pinyin: "gān", antonym: "湿", antonymPinyin: "shī" },
            { word: "软", pinyin: "ruǎn", antonym: "硬", antonymPinyin: "yìng" },
            { word: "松", pinyin: "sōng", antonym: "紧", antonymPinyin: "jǐn" },
            { word: "新", pinyin: "xīn", antonym: "旧", antonymPinyin: "jiù" },
            { word: "好", pinyin: "hǎo", antonym: "坏", antonymPinyin: "huài" },
            { word: "真", pinyin: "zhēn", antonym: "假", antonymPinyin: "jiǎ" },
            { word: "美", pinyin: "měi", antonym: "丑", antonymPinyin: "chǒu" },
            { word: "香", pinyin: "xiāng", antonym: "臭", antonymPinyin: "chòu" },
            { word: "轻", pinyin: "qīng", antonym: "重", antonymPinyin: "zhòng" },
            { word: "深", pinyin: "shēn", antonym: "浅", antonymPinyin: "qiǎn" },
            { word: "浓", pinyin: "nóng", antonym: "淡", antonymPinyin: "dàn" },
            { word: "熟", pinyin: "shú", antonym: "生", antonymPinyin: "shēng" },
            { word: "正", pinyin: "zhèng", antonym: "歪", antonymPinyin: "wāi" },
            { word: "直", pinyin: "zhí", antonym: "弯", antonymPinyin: "wān" },
            { word: "满", pinyin: "mǎn", antonym: "空", antonymPinyin: "kōng" },
            { word: "尖", pinyin: "jiān", antonym: "钝", antonymPinyin: "dùn" },
            { word: "光滑", pinyin: "guāng huá", antonym: "粗糙", antonymPinyin: "cū cāo" },
            { word: "整齐", pinyin: "zhěng qí", antonym: "凌乱", antonymPinyin: "líng luàn" },
            { word: "干净", pinyin: "gān jìng", antonym: "肮脏", antonymPinyin: "āng zāng" },
            { word: "安静", pinyin: "ān jìng", antonym: "热闹", antonymPinyin: "rè nào" },
            { word: "勤劳", pinyin: "qín láo", antonym: "懒惰", antonymPinyin: "lǎn duò" },
            { word: "聪明", pinyin: "cōng míng", antonym: "愚蠢", antonymPinyin: "yú chǔn" },
            { word: "勇敢", pinyin: "yǒng gǎn", antonym: "胆小", antonymPinyin: "dǎn xiǎo" },
            { word: "诚实", pinyin: "chéng shí", antonym: "虚伪", antonymPinyin: "xū wěi" },
            { word: "热情", pinyin: "rè qíng", antonym: "冷漠", antonymPinyin: "lěng mò" },
            { word: "善良", pinyin: "shàn liáng", antonym: "凶恶", antonymPinyin: "xiōng è" },
            { word: "谦虚", pinyin: "qiān xū", antonym: "骄傲", antonymPinyin: "jiāo ào" },
            { word: "活泼", pinyin: "huó pō", antonym: "呆板", antonymPinyin: "dāi bǎn" },
            { word: "机灵", pinyin: "jī líng", antonym: "笨拙", antonymPinyin: "bèn zhuō" },
            { word: "温柔", pinyin: "wēn róu", antonym: "粗暴", antonymPinyin: "cū bào" },
            
            // 动词类
            { word: "开", pinyin: "kāi", antonym: "关", antonymPinyin: "guān" },
            { word: "进", pinyin: "jìn", antonym: "出", antonymPinyin: "chū" },
            { word: "来", pinyin: "lái", antonym: "去", antonymPinyin: "qù" },
            { word: "上", pinyin: "shàng", antonym: "下", antonymPinyin: "xià" },
            { word: "升", pinyin: "shēng", antonym: "降", antonymPinyin: "jiàng" },
            { word: "起", pinyin: "qǐ", antonym: "落", antonymPinyin: "luò" },
            { word: "推", pinyin: "tuī", antonym: "拉", antonymPinyin: "lā" },
            { word: "涨", pinyin: "zhǎng", antonym: "落", antonymPinyin: "luò" },
            { word: "得", pinyin: "dé", antonym: "失", antonymPinyin: "shī" },
            { word: "买", pinyin: "mǎi", antonym: "卖", antonymPinyin: "mài" },
            { word: "爱", pinyin: "ài", antonym: "恨", antonymPinyin: "hèn" },
            { word: "哭", pinyin: "kū", antonym: "笑", antonymPinyin: "xiào" },
            { word: "醒", pinyin: "xǐng", antonym: "睡", antonymPinyin: "shuì" },
            { word: "迎", pinyin: "yíng", antonym: "送", antonymPinyin: "sòng" },
            { word: "问", pinyin: "wèn", antonym: "答", antonymPinyin: "dá" },
            { word: "分", pinyin: "fēn", antonym: "合", antonymPinyin: "hé" },
            { word: "死", pinyin: "sǐ", antonym: "活", antonymPinyin: "huó" },
            { word: "存", pinyin: "cún", antonym: "亡", antonymPinyin: "wáng" },
            { word: "收", pinyin: "shōu", antonym: "放", antonymPinyin: "fàng" },
            { word: "伸", pinyin: "shēn", antonym: "缩", antonymPinyin: "suō" },
            { word: "举", pinyin: "jǔ", antonym: "放", antonymPinyin: "fàng" },
            { word: "加", pinyin: "jiā", antonym: "减", antonymPinyin: "jiǎn" },
            { word: "胜", pinyin: "shèng", antonym: "败", antonymPinyin: "bài" },
            { word: "输", pinyin: "shū", antonym: "赢", antonymPinyin: "yíng" },
            { word: "有", pinyin: "yǒu", antonym: "无", antonymPinyin: "wú" },
            { word: "动", pinyin: "dòng", antonym: "静", antonymPinyin: "jìng" },
            { word: "攻", pinyin: "gōng", antonym: "守", antonymPinyin: "shǒu" },
            { word: "传", pinyin: "chuán", antonym: "接", antonymPinyin: "jiē" },
            { word: "涨", pinyin: "zhǎng", antonym: "跌", antonymPinyin: "diē" },
            { word: "增", pinyin: "zēng", antonym: "减", antonymPinyin: "jiǎn" },
            { word: "生", pinyin: "shēng", antonym: "灭", antonymPinyin: "miè" },
            { word: "始", pinyin: "shǐ", antonym: "终", antonymPinyin: "zhōng" },
            { word: "止", pinyin: "zhǐ", antonym: "行", antonymPinyin: "xíng" },
            { word: "追", pinyin: "zhuī", antonym: "逃", antonymPinyin: "táo" },
            { word: "落", pinyin: "luò", antonym: "升", antonymPinyin: "shēng" },
            { word: "借", pinyin: "jiè", antonym: "还", antonymPinyin: "huán" },
            { word: "取", pinyin: "qǔ", antonym: "舍", antonymPinyin: "shě" },
            { word: "吞", pinyin: "tūn", antonym: "吐", antonymPinyin: "tǔ" },
            { word: "吸", pinyin: "xī", antonym: "呼", antonymPinyin: "hū" },
            
            // 方位词类
            { word: "前", pinyin: "qián", antonym: "后", antonymPinyin: "hòu" },
            { word: "左", pinyin: "zuǒ", antonym: "右", antonymPinyin: "yòu" },
            { word: "里", pinyin: "lǐ", antonym: "外", antonymPinyin: "wài" },
            { word: "东", pinyin: "dōng", antonym: "西", antonymPinyin: "xī" },
            { word: "南", pinyin: "nán", antonym: "北", antonymPinyin: "běi" },
            { word: "内", pinyin: "nèi", antonym: "外", antonymPinyin: "wài" },
            { word: "远", pinyin: "yuǎn", antonym: "近", antonymPinyin: "jìn" },
            { word: "高", pinyin: "gāo", antonym: "低", antonymPinyin: "dī" },
            { word: "横", pinyin: "héng", antonym: "竖", antonymPinyin: "shù" },
            { word: "斜", pinyin: "xié", antonym: "正", antonymPinyin: "zhèng" },
            { word: "天", pinyin: "tiān", antonym: "地", antonymPinyin: "dì" },
            { word: "昼", pinyin: "zhòu", antonym: "夜", antonymPinyin: "yè" },
            { word: "春", pinyin: "chūn", antonym: "秋", antonymPinyin: "qiū" },
            { word: "夏", pinyin: "xià", antonym: "冬", antonymPinyin: "dōng" },
            { word: "早", pinyin: "zǎo", antonym: "晚", antonymPinyin: "wǎn" },
            { word: "晨", pinyin: "chén", antonym: "昏", antonymPinyin: "hūn" },
            { word: "古", pinyin: "gǔ", antonym: "今", antonymPinyin: "jīn" },
            { word: "朝", pinyin: "zhāo", antonym: "暮", antonymPinyin: "mù" },
            { word: "首", pinyin: "shǒu", antonym: "尾", antonymPinyin: "wěi" },
            
            // 其他类别
            { word: "是", pinyin: "shì", antonym: "否", antonymPinyin: "fǒu" },
            { word: "对", pinyin: "duì", antonym: "错", antonymPinyin: "cuò" },
            { word: "该", pinyin: "gāi", antonym: "不该", antonymPinyin: "bù gāi" },
            { word: "能", pinyin: "néng", antonym: "不能", antonymPinyin: "bù néng" },
            { word: "会", pinyin: "huì", antonym: "不会", antonymPinyin: "bù huì" },
            { word: "可以", pinyin: "kě yǐ", antonym: "不可以", antonymPinyin: "bù kě yǐ" },
            { word: "应该", pinyin: "yīng gāi", antonym: "不应该", antonymPinyin: "bù yīng gāi" },
            { word: "必须", pinyin: "bì xū", antonym: "不必", antonymPinyin: "bù bì" },
            { word: "也许", pinyin: "yě xǔ", antonym: "一定", antonymPinyin: "yī dìng" },
            { word: "可能", pinyin: "kě néng", antonym: "不可能", antonymPinyin: "bù kě néng" },
            { word: "经常", pinyin: "jīng cháng", antonym: "偶尔", antonymPinyin: "ǒu ěr" },
            { word: "有时", pinyin: "yǒu shí", antonym: "永远", antonymPinyin: "yǒng yuǎn" },
            { word: "许多", pinyin: "xǔ duō", antonym: "很少", antonymPinyin: "hěn shǎo" },
            { word: "全部", pinyin: "quán bù", antonym: "部分", antonymPinyin: "bù fèn" },
            { word: "一起", pinyin: "yī qǐ", antonym: "分开", antonymPinyin: "fēn kāi" },
            { word: "容易", pinyin: "róng yì", antonym: "困难", antonymPinyin: "kùn nán" },
            { word: "简单", pinyin: "jiǎn dān", antonym: "复杂", antonymPinyin: "fù zá" },
            { word: "高兴", pinyin: "gāo xìng", antonym: "难过", antonymPinyin: "nán guò" },
            { word: "安全", pinyin: "ān quán", antonym: "危险", antonymPinyin: "wēi xiǎn" },
            { word: "成功", pinyin: "chéng gōng", antonym: "失败", antonymPinyin: "shī bài" },
            { word: "同意", pinyin: "tóng yì", antonym: "反对", antonymPinyin: "fǎn duì" },
            { word: "熟悉", pinyin: "shú xī", antonym: "陌生", antonymPinyin: "mò shēng" },
            { word: "明白", pinyin: "míng bai", antonym: "糊涂", antonymPinyin: "hú tu" },
            { word: "清楚", pinyin: "qīng chu", antonym: "模糊", antonymPinyin: "mó hu" },
            { word: "紧张", pinyin: "jǐn zhāng", antonym: "轻松", antonymPinyin: "qīng sōng" },
            { word: "忙碌", pinyin: "máng lù", antonym: "悠闲", antonymPinyin: "yōu xián" },
            { word: "笔直", pinyin: "bǐ zhí", antonym: "弯曲", antonymPinyin: "wān qū" },
            { word: "凸起", pinyin: "tū qǐ", antonym: "凹陷", antonymPinyin: "āo xiàn" },
            { word: "新鲜", pinyin: "xīn xiān", antonym: "陈旧", antonymPinyin: "chén jiù" },
            { word: "平坦", pinyin: "píng tǎn", antonym: "崎岖", antonymPinyin: "qí qū" },
            { word: "聚合", pinyin: "jù hé", antonym: "分散", antonymPinyin: "fēn sàn" },
            { word: "坚定", pinyin: "jiān dìng", antonym: "动摇", antonymPinyin: "dòng yáo" },
            { word: "团结", pinyin: "tuán jié", antonym: "分裂", antonymPinyin: "fēn liè" },
            { word: "丰富", pinyin: "fēng fù", antonym: "贫乏", antonymPinyin: "pín fá" },
            { word: "坎坷", pinyin: "kǎn kě", antonym: "平坦", antonymPinyin: "píng tǎn" },
            { word: "曲折", pinyin: "qū zhé", antonym: "平坦", antonymPinyin: "píng tǎn" },
            { word: "和平", pinyin: "hé píng", antonym: "战争", antonymPinyin: "zhàn zhēng" },
            { word: "富裕", pinyin: "fù yù", antonym: "贫穷", antonymPinyin: "pín qióng" },
            { word: "强大", pinyin: "qiáng dà", antonym: "弱小", antonymPinyin: "ruò xiǎo" },
            { word: "复杂", pinyin: "fù zá", antonym: "单一", antonymPinyin: "dān yī" },
            { word: "糊涂", pinyin: "hú tu", antonym: "清醒", antonymPinyin: "qīng xǐng" },
            { word: "完整", pinyin: "wán zhěng", antonym: "残缺", antonymPinyin: "cán quē" },
            { word: "正常", pinyin: "zhèng cháng", antonym: "异常", antonymPinyin: "yì cháng" },
            { word: "普通", pinyin: "pǔ tōng", antonym: "特殊", antonymPinyin: "tè shū" },
            { word: "懵懂", pinyin: "měng dǒng", antonym: "明白", antonymPinyin: "míng bai" },
            { word: "浑浊", pinyin: "hún zhuó", antonym: "清澈", antonymPinyin: "qīng chè" },
            { word: "繁荣", pinyin: "fán róng", antonym: "衰败", antonymPinyin: "shuāi bài" },
            { word: "兴旺", pinyin: "xīng wàng", antonym: "萧条", antonymPinyin: "xiāo tiáo" },
            { word: "宽阔", pinyin: "kuān kuò", antonym: "狭窄", antonymPinyin: "xiá zhǎi" },
            { word: "锋利", pinyin: "fēng lì", antonym: "滞钝", antonymPinyin: "zhì dùn" },
            { word: "宽敞", pinyin: "kuān chǎng", antonym: "狭小", antonymPinyin: "xiá xiǎo" },
            { word: "舒展", pinyin: "shū zhǎn", antonym: "蜷缩", antonymPinyin: "quán suō" },
            { word: "敏捷", pinyin: "mǐn jié", antonym: "迟缓", antonymPinyin: "chí huǎn" },
            { word: "清晰", pinyin: "qīng xī", antonym: "朦胧", antonymPinyin: "méng lóng" },
            { word: "陡峭", pinyin: "dǒu qiào", antonym: "平缓", antonymPinyin: "píng huǎn" },
            { word: "缓和", pinyin: "huǎn hé", antonym: "激烈", antonymPinyin: "jī liè" },
            { word: "嘈杂", pinyin: "cáo zá", antonym: "寂静", antonymPinyin: "jì jìng" },
            { word: "松弛", pinyin: "sōng chí", antonym: "紧张", antonymPinyin: "jǐn zhāng" },
            { word: "微弱", pinyin: "wēi ruò", antonym: "强烈", antonymPinyin: "qiáng liè" },
            { word: "蓬勃", pinyin: "péng bó", antonym: "衰败", antonymPinyin: "shuāi bài" },
            { word: "旺盛", pinyin: "wàng shèng", antonym: "枯萎", antonymPinyin: "kū wěi" },
            { word: "镇静", pinyin: "zhèn jìng", antonym: "慌张", antonymPinyin: "huāng zhāng" },
            { word: "沉着", pinyin: "chén zhuó", antonym: "慌张", antonymPinyin: "huāng zhāng" },
            { word: "缓慢", pinyin: "huǎn màn", antonym: "快速", antonymPinyin: "kuài sù" },
            { word: "永久", pinyin: "yǒng jiǔ", antonym: "暂时", antonymPinyin: "zàn shí" },
            { word: "辽阔", pinyin: "liáo kuò", antonym: "狭窄", antonymPinyin: "xiá zhǎi" },
            { word: "巨大", pinyin: "jù dà", antonym: "渺小", antonymPinyin: "miǎo xiǎo" },
            { word: "光明", pinyin: "guāng míng", antonym: "黑暗", antonymPinyin: "hēi àn" },
            { word: "温暖", pinyin: "wēn nuǎn", antonym: "寒冷", antonymPinyin: "hán lěng" },
            { word: "拮据", pinyin: "jié jū", antonym: "富裕", antonymPinyin: "fù yù" },
            { word: "愚笨", pinyin: "yú bèn", antonym: "聪明", antonymPinyin: "cōng míng" },
            { word: "笨拙", pinyin: "bèn zhuō", antonym: "伶俐", antonymPinyin: "líng lì" },
            { word: "狠毒", pinyin: "hěn dú", antonym: "善良", antonymPinyin: "shàn liáng" },
            { word: "逼仄", pinyin: "bī zè", antonym: "宽阔", antonymPinyin: "kuān kuò" },
            { word: "吝啬", pinyin: "lìn sè", antonym: "慷慨", antonymPinyin: "kāng kǎi" },
            { word: "潮湿", pinyin: "cháo shī", antonym: "干燥", antonymPinyin: "gān zào" },
            { word: "短暂", pinyin: "duǎn zàn", antonym: "永久", antonymPinyin: "yǒng jiǔ" },
            { word: "漆黑", pinyin: "qī hēi", antonym: "明亮", antonymPinyin: "míng liàng" },
            { word: "喧闹", pinyin: "xuān nào", antonym: "寂静", antonymPinyin: "jì jìng" },
            { word: "柔软", pinyin: "róu ruǎn", antonym: "坚硬", antonymPinyin: "jiān yìng" },
            { word: "清澈", pinyin: "qīng chè", antonym: "浑浊", antonymPinyin: "hún zhuó" },
            { word: "蜿蜒", pinyin: "wān yán", antonym: "笔直", antonymPinyin: "bǐ zhí" },
            { word: "生疏", pinyin: "shēng shū", antonym: "熟悉", antonymPinyin: "shú xī" },
            { word: "轻盈", pinyin: "qīng yíng", antonym: "笨重", antonymPinyin: "bèn zhòng" },
            { word: "腐烂", pinyin: "fǔ làn", antonym: "新鲜", antonymPinyin: "xīn xiān" },
            { word: "繁重", pinyin: "fán zhòng", antonym: "轻松", antonymPinyin: "qīng sōng" },
            { word: "悲伤", pinyin: "bēi shāng", antonym: "愉快", antonymPinyin: "yú kuài" },
            { word: "炎热", pinyin: "yán rè", antonym: "寒冷", antonymPinyin: "hán lěng" },
            { word: "犹豫", pinyin: "yóu yù", antonym: "果断", antonymPinyin: "guǒ duàn" },
            { word: "软弱", pinyin: "ruǎn ruò", antonym: "坚强", antonymPinyin: "jiān qiáng" }
        ];
        

        
        // 初始化布局按钮状态
        function initLayoutButton() {
            const layoutIcon = document.getElementById('layout-icon');
            const layoutText = document.getElementById('layout-text');
            
            // 默认使用桌面版布局，用户可手动切换
            isCurrentlyMobile = false;
            layoutIcon.className = 'fa fa-mobile text-gray-600';
            layoutText.textContent = '手机版';
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initLayoutButton);
        

        
        // 游戏状态变量
        let currentWord = null;
        let currentAntonym = null;
        let score1 = 0;
        let score2 = 0;
        let round = 1;
        let gameActive = false;
        let timerInterval = null;
        let countdown = 10;
        let usedIndices = [];
        let isRotationLocked = false;
        let isTimerEnabled = true; // 倒计时开关状态
        
        // 布局状态变量
        let layoutMode = 'auto'; // 'auto', 'desktop', 'mobile'
        let isCurrentlyMobile = false; // 当前实际使用的布局
        
        // DOM元素
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const lockRotationBtn = document.getElementById('lock-rotation-btn');
        const lockIcon = document.getElementById('lock-icon');
        const lockText = document.getElementById('lock-text');
        const targetWordEl = document.getElementById('target-word');
        const targetWord2El = document.getElementById('target-word-2');
        const optionsPlayer1 = document.getElementById('options-player1');
        const optionsPlayer2 = document.getElementById('options-player2');
        const score1El = document.getElementById('score1');
        const score2El = document.getElementById('score2');
        const roundCounter = document.getElementById('round-counter');
        const countdownEl = document.getElementById('countdown');
        const countdownPlayer1El = document.getElementById('countdown-player1');
        const countdownPlayer2El = document.getElementById('countdown-player2');
        const finalScore1El = document.getElementById('final-score1');
        const finalScore2El = document.getElementById('final-score2');
        const winnerMessageEl = document.getElementById('winner-message');
        
        // 事件监听
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', restartGame);
        lockRotationBtn.addEventListener('click', toggleRotationLock);
        
        // 布局切换按钮事件监听
        document.getElementById('layout-toggle-btn').addEventListener('click', toggleLayout);
        
        // 倒计时开关事件监听
        document.getElementById('timer-toggle').addEventListener('change', function() {
            isTimerEnabled = this.checked;
            const description = document.getElementById('timer-description');
            description.textContent = isTimerEnabled ? '每题10秒限时' : '不限时模式';
        });
        
        // 页面加载时检查提示框元素是否存在
        window.addEventListener('DOMContentLoaded', () => {
            console.log('页面加载完成，检查提示框元素...');
            
            // 尝试多种方法查找元素
            const notification1 = document.getElementById('notification-player1');
            const notification2 = document.getElementById('notification-player2');
            const text1 = document.getElementById('notification-text-player1');
            const text2 = document.getElementById('notification-text-player2');
            const subtext1 = document.getElementById('notification-subtext-player1');
            const subtext2 = document.getElementById('notification-subtext-player2');
            
            console.log('notification-player1:', notification1);
            console.log('notification-player2:', notification2);
            console.log('notification-text-player1:', text1);
            console.log('notification-text-player2:', text2);
            console.log('notification-subtext-player1:', subtext1);
            console.log('notification-subtext-player2:', subtext2);
            
            // 尝试通过querySelector查找
            console.log('通过querySelector查找:');
            console.log('querySelector notification-player1:', document.querySelector('#notification-player1'));
            console.log('querySelector notification-player2:', document.querySelector('#notification-player2'));
            
            // 检查所有div元素
            console.log('所有div元素数量:', document.querySelectorAll('div').length);
            
            // 检查所有带有id的元素
            const allElementsWithId = document.querySelectorAll('[id]');
            console.log('所有带有id的元素:');
            allElementsWithId.forEach(el => {
                console.log('ID:', el.id, 'Tag:', el.tagName);
            });
        });
        
        // 开始游戏
        function startGame() {
            startScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            score1 = 0;
            score2 = 0;
            round = 1;
            usedIndices = [];
            updateScores();
            
            // 根据当前布局模式应用相应的样式
            if (isCurrentlyMobile) {
                setTimeout(() => {
                    setupMobileLayout();
                    console.log('手机端布局已应用');
                }, 100); // 延迟一点确保DOM已渲染
            } else {
                // 确保桌面版布局也被正确应用
                setupDesktopLayout();
                console.log('桌面端布局已应用');
            }
            
            nextRound();
        }
        
        // 重新开始游戏
        function restartGame() {
            resultScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            score1 = 0;
            score2 = 0;
            round = 1;
            usedIndices = [];
            updateScores();
            nextRound();
        }
        
        // 下一轮
        function nextRound() {
            if (round > 10) {
                endGame();
                return;
            }
            
            gameActive = true;
            roundCounter.textContent = `第${round}轮`;
            
            // 选择一个未使用过的反义词对
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * antonymsList.length);
            } while (usedIndices.includes(randomIndex));
            
            usedIndices.push(randomIndex);
            const pair = antonymsList[randomIndex];
            currentWord = pair.word;
            currentAntonym = pair.antonym;
            
            // 显示目标字（两个卡片）
            targetWordEl.textContent = currentWord;
            targetWord2El.textContent = currentWord;
            
            // 显示拼音
            const targetPinyinEl = document.getElementById('target-pinyin');
            const targetPinyin2El = document.getElementById('target-pinyin-2');
            const currentPinyin = pair.pinyin || '';
            targetPinyinEl.textContent = currentPinyin;
            targetPinyin2El.textContent = currentPinyin;
            
            targetWordEl.classList.remove('correct-animation');
            targetWord2El.classList.remove('correct-animation');
            void targetWordEl.offsetWidth; // 重置动画
            void targetWord2El.offsetWidth; // 重置动画
            targetWordEl.classList.add('correct-animation');
            targetWord2El.classList.add('correct-animation');
            
            // 生成选项
            generateOptions();
            
            // 开始倒计时
            startCountdown();
        }
        
        // 生成选项
        function generateOptions() {

            
            // 清空之前的选项
            optionsPlayer1.innerHTML = '';
            optionsPlayer2.innerHTML = '';
            
            // 根据当前布局模式设置容器样式
            if (isCurrentlyMobile) {
                // 手机端容器样式 - 防止超出屏幕
                const containerStyle = `
                    display: grid !important;
                    grid-template-columns: 1fr 1fr !important;
                    grid-template-rows: 1fr 1fr !important;
                    gap: 4px !important;
                    width: 100% !important;
                    max-width: min(280px, calc(100vw - 2rem)) !important;
                    height: 120px !important;
                    background: rgba(255,255,255,0.9) !important;
                    border-radius: 8px !important;
                    border: none !important;
                    padding: 6px !important;
                    margin: 0.5rem auto !important;
                    box-sizing: border-box !important;
                    overflow: hidden !important;
                `;
                optionsPlayer1.style.cssText = containerStyle;
                optionsPlayer2.style.cssText = containerStyle;
                console.log('手机版布局，屏幕宽度:', window.innerWidth);
                setupMobileLayout();
            } else {
                // 桌面端容器样式 - 使用网格布局确保2x2排列
                const desktopContainerStyle = `
                    display: grid !important;
                    grid-template-columns: 1fr 1fr !important;
                    grid-template-rows: 1fr 1fr !important;
                    gap: 8px !important;
                    width: 300px !important;
                    height: 200px !important;
                    background: #f0f0f0 !important;
                    border: 2px solid #ccc !important;
                    padding: 10px !important;
                    margin: 10px auto !important;
                    box-sizing: border-box !important;
                `;
                optionsPlayer1.style.cssText = desktopContainerStyle;
                optionsPlayer2.style.cssText = desktopContainerStyle;
                console.log('桌面版布局，屏幕宽度:', window.innerWidth);
                // 桌面端：确保第二个目标字卡片显示
                const secondCard = document.getElementById('second-target-card');
                if (secondCard) {
                    secondCard.classList.remove('hidden');
                    console.log('桌面端：第二个目标字卡片已显示');
                }
            }
            
            // 获取当前目标字的字数
            const targetWordLength = currentWord.length;
            
            // 收集其他可能的干扰项（字数要跟目标字一样）
            const distractors = [];
            const sameLengthWords = antonymsList.filter(item => 
                item.word.length === targetWordLength && 
                item.word !== currentAntonym && 
                item.antonym !== currentAntonym
            );
            
            // 如果同字数的词不够，从所有词中随机选择
            const availableWords = sameLengthWords.length >= 3 ? sameLengthWords : antonymsList;
            
            while (distractors.length < 3) {
                const randomItem = availableWords[Math.floor(Math.random() * availableWords.length)];
                const randomWord = randomItem.word;
                if (randomWord !== currentAntonym && !distractors.includes(randomWord)) {
                    distractors.push(randomWord);
                }
            }
            
            // 选项列表：正确答案 + 3个干扰项
            const allOptions = [currentAntonym, ...distractors];
            
            // 打乱顺序
            const shuffledOptions = shuffleArray([...allOptions]);
            
            // 为两个玩家生成相同的选项（顺序可能不同）
            const player1Options = shuffleArray([...allOptions]);
            const player2Options = shuffleArray([...allOptions]);
            
            console.log('生成选项:', { 
                targetWord: currentWord, 
                targetWordLength, 
                player1Options, 
                player2Options, 
                currentAntonym 
            });
            
            // 创建玩家1的选项按钮
            player1Options.forEach(option => {
                // 查找拼音信息
                const wordData = antonymsList.find(item => item.word === option || item.antonym === option);
                const pinyin = wordData ? (wordData.word === option ? wordData.pinyin : wordData.antonymPinyin) : '';
                
                const button = createOptionButton(option, pinyin, 'player1');
                optionsPlayer1.appendChild(button);
            });
            
            // 创建玩家2的选项按钮
            player2Options.forEach(option => {
                // 查找拼音信息
                const wordData = antonymsList.find(item => item.word === option || item.antonym === option);
                const pinyin = wordData ? (wordData.word === option ? wordData.pinyin : wordData.antonymPinyin) : '';
                
                const button = createOptionButton(option, pinyin, 'player2');
                optionsPlayer2.appendChild(button);
            });
            
            console.log('选项按钮已创建:', {
                player1Count: optionsPlayer1.children.length,
                player2Count: optionsPlayer2.children.length
            });
        }
        
        // 创建选项按钮
        function createOptionButton(text, pinyin, player) {

            const button = document.createElement('button');
            // 根据当前布局模式设置按钮样式
            if (isCurrentlyMobile) {
                // 手机端样式 - 适配Grid，防止文字超出
                button.style.cssText = `
                    display: flex !important;
                    flex-direction: column !important;
                    justify-content: center !important;
                    align-items: center !important;
                    width: 100% !important;
                    height: 100% !important;
                    background: white !important;
                    border: 2px solid #333 !important;
                    border-radius: 4px !important;
                    font-size: 12px !important;
                    font-weight: bold !important;
                    color: #333 !important;
                    cursor: pointer !important;
                    padding: 2px !important;
                    text-align: center !important;
                    box-sizing: border-box !important;
                    overflow: hidden !important;
                    word-break: keep-all !important;
                    white-space: nowrap !important;
                    text-overflow: ellipsis !important;
                `;
            } else {
                // 桌面端样式 - 适配网格布局
                button.style.cssText = `
                    display: flex !important;
                    flex-direction: column !important;
                    justify-content: center !important;
                    align-items: center !important;
                    width: 100% !important;
                    height: 100% !important;
                    background: white !important;
                    border: 2px solid #333 !important;
                    border-radius: 8px !important;
                    font-size: 16px !important;
                    font-weight: bold !important;
                    color: #333 !important;
                    cursor: pointer !important;
                    padding: 8px !important;
                    text-align: center !important;
                    box-sizing: border-box !important;
                `;
            }
            
            button.innerHTML = `
                <div style="font-size: ${isCurrentlyMobile ? '16px' : '18px'}; line-height: 1.1; margin-bottom: 2px;">${text}</div>
                <div style="font-size: ${isCurrentlyMobile ? '9px' : '10px'}; color: #666;">${pinyin || ''}</div>
            `;
            
            button.onclick = function() {
                // 立即显示选中样式
                this.style.borderColor = '#FFD700';
                this.style.borderWidth = '4px';
                this.style.boxShadow = '0 0 10px rgba(255, 215, 0, 0.5)';
                this.style.backgroundColor = '#FFF8DC';
                
                // 延迟执行handleAnswer，让用户看到选中效果
                setTimeout(() => {
                    handleAnswer(this, player);
                }, 200);
            };
            
            button.dataset.option = text;
            return button;
        }
        
        // 手机端专用布局设置 - 最简单方案
        function setupMobileLayout() {
            console.log('开始应用手机端布局...');
            
            // 手机端：确保第二个目标字卡片隐藏
            const secondCard = document.getElementById('second-target-card');
            if (secondCard) {
                secondCard.classList.add('hidden');
                console.log('手机端：第二个目标字卡片已隐藏');
            }
            
            // NOTE: 弹框方向将在showCorrectAnswerHint和showAnswerToOtherPlayer函数中处理
            
            // 1. 修复目标字显示 - 只显示上面的，隐藏下面的
            const targetWordEl = document.getElementById('target-word');
            const targetWord2El = document.getElementById('target-word-2');
            
            console.log('目标字元素1:', targetWordEl);
            console.log('目标字元素2:', targetWord2El);
            
            // 显示上面的目标字（target-word）
            if (targetWordEl) {
                const parentCard = targetWordEl.closest('div');
                if (parentCard) {
                    parentCard.style.cssText = `
                        transform: none !important;
                        display: block !important;
                        visibility: visible !important;
                    `;
                    console.log('目标字1卡片显示已修复');
                }
            }
            
            // 隐藏下面的目标字（target-word-2）
            if (targetWord2El) {
                const parentCard = targetWord2El.closest('div');
                if (parentCard) {
                    parentCard.style.display = 'none !important';
                    console.log('目标字2卡片已隐藏');
                }
            }
            
            // 2. 备用方案：通过更精确的选择器查找目标字卡片
            const allCards = document.querySelectorAll('div[class*="bg-white"][class*="rounded-3xl"]');
            console.log('找到所有白色卡片数量:', allCards.length);
            
            allCards.forEach((card, index) => {
                const targetWord1 = card.querySelector('#target-word');
                const targetWord2 = card.querySelector('#target-word-2');
                
                if (targetWord1) {
                    // 包含target-word的卡片 - 显示并取消旋转
                    card.style.cssText = `
                        transform: none !important;
                        display: block !important;
                        visibility: visible !important;
                    `;
                    console.log('上方目标字卡片已显示');
                } else if (targetWord2) {
                    // 包含target-word-2的卡片 - 隐藏
                    card.style.display = 'none !important';
                    console.log('下方目标字卡片已隐藏');
                }
            });
            
            // 3. 修复玩家区域并移动通知框
            const playerAreas = document.querySelectorAll('div[class*="w-1/3"][class*="bg-player"]');
            console.log('找到玩家区域数量:', playerAreas.length);
            
            playerAreas.forEach((area, index) => {
                area.style.cssText = `
                    transform: none !important;
                    width: 100% !important;
                    max-width: min(320px, calc(100vw - 1rem)) !important;
                    margin: 0.25rem auto !important;
                    padding: 0.5rem !important;
                    display: block !important;
                    position: relative !important;
                    box-sizing: border-box !important;
                    overflow: hidden !important;
                `;
                
                // 将对应的通知框移动到玩家区域内
                const playerId = index === 0 ? 'player1' : 'player2';
                const notification = document.getElementById(`notification-${playerId}`);
                if (notification && area) {
                    area.appendChild(notification);
                    console.log(`通知框${playerId}已移动到玩家区域内`);
                }
                
                console.log(`玩家区域${index + 1}样式已应用`);
            });
            
            // 4. 修复中间的目标字区域，并隐藏下方旋转的目标字
            const whiteArea = document.querySelector('div[class*="w-1/3"][class*="bg-white"]');
            if (whiteArea) {
                whiteArea.style.cssText = `
                    width: 100% !important;
                    max-width: min(320px, calc(100vw - 1rem)) !important;
                    margin: 0.25rem auto !important;
                    padding: 0.75rem !important;
                    text-align: center !important;
                    box-sizing: border-box !important;
                    overflow: hidden !important;
                `;
                
                // 查找并隐藏所有旋转的目标字卡片
                const rotatedCards = whiteArea.querySelectorAll('div[class*="transform"][class*="rotate"]');
                rotatedCards.forEach(card => {
                    card.style.display = 'none !important';
                    console.log('旋转的目标字卡片已隐藏');
                });
                
                // 额外的保险：隐藏包含target-word-2的所有父级元素
                const targetWord2Elements = whiteArea.querySelectorAll('#target-word-2');
                targetWord2Elements.forEach(el => {
                    let parent = el.parentElement;
                    while (parent && parent !== whiteArea) {
                        parent.style.display = 'none !important';
                        console.log('target-word-2的父级元素已隐藏');
                        parent = parent.parentElement;
                    }
                });
                
                console.log('目标字区域样式已应用');
            }
            
            // 5. 修复游戏容器布局
            const gameContainer = document.querySelector('div[class*="justify-between"]:not([class*="p-4"])');
            if (gameContainer) {
                gameContainer.style.cssText = `
                    display: flex !important;
                    flex-direction: column !important;
                    align-items: center !important;
                    height: auto !important;
                    padding: 0.5rem !important;
                `;
                console.log('游戏容器垂直布局已应用');
            }
            
            // 6. 直接隐藏第二个目标字卡片（第193行的div）
            const secondTargetCard = document.querySelector('div.bg-white.rounded-3xl.shadow-2xl.p-8.text-center.transform.-rotate-90');
            if (secondTargetCard) {
                secondTargetCard.style.display = 'none !important';
                secondTargetCard.style.visibility = 'hidden !important';
                secondTargetCard.style.opacity = '0 !important';
                console.log('直接隐藏第二个目标字卡片（-rotate-90）');
            }
            
            // 7. 备用方案：通过包含target-word-2的元素隐藏
            const allTargetWord2Cards = document.querySelectorAll('div');
            allTargetWord2Cards.forEach(card => {
                if (card.querySelector('#target-word-2')) {
                    card.style.display = 'none !important';
                    card.style.visibility = 'hidden !important';
                    card.style.opacity = '0 !important';
                    console.log('通过target-word-2隐藏卡片');
                }
            });
            
            // 8. 最强力保险：直接隐藏所有-rotate-90的白色卡片
            const negativeRotateCards = document.querySelectorAll('div[class*="-rotate-90"][class*="bg-white"]');
            negativeRotateCards.forEach(card => {
                card.style.display = 'none !important';
                card.style.visibility = 'hidden !important';
                card.style.opacity = '0 !important';
                console.log('隐藏-rotate-90的白色卡片');
            });
            
            // 9. 确保选项容器使用手机版样式
            if (optionsPlayer1 && optionsPlayer2) {
                const mobileContainerStyle = `
                    display: grid !important;
                    grid-template-columns: 1fr 1fr !important;
                    grid-template-rows: 1fr 1fr !important;
                    gap: 4px !important;
                    width: 100% !important;
                    max-width: min(280px, calc(100vw - 2rem)) !important;
                    height: 120px !important;
                    background: rgba(255,255,255,0.9) !important;
                    border-radius: 8px !important;
                    border: none !important;
                    padding: 6px !important;
                    margin: 0.5rem auto !important;
                    box-sizing: border-box !important;
                    overflow: hidden !important;
                `;
                optionsPlayer1.style.cssText = mobileContainerStyle;
                optionsPlayer2.style.cssText = mobileContainerStyle;
                console.log('选项容器手机版样式已应用');
            }
            
            console.log('手机端布局修复完成！');
        }
        
        // 处理答案选择
        function handleAnswer(button, player) {
            if (!gameActive) return;
            
            const selectedOption = button.dataset.option;
            const isCorrect = selectedOption === currentAntonym;
            
            if (isCorrect) {
                // 答对了 - 立即结束当前轮次
                gameActive = false;
                clearInterval(timerInterval);
                
                button.classList.add('bg-green-100', 'border-2', 'border-green-500', 'correct-animation');
                
                // 给答题者加分
                if (player === 'player1') {
                    score1++;
                } else {
                    score2++;
                }
                updateScores();
                
                // 显示答对提示
                showCorrectAnswerHint(player);
                
                // 提示另一方正确答案
                const otherPlayer = player === 'player1' ? 'player2' : 'player1';
                showAnswerToOtherPlayer(otherPlayer);
                
                // 延迟进入下一轮
                setTimeout(() => {
                    round++;
                    nextRound();
                }, 3000);
                
            } else {
                // 答错了 - 不结束当前轮次，让另一个玩家继续答题
                button.classList.add('bg-red-100', 'border-2', 'border-red-500');
                button.disabled = true; // 禁用已答错的按钮
                
                // 高亮正确答案
                const correctButtons = document.querySelectorAll(`[data-option="${currentAntonym}"]`);
                correctButtons.forEach(btn => {
                    btn.classList.add('bg-green-100', 'border-2', 'border-green-500');
                });
                
                // 显示答错提示
                showWrongAnswerHint(player);
                
                // 检查另一个玩家是否还有机会答题
                const otherPlayer = player === 'player1' ? 'player2' : 'player1';
                const otherPlayerButtons = document.querySelectorAll(`#options-${otherPlayer} button`);
                const hasOtherPlayerAnswered = Array.from(otherPlayerButtons).some(btn => 
                    btn.classList.contains('bg-green-100') || btn.classList.contains('bg-red-100')
                );
                
                if (hasOtherPlayerAnswered) {
                    // 另一个玩家也已经答题了，结束当前轮次
                    gameActive = false;
                    clearInterval(timerInterval);
                    
                    setTimeout(() => {
                        round++;
                        nextRound();
                    }, 2000);
                }
                // 如果另一个玩家还没答题，继续等待
            }
        }
        
        // 显示答对提示
        function showCorrectAnswerHint(player) {
            const playerName = player === 'player1' ? '玩家1' : '玩家2';
            
            // 获取提示框元素 - 修复ID问题
            const playerNumber = player === 'player1' ? '1' : '2';
            const notification = document.getElementById(`notification-player${playerNumber}`);
            const textEl = document.getElementById(`notification-text-player${playerNumber}`);
            const subtextEl = document.getElementById(`notification-subtext-player${playerNumber}`);

            // 调试：检查元素是否存在
            console.log('查找提示框元素:', `notification-player${playerNumber}`);
            console.log('notification元素:', notification);
            console.log('textEl元素:', textEl);
            console.log('subtextEl元素:', subtextEl);

            // 检查元素是否存在
            if (!notification || !textEl || !subtextEl) {
                console.error('提示框元素未找到！');
                return;
            }

            // 根据当前布局模式设置通知样式
            if (isCurrentlyMobile) {
                // 手机端：将通知显示在玩家区域内的红框位置，垂直水平居中
                notification.className = `absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-lg p-2 text-center z-[9999] border-2 border-green-500 max-w-[200px]`;
                notification.style.transform = 'translate(-50%, -50%)'; // 水平垂直居中，无旋转
                notification.style.fontSize = '12px'; // 缩小字体适配空间
            } else {
                // 桌面端：保持原来的固定定位和旋转
                const rotation = player === 'player1' ? 'rotate(90deg)' : 'rotate(-90deg)';
                notification.className = `fixed top-1/4 ${player === 'player1' ? 'left-1/4' : 'right-1/4'} bg-white rounded-2xl shadow-2xl p-4 text-center z-[9999] border-4 border-green-500 transform`;
                notification.style.transform = rotation;
            }
            
            // 设置文本内容 - 根据布局模式调整字体大小
            textEl.textContent = `恭喜你答对了！`;
            subtextEl.innerHTML = `得 <span class="font-bold text-green-600">1</span> 分！`;
            
            if (isCurrentlyMobile) {
                textEl.className = `text-sm font-bold text-green-600 mb-1`;
                subtextEl.className = `text-xs text-gray-600`;
            } else {
                textEl.className = `text-xl font-bold text-green-600 mb-1`;
                subtextEl.className = `text-lg text-gray-600 mb-1`;
            }

            // 显示提示
            notification.classList.remove('hidden');
            
            // 2秒后移除提示
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 2000);
        }
        
        // 提示另一方正确答案
        function showAnswerToOtherPlayer(otherPlayer) {
            const otherPlayerName = otherPlayer === 'player1' ? '玩家1' : '玩家2';
            
            // 获取提示框元素 - 修复ID问题
            const playerNumber = otherPlayer === 'player1' ? '1' : '2';
            const notification = document.getElementById(`notification-player${playerNumber}`);
            const textEl = document.getElementById(`notification-text-player${playerNumber}`);
            const subtextEl = document.getElementById(`notification-subtext-player${playerNumber}`);

            // 调试：检查元素是否存在
            console.log('查找提示框元素:', `notification-player${playerNumber}`);
            console.log('notification元素:', notification);
            console.log('textEl元素:', textEl);
            console.log('subtextEl元素:', subtextEl);

            // 检查元素是否存在
            if (!notification || !textEl || !subtextEl) {
                console.error('提示框元素未找到！');
                return;
            }

            // 根据当前布局模式设置通知样式
            if (isCurrentlyMobile) {
                // 手机端：将通知显示在玩家区域内的红框位置，垂直水平居中
                notification.className = `absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-lg p-2 text-center z-[9999] border-2 border-blue-500 max-w-[200px]`;
                notification.style.transform = 'translate(-50%, -50%)'; // 水平垂直居中，无旋转
                notification.style.fontSize = '12px'; // 缩小字体适配空间
            } else {
                // 桌面端：保持原来的固定定位和旋转
                const rotation = otherPlayer === 'player1' ? 'rotate(90deg)' : 'rotate(-90deg)';
                notification.className = `fixed top-1/4 ${otherPlayer === 'player1' ? 'left-1/4' : 'right-1/4'} bg-white rounded-2xl shadow-2xl p-4 text-center z-[9999] border-4 border-blue-500 transform`;
                notification.style.transform = rotation;
            }
            
            // 检查是否是时间到期的情况
            const isTimeUp = !gameActive && countdown <= 0;
            
            if (isTimeUp) {
                // 时间到期的提示
                textEl.textContent = `时间到！`;
                subtextEl.innerHTML = `正确答案是：<span class="font-bold text-green-600">${currentAntonym}</span>`;
                
                if (isCurrentlyMobile) {
                    textEl.className = `text-sm font-bold text-orange-600 mb-1`;
                    subtextEl.className = `text-xs text-gray-600`;
                } else {
                    textEl.className = `text-xl font-bold text-orange-600 mb-1`;
                    subtextEl.className = `text-lg text-gray-600 mb-1`;
                }
            } else {
                // 正常的题目结束提示
                textEl.textContent = `${otherPlayerName}，题目已结束`;
                subtextEl.innerHTML = `正确答案是：<span class="font-bold text-green-600">${currentAntonym}</span>`;
                
                if (isCurrentlyMobile) {
                    textEl.className = `text-sm font-bold text-blue-600 mb-1`;
                    subtextEl.className = `text-xs text-gray-600`;
                } else {
                    textEl.className = `text-xl font-bold text-blue-600 mb-1`;
                    subtextEl.className = `text-lg text-gray-600 mb-1`;
                }
            }

            // 显示提示
            notification.classList.remove('hidden');
            
            // 3秒后移除提示
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }
        
        // 显示答错提示
        function showWrongAnswerHint(player) {
            const playerName = player === 'player1' ? '玩家1' : '玩家2';
            
            // 获取提示框元素 - 修复ID问题
            const playerNumber = player === 'player1' ? '1' : '2';
            const notification = document.getElementById(`notification-player${playerNumber}`);
            const textEl = document.getElementById(`notification-text-player${playerNumber}`);
            const subtextEl = document.getElementById(`notification-subtext-player${playerNumber}`);

            // 检查元素是否存在
            if (!notification || !textEl || !subtextEl) {
                console.error('提示框元素未找到！');
                return;
            }

            // 根据当前布局模式设置通知样式
            if (isCurrentlyMobile) {
                // 手机端：将通知显示在玩家区域内的红框位置，垂直水平居中
                notification.className = `absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-lg p-2 text-center z-[9999] border-2 border-red-500 max-w-[200px]`;
                notification.style.transform = 'translate(-50%, -50%)'; // 水平垂直居中，无旋转
                notification.style.fontSize = '12px'; // 缩小字体适配空间
            } else {
                // 桌面端：保持原来的固定定位和旋转
                const rotation = player === 'player1' ? 'rotate(90deg)' : 'rotate(-90deg)';
                notification.className = `fixed top-1/4 ${player === 'player1' ? 'left-1/4' : 'right-1/4'} bg-white rounded-2xl shadow-2xl p-4 text-center z-[9999] border-4 border-red-500 transform`;
                notification.style.transform = rotation;
            }
            
            // 设置文本内容 - 根据布局模式调整字体大小
            textEl.textContent = `${playerName} 答错了`;
            subtextEl.innerHTML = `正确答案是：<span class="font-bold text-green-600">${currentAntonym}</span>`;
            
            if (isCurrentlyMobile) {
                textEl.className = `text-sm font-bold text-red-600 mb-1`;
                subtextEl.className = `text-xs text-gray-600`;
            } else {
                textEl.className = `text-xl font-bold text-red-600 mb-1`;
                subtextEl.className = `text-lg text-gray-600 mb-1`;
            }

            // 显示提示
            notification.classList.remove('hidden');
            
            // 1.5秒后移除提示
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 1500);
        }
        
        // 开始倒计时
        function startCountdown() {
            clearInterval(timerInterval);
            
            if (!isTimerEnabled) {
                // 不限时模式，显示无限符号
                countdownEl.textContent = '∞';
                countdownPlayer1El.textContent = '∞';
                countdownPlayer2El.textContent = '∞';
                return;
            }
            
            countdown = 10;
            countdownEl.textContent = countdown;
            countdownPlayer1El.textContent = countdown;
            countdownPlayer2El.textContent = countdown;
            
            timerInterval = setInterval(() => {
                countdown--;
                countdownEl.textContent = countdown;
                countdownPlayer1El.textContent = countdown;
                countdownPlayer2El.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(timerInterval);
                    if (gameActive) {
                        // 时间到，无人回答
                        gameActive = false;
                        
                        // 显示正确答案
                        const correctButtons = document.querySelectorAll(`[data-option="${currentAntonym}"]`);
                        correctButtons.forEach(btn => {
                            btn.classList.add('bg-green-100', 'border-2', 'border-green-500');
                        });
                        
                        // 给两个玩家都显示时间到提示
                        showAnswerToOtherPlayer('player1');
                        showAnswerToOtherPlayer('player2');
                        
                        // 延迟进入下一轮
                        setTimeout(() => {
                            round++;
                            nextRound();
                        }, 2000);
                    }
                }
            }, 1000);
        }
        
        // 更新分数显示
        function updateScores() {
            score1El.textContent = score1;
            score2El.textContent = score2;
        }
        
        // 结束游戏
        function endGame() {
            clearInterval(timerInterval);
            gameScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            // 显示最终分数
            finalScore1El.textContent = score1;
            finalScore2El.textContent = score2;
            
            // 显示获胜者
            if (score1 > score2) {
                winnerMessageEl.textContent = "玩家1获胜！太棒了！";
                winnerMessageEl.className = "text-xl font-bold mb-8 p-4 rounded-xl bg-player1/20 text-player1";
            } else if (score2 > score1) {
                winnerMessageEl.textContent = "玩家2获胜！太厉害了！";
                winnerMessageEl.className = "text-xl font-bold mb-8 p-4 rounded-xl bg-player2/20 text-player2";
            } else {
                winnerMessageEl.textContent = "平局！你们都很棒！";
                winnerMessageEl.className = "text-xl font-bold mb-8 p-4 rounded-xl bg-accent/20 text-text";
            }

            // 记录到学习中心（语文-反义词，对战模式按双方平均分记录）
            try {
                if (window.recordLearningProgress) {
                    const totalQuestions = (rounds || 0) * (pairsPerRound || 0);
                    const acc1 = Math.round((correct1 || 0) / Math.max(1, totalQuestions) * 100);
                    const acc2 = Math.round((correct2 || 0) / Math.max(1, totalQuestions) * 100);
                    const avgAcc = Math.round((acc1 + acc2) / 2);
                    const totalTime = totalQuestions * 10; // 每题约10秒
                    window.recordLearningProgress('chinese', 'antonyms', avgAcc, totalTime);
                }
            } catch (_) {}
        }
        
        // 打乱数组顺序的工具函数
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // 锁定旋转功能
        function toggleRotationLock() {
            isRotationLocked = !isRotationLocked;
            
            if (isRotationLocked) {
                // 锁定旋转
                lockIcon.className = 'fa fa-unlock text-green-600';
                lockText.textContent = '已锁定';
                lockText.className = 'ml-2 text-sm font-bold text-green-600';
                lockRotationBtn.className = 'bg-green-100/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-md transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-green-500';
                
                // 尝试锁定屏幕方向为竖屏
                if (screen.orientation && screen.orientation.lock) {
                    screen.orientation.lock('portrait').catch(err => {
                        console.log('无法锁定屏幕方向:', err);
                    });
                }
                
                // 显示锁定提示
                showLockNotification('屏幕旋转已锁定');
            } else {
                // 解锁旋转
                lockIcon.className = 'fa fa-lock text-gray-600';
                lockText.textContent = '锁定旋转';
                lockText.className = 'ml-2 text-sm font-bold text-gray-600';
                lockRotationBtn.className = 'bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-md transition-all duration-300 hover:scale-105 active:scale-95';
                
                // 尝试解锁屏幕方向
                if (screen.orientation && screen.orientation.unlock) {
                    screen.orientation.unlock();
                }
                
                // 显示解锁提示
                showLockNotification('屏幕旋转已解锁');
            }
        }
        
        // 显示锁定状态提示
        function showLockNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-full shadow-lg z-[9999] border-2 border-accent';
            notification.innerHTML = `
                <span class="text-sm font-bold text-accent">${message}</span>
            `;
            document.body.appendChild(notification);
            
            // 2秒后移除提示
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }
        
        // 切换布局模式
        function toggleLayout() {
            const layoutIcon = document.getElementById('layout-icon');
            const layoutText = document.getElementById('layout-text');
            
            // 切换布局状态
            if (layoutMode === 'desktop' || (layoutMode === 'auto' && !isCurrentlyMobile)) {
                // 切换到手机版
                layoutMode = 'mobile';
                isCurrentlyMobile = true;
                setupMobileLayout();
                layoutIcon.className = 'fa fa-desktop text-gray-600';
                layoutText.textContent = '桌面版';
                showLockNotification('已切换到手机版布局');
            } else {
                // 切换到桌面版
                layoutMode = 'desktop';
                isCurrentlyMobile = false;
                setupDesktopLayout();
                layoutIcon.className = 'fa fa-mobile text-gray-600';
                layoutText.textContent = '手机版';
                showLockNotification('已切换到桌面版布局');
            }
            
            // 重要：重新生成选项按钮以应用新的布局样式
            if (gameActive && currentWord && currentAntonym) {
                console.log('布局切换后重新生成选项按钮');
                generateOptions();
            }
        }
        
        // 设置桌面版布局
        function setupDesktopLayout() {
            console.log('开始应用桌面版布局...');
            
            // 1. 恢复第二个目标字卡片显示
            const secondCard = document.getElementById('second-target-card');
            if (secondCard) {
                secondCard.classList.remove('hidden');
                secondCard.style.cssText = `
                    transform: rotate(-90deg) !important;
                    display: block !important;
                `;
                console.log('桌面版：第二个目标字卡片已显示');
            }
            
            // 2. 恢复目标字卡片的旋转
            const targetWordEl = document.getElementById('target-word');
            const targetWord2El = document.getElementById('target-word-2');
            
            if (targetWordEl) {
                const parentCard = targetWordEl.closest('div');
                if (parentCard) {
                    parentCard.style.cssText = `
                        transform: rotate(90deg) !important;
                        display: block !important;
                        visibility: visible !important;
                    `;
                }
            }
            
            if (targetWord2El) {
                const parentCard = targetWord2El.closest('div');
                if (parentCard) {
                    parentCard.style.cssText = `
                        transform: rotate(-90deg) !important;
                        display: block !important;
                        visibility: visible !important;
                    `;
                }
            }
            
            // 3. 恢复玩家区域的旋转和原始布局
            const playerAreas = document.querySelectorAll('div[class*="w-1/3"][class*="bg-player"]');
            console.log('找到玩家区域数量:', playerAreas.length);
            
            playerAreas.forEach((area, index) => {
                if (index === 0) {
                    // 玩家1区域 - 90度顺时针旋转
                    area.style.cssText = `
                        transform: rotate(90deg) !important;
                        width: 33.333333% !important;
                        margin-right: 6rem !important;
                        transform-origin: center !important;
                        transform: rotate(90deg) translateX(-5rem) !important;
                        display: flex !important;
                        flex-direction: column !important;
                    `;
                } else {
                    // 玩家2区域 - 90度逆时针旋转
                    area.style.cssText = `
                        transform: rotate(-90deg) !important;
                        width: 33.333333% !important;
                        margin-left: 6rem !important;
                        transform-origin: center !important;
                        transform: rotate(-90deg) translateX(5rem) !important;
                        display: flex !important;
                        flex-direction: column !important;
                    `;
                }
                console.log(`玩家区域${index + 1}桌面版样式已恢复`);
            });
            
            // 4. 恢复中间目标字区域
            const whiteArea = document.querySelector('div[class*="w-1/3"][class*="bg-white"]');
            if (whiteArea) {
                whiteArea.style.cssText = `
                    width: 33.333333% !important;
                    display: flex !important;
                    flex-direction: column !important;
                    justify-content: center !important;
                    align-items: center !important;
                    padding: 1rem !important;
                `;
                
                // 显示所有旋转的目标字卡片
                const rotatedCards = whiteArea.querySelectorAll('div[class*="transform"]');
                rotatedCards.forEach(card => {
                    card.style.display = 'block !important';
                });
                
                console.log('目标字区域桌面版样式已恢复');
            }
            
            // 5. 恢复游戏容器的横向布局
            const gameContainer = document.querySelector('.flex-1.flex.overflow-hidden');
            if (gameContainer) {
                gameContainer.style.cssText = `
                    display: flex !important;
                    flex-direction: row !important;
                    align-items: center !important;
                    justify-content: center !important;
                    min-height: 100vh !important;
                `;
                console.log('游戏容器横向布局已恢复');
            }
            
            // 6. 确保选项容器使用桌面版网格样式
            if (optionsPlayer1 && optionsPlayer2) {
                const desktopContainerStyle = `
                    display: grid !important;
                    grid-template-columns: 1fr 1fr !important;
                    grid-template-rows: 1fr 1fr !important;
                    gap: 8px !important;
                    width: 300px !important;
                    height: 200px !important;
                    background: #f0f0f0 !important;
                    border: 2px solid #ccc !important;
                    padding: 10px !important;
                    margin: 10px auto !important;
                    box-sizing: border-box !important;
                `;
                optionsPlayer1.style.cssText = desktopContainerStyle;
                optionsPlayer2.style.cssText = desktopContainerStyle;
                console.log('选项容器桌面版网格样式已恢复');
            }
            
            console.log('✅ 桌面版布局已完全恢复');
        }
        

        

    </script>
</body>
</html>
