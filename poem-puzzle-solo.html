<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è¯—è¯æ‹¼å›¾ - å•äººé—¯å…³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script defer src="./wellness.js"></script>
    <!-- æ‹¼éŸ³åº“ï¼ˆæµè§ˆå™¨ç«¯ï¼‰ -->
    <script src="https://cdn.jsdelivr.net/npm/pinyin-pro@2.9.0/dist/index.min.js"></script>
    
    <!-- é…ç½®Tailwindè‡ªå®šä¹‰é¢œè‰²å’Œå­—ä½“ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#7C3AED',
                        secondary: '#EC4899',
                        accent: '#F59E0B',
                        danger: '#EF4444',
                        neutral: '#F7FFF7',
                        text: '#1F2937',
                        poem: '#6366F1'
                    },
                    fontFamily: {
                        kids: ['"Comic Sans MS"', '"Marker Felt"', 'Arial', 'sans-serif'],
                        poem: ['"KaiTi"', '"æ¥·ä½“"', '"STKaiti"', 'serif']
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .pinyin-text { color: #4B5563; font-size: 0.95rem; line-height: 1.1; margin-bottom: 2px; }
            .pinyin-title { color: #6B7280; font-size: 0.9rem; margin-top: 0.25rem; }
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            }
            .bounce-light {
                animation: bounce-light 0.5s ease infinite alternate;
            }
            .float-animation {
                animation: float 3s ease-in-out infinite;
            }
            .puzzle-piece {
                transition: all 0.3s ease;
                cursor: grab;
            }
            .puzzle-piece:active {
                cursor: grabbing;
                transform: scale(1.05);
                z-index: 1000;
            }
            .puzzle-piece.dragging {
                opacity: 0.8;
                transform: rotate(5deg) scale(1.1);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            .drop-zone {
                transition: all 0.3s ease;
                border: 2px dashed transparent;
            }
            .drop-zone.drag-over {
                border-color: #7C3AED;
                background-color: rgba(124, 58, 237, 0.1);
                transform: scale(1.02);
            }
            .drop-zone.correct {
                background: linear-gradient(135deg, #D1FAE5, #A7F3D0);
                border-color: #10B981;
                animation: correct-glow 0.6s ease;
            }
            .poem-complete {
                animation: poem-complete 1s ease-in-out;
            }
            .level-complete {
                animation: level-complete 1s ease-in-out;
            }
            @keyframes bounce-light {
                from { transform: translateY(0); }
                to { transform: translateY(-5px); }
            }
            @keyframes float {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
            }
            @keyframes correct-glow {
                0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
                50% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0.1); }
                100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
            }
            @keyframes poem-complete {
                0% { transform: scale(1); }
                25% { transform: scale(1.05); }
                75% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
            @keyframes level-complete {
                0% { transform: scale(1) rotate(0deg); }
                25% { transform: scale(1.1) rotate(2deg); }
                75% { transform: scale(1.1) rotate(-2deg); }
                100% { transform: scale(1) rotate(0deg); }
            }
            
            /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
            @media (max-width: 768px) {
                .puzzle-piece {
                    min-height: 60px;
                    touch-action: none;
                }
                .drop-zone {
                    min-height: 80px;
                    touch-action: none;
                }
                .float-animation {
                    animation: none;
                }
            }
            
            @media (max-width: 480px) {
                .puzzle-piece {
                    font-size: 0.9rem;
                    padding: 12px;
                }
                .drop-zone {
                    padding: 16px;
                    font-size: 0.9rem;
                }
            }
            
            /* æ’’èŠ±åº†ç¥åŠ¨ç”» */
            .celebration-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                pointer-events: none;
                z-index: 9999;
                overflow: hidden;
            }
            
            .confetti {
                position: absolute;
                width: 12px;
                height: 12px;
                border-radius: 50%;
                animation: confetti-fall 2s ease-out forwards;
            }
            
            .star-confetti {
                font-size: 20px;
                animation: star-fall 2.5s ease-out forwards;
            }
            
            @keyframes confetti-fall {
                0% {
                    transform: translateY(-100vh) rotate(0deg);
                    opacity: 1;
                }
                100% {
                    transform: translateY(100vh) rotate(720deg);
                    opacity: 0;
                }
            }
            
            @keyframes star-fall {
                0% {
                    transform: translateY(-100vh) rotate(0deg) scale(0);
                    opacity: 1;
                }
                50% {
                    transform: translateY(50vh) rotate(180deg) scale(1.2);
                    opacity: 1;
                }
                100% {
                    transform: translateY(100vh) rotate(360deg) scale(0);
                    opacity: 0;
                }
            }
            
            .celebration-text {
                position: absolute;
                top: 25%;
                left: 20%;
                transform: translateX(-50%);
                font-size: 2.2rem;
                font-weight: bold;
                color: #7C3AED;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                animation: celebration-bounce 1s ease-out;
                pointer-events: none;
                z-index: 10000;
            }
            
            @keyframes celebration-bounce {
                0% { transform: translateX(-50%) scale(0) rotate(-10deg); opacity: 0; }
                50% { transform: translateX(-50%) scale(1.3) rotate(5deg); opacity: 1; }
                100% { transform: translateX(-50%) scale(1) rotate(0deg); opacity: 1; }
            }
            
            /* å®Œæ•´è¯—è¯æ˜¾ç¤ºåŠ¨ç”» */
            .poem-reveal {
                animation: poem-reveal 1.5s ease-out forwards;
            }
            
            @keyframes poem-reveal {
                0% {
                    opacity: 0;
                    transform: translateY(-20px) scale(0.9);
                }
                50% {
                    opacity: 0.7;
                    transform: translateY(-5px) scale(1.05);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }
            
            .poem-line-appear {
                opacity: 0;
                transform: translateX(-30px);
                animation: poem-line-appear 0.8s ease-out forwards;
            }
            
            @keyframes poem-line-appear {
                0% {
                    opacity: 0;
                    transform: translateX(-30px);
                }
                100% {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-100 min-h-screen font-kids text-text">
    
    <!-- å¼€å§‹ç•Œé¢ -->
    <div id="start-screen" class="flex flex-col items-center justify-center min-h-screen p-8 relative">
        <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
        <button onclick="window.location.href='index.html'" class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg transition-all duration-300 hover:scale-105 active:scale-95 text-sm font-bold text-gray-600 hover:text-gray-800 z-40">
            <i class="fa fa-home mr-2"></i>é¦–é¡µ
        </button>
        <div class="text-center w-full max-w-sm mx-auto bg-white rounded-3xl shadow-2xl p-6 transform transition-all duration-500">
            <h1 class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary mb-3">è¯—è¯æ‹¼å›¾</h1>
            <p class="text-sm mb-3 text-gray-600">å•äººé—¯å…³æ¨¡å¼<br>é‡ç»„ç»å…¸è¯—è¯ï¼</p>
            
            <div class="flex justify-center mb-6">
                <div class="w-20 h-20 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-white text-3xl shadow-lg relative overflow-hidden float-animation">
                    <i class="fa fa-book"></i>
                    <div class="absolute inset-0 bg-white opacity-20 rounded-full animate-ping"></div>
                </div>
            </div>
            
            <!-- è¯—è¯ç±»å‹é€‰æ‹© -->
            <div class="mb-4">
                <h3 class="text-sm font-bold mb-2">é€‰æ‹©ç±»å‹</h3>
                <div class="flex justify-center gap-3">
                    <button class="poetry-type-btn active" data-type="poem">
                        <span class="text-xs">ğŸ“œ å¤ä»£è¯—</span>
                    </button>
                    <button class="poetry-type-btn" data-type="ci">
                        <span class="text-xs">ğŸŒ¸ å¤ä»£è¯</span>
                    </button>
                    <button class="poetry-type-btn" data-type="modern">
                        <span class="text-xs">âœ¨ ç°ä»£</span>
                    </button>
                </div>
            </div>
            
            <!-- éš¾åº¦é€‰æ‹© -->
            <div class="mb-4">
                <h3 class="text-sm font-bold mb-2">é€‰æ‹©éš¾åº¦</h3>
                <div class="flex justify-center gap-3">
                    <button class="difficulty-btn active" data-difficulty="easy">
                        <span class="text-base">ğŸ˜Š ç®€å•</span>
                        <span class="text-[11px]">4å¥è¯—</span>
                    </button>
                    <button class="difficulty-btn" data-difficulty="medium">
                        <span class="text-base">ğŸ¤” ä¸­ç­‰</span>
                        <span class="text-[11px]">6-8å¥</span>
                    </button>
                    <button class="difficulty-btn" data-difficulty="hard">
                        <span class="text-base">ğŸ”¥ å›°éš¾</span>
                        <span class="text-[11px]">é•¿è¯—è¯</span>
                    </button>
                </div>
            </div>
            
            <!-- å€’è®¡æ—¶å¼€å…³ -->
            <div class="mb-4 flex items-center justify-center gap-3 bg-gray-50 rounded-2xl p-3">
                <i class="fa fa-clock-o text-gray-600"></i>
                <span class="text-gray-700 font-medium text-sm">å€’è®¡æ—¶æ¨¡å¼</span>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="timer-toggle" class="sr-only peer" checked>
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                </label>
                <span class="text-xs text-gray-500" id="timer-description">æ ¹æ®éš¾åº¦é™æ—¶</span>
            </div>

            <!-- å¾½ç« é¢„è§ˆ -->
            <div id="badge-preview" class="mb-4">
                <h3 class="text-sm font-bold mb-2">æˆ‘çš„å¾½ç« </h3>
                <div id="badge-preview-grid" class="flex justify-center gap-3 flex-wrap"></div>
                
            </div>
            
            <button id="start-btn" class="bg-accent hover:bg-yellow-400 text-white font-bold py-3 px-6 rounded-full text-base shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                å¼€å§‹æ‹¼å›¾ <i class="fa fa-play ml-2"></i>
            </button>
            
            <div class="mt-3 text-[11px] text-gray-500">
                <p>é€‚åˆå¹´é¾„ï¼š8-16å²</p>
                <p>ç›®æ ‡ï¼šæ­£ç¡®æ‹¼æ¥è¯—è¯è·å¾—é«˜åˆ†ï¼</p>
            </div>
        </div>
        
        <!-- è£…é¥°å…ƒç´  -->
        <div class="absolute top-10 left-10 text-5xl text-primary/30">
            <i class="fa fa-star bounce-light"></i>
        </div>
        <div class="absolute bottom-10 right-10 text-5xl text-secondary/30">
            <i class="fa fa-heart bounce-light" style="animation-delay: 0.3s"></i>
        </div>
        <div class="absolute top-1/4 right-20 text-4xl text-accent/30">
            <i class="fa fa-trophy bounce-light" style="animation-delay: 0.6s"></i>
        </div>
    </div>

    <!-- æ¸¸æˆç•Œé¢ -->
    <div id="game-screen" class="hidden h-screen flex flex-col">
        <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
        <div class="flex justify-between items-center p-4 bg-white/80 backdrop-blur-sm shadow-md">
            <!-- å·¦ä¾§ä¿¡æ¯ -->
            <div class="flex items-center gap-3">
                <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
                <button onclick="window.location.href='index.html'" class="bg-white/90 backdrop-blur-sm px-3 py-2 rounded-full shadow-md transition-all duration-300 hover:scale-105 active:scale-95 text-sm font-bold text-gray-600 hover:text-gray-800">
                    <i class="fa fa-home mr-1"></i><span class="hidden sm:inline">é¦–é¡µ</span>
                </button>
                <div class="bg-primary px-4 py-2 rounded-full text-white font-bold shadow-md">
                    <span>å…³å¡ </span><span id="level-display">1</span>
                </div>
                <div class="bg-secondary px-4 py-2 rounded-full text-white font-bold shadow-md">
                    <span>è¿å‡» </span><span id="combo-display">0</span>
                </div>
            </div>
            
            <!-- ä¸­é—´è®¡æ—¶å™¨ -->
            <div id="timer" class="bg-accent text-white px-6 py-3 rounded-full shadow-md">
                <i class="fa fa-clock-o mr-2"></i>
                <span class="text-base font-medium mr-2">å€’è®¡æ—¶</span>
                <span id="countdown" class="text-3xl font-bold">180</span>
            </div>
            
            <!-- å³ä¾§åˆ†æ•° -->
            <div class="bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 rounded-full text-white font-bold shadow-md">
                <i class="fa fa-star mr-2"></i>
                <span id="score-display">0</span>
            </div>
        </div>
        
        <!-- è¿›åº¦æ¡ -->
        <div class="bg-gray-200 h-2">
            <div id="progress-bar" class="bg-gradient-to-r from-primary to-secondary h-full transition-all duration-300" style="width: 0%"></div>
        </div>
        
        <!-- ä¸»è¦æ¸¸æˆåŒºåŸŸ -->
        <div class="flex-1 flex flex-col justify-start items-center p-4 overflow-y-auto">
            <!-- è¯—è¯ä¿¡æ¯ -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 text-center max-w-2xl w-full">
                <h2 id="poem-title" class="text-2xl font-bold font-poem text-poem mb-1">é™å¤œæ€</h2>
                <div id="poem-title-pinyin" class="pinyin-title"></div>
                <p id="poem-author" class="text-gray-600 font-poem mt-1">æç™½</p>
                <p id="poem-hint" class="text-sm text-gray-500 mt-2">å°†è¯—å¥æ‹–æ‹½åˆ°æ­£ç¡®çš„ä½ç½®</p>
                
                <!-- å®Œæˆåæ˜¾ç¤ºçš„å®Œæ•´è¯—è¯ -->
                <div id="completed-poem" class="hidden mt-6 p-8 bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl border-2 border-amber-200 shadow-lg">
                    <div id="complete-poem-content" class="font-poem text-xl text-gray-800 leading-loose text-center space-y-3">
                        <!-- å®Œæ•´è¯—è¯å†…å®¹ä¼šåœ¨è¿™é‡Œæ˜¾ç¤º -->
                    </div>
                </div>
                
                <!-- ç»§ç»­æŒ‰é’® - ç‹¬ç«‹åœ¨è¯—è¯å¡ç‰‡å¤– -->
                <div id="continue-btn-container" class="hidden mt-6 flex justify-center">
                    <button id="continue-btn" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                        ç»§ç»­ä¸‹ä¸€é¦– <i class="fa fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <!-- æ‹¼å›¾åŒºåŸŸ -->
            <div class="flex flex-col lg:flex-row gap-8 w-full max-w-6xl mb-20">
                <!-- å·¦ä¾§ï¼šè¯—å¥æ‹¼å›¾ç‰‡ -->
                <div class="flex-1">
                    <h3 class="text-lg font-bold mb-4 text-center">è¯—å¥ç¢ç‰‡</h3>
                    <div id="puzzle-pieces" class="grid grid-cols-2 gap-4 auto-rows-min">
                        <!-- æ‹¼å›¾ç‰‡ä¼šåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- å³ä¾§ï¼šæ‹¼å›¾ç›®æ ‡åŒºåŸŸ -->
                <div class="flex-1">
                    <h3 class="text-lg font-bold mb-4 text-center">è¯—è¯æ‹¼å›¾</h3>
                    <div id="drop-zones" class="space-y-4">
                        <!-- æ‹–æ”¾åŒºåŸŸä¼šåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <!-- æ“ä½œæŒ‰é’® - å›ºå®šåœ¨å³ä¸‹è§’ -->
            <div class="fixed bottom-6 right-6 flex flex-col gap-3 z-50">
                <button id="hint-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-full font-bold shadow-lg transition-all duration-300 hover:scale-105">
                    <i class="fa fa-lightbulb-o"></i>
                </button>
                <button id="reset-btn" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 rounded-full font-bold shadow-lg transition-all duration-300 hover:scale-105">
                    <i class="fa fa-refresh"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- ç»“æœç•Œé¢ -->
    <div id="result-screen" class="hidden flex flex-col items-center justify-center h-screen p-6 bg-white/90 backdrop-blur-md">
        <div class="text-center max-w-lg mx-auto">
            <div id="result-icon" class="text-8xl mb-6">ğŸ‰</div>
            <h2 id="result-title" class="text-[clamp(2rem,5vw,3rem)] font-bold mb-6">è¯—è¯å¤§å¸ˆï¼</h2>
            
            <div class="bg-neutral rounded-2xl shadow-lg p-8 mb-8">
                <div class="grid grid-cols-2 gap-6">
                    <div class="text-center">
                        <div class="text-primary text-3xl font-bold" id="final-score">0</div>
                        <div class="text-gray-600">æ€»åˆ†æ•°</div>
                    </div>
                    <div class="text-center">
                        <div class="text-secondary text-3xl font-bold" id="final-level">1</div>
                        <div class="text-gray-600">åˆ°è¾¾å…³å¡</div>
                    </div>
                    <div class="text-center">
                        <div class="text-accent text-3xl font-bold" id="final-accuracy">0%</div>
                        <div class="text-gray-600">å®Œæˆç‡</div>
                    </div>
                    <div class="text-center">
                        <div class="text-purple-500 text-3xl font-bold" id="poems-completed">0</div>
                        <div class="text-gray-600">å®Œæˆè¯—è¯</div>
                    </div>
                </div>
            </div>
            
            <!-- æˆå°±æ˜¾ç¤º -->
            <div id="achievements" class="mb-8">
                <!-- æˆå°±å¾½ç« ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="flex gap-4 justify-center">
                <button id="restart-btn" class="bg-primary hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                    å†æ¥ä¸€æ¬¡ <i class="fa fa-refresh ml-2"></i>
                </button>
                <button id="home-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                    è¿”å›é¦–é¡µ <i class="fa fa-home ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // è¯—è¯æ•°æ®åº“ - æŒ‰ç±»å‹å’Œéš¾åº¦åˆ†çº§ï¼ˆå°å­¦1-6å¹´çº§å¿…ä¿®å¤è¯—è¯ï¼‰
        // æ‹¼éŸ³å·¥å…·
        function isPinyinReady(){ return !!(window.pinyinPro && window.pinyinPro.pinyin); }
        function ensurePinyinReady(onReady){
            if (isPinyinReady()) { onReady && onReady(); return; }
            // åŠ¨æ€åŠ è½½ä¸€æ¬¡
            if (!document.getElementById('pinyin-lib')){
                const s = document.createElement('script');
                s.src = 'https://cdn.jsdelivr.net/npm/pinyin-pro@2.9.0/dist/index.min.js';
                s.id = 'pinyin-lib';
                s.onload = () => { onReady && onReady(); };
                s.onerror = () => {
                    console.warn('pinyin åº“åŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æº');
                    const s2 = document.createElement('script');
                    s2.src = 'https://unpkg.com/pinyin-pro@2.9.0/dist/index.min.js';
                    s2.id = 'pinyin-lib-2';
                    s2.onload = () => { onReady && onReady(); };
                    s2.onerror = () => { console.warn('å¤‡ç”¨æºä¹Ÿå¤±è´¥'); };
                    document.head.appendChild(s2);
                };
                document.head.appendChild(s);
            } else {
                setTimeout(()=>{ if(isPinyinReady()) onReady && onReady(); }, 300);
            }
        }
        // æœ¬åœ°å¸¸è§è¯—è¯æ‹¼éŸ³å…œåº•ï¼ˆç¤ºä¾‹è¦†ç›–ï¼šå°æ± ã€æ±Ÿå—æ˜¥ï¼‰+ è¿è¡Œæ—¶ç¼“å­˜
        const PINYIN_CACHE_KEY = 'poemPinyinCacheV1';
        function loadPinyinCache(){
            try{ return JSON.parse(localStorage.getItem(PINYIN_CACHE_KEY) || '{}'); }catch(_){ return {}; }
        }
        function savePinyinCache(cache){
            try{ localStorage.setItem(PINYIN_CACHE_KEY, JSON.stringify(cache)); }catch(_){ }
        }
        let poemPinyinDB = {
            'å°æ± ': {
                title: 'xiÇo chÃ­',
                lines: ['quÃ¡n yÇn wÃº shÄ“ng xÄ« xÃ¬ liÃº','shÃ¹ yÄ«n zhÃ o shuÇ Ã i qÃ­ng rÃ³u','xiÇo hÃ© cÃ¡i lÃ¹ jiÄn jiÄn jiÇo','zÇo yÇ’u qÄ«ng tÃ­ng lÃ¬ shÃ ng tÃ³u']
            },
            'æ±Ÿå—æ˜¥': {
                title: 'jiÄng nÃ¡n chÅ«n',
                lines: ['qiÄn lÇ yÄ«ng tÃ­ lÇœ yÃ¬ng hÃ³ng','shuÇ cÅ«n shÄn guÇ’ jiÇ” qÄ« fÄ“ng','nÃ¡n chÃ¡o sÃ¬ bÇi bÄ shÃ­ sÃ¬','duÅ shÇo lÃ³u tÃ¡i yÄn yÇ” zhÅng']
            }
        };
        // åˆå¹¶æŒä¹…åŒ–ç¼“å­˜
        (function mergeCache(){
            const cache = loadPinyinCache();
            Object.keys(cache).forEach(title => { poemPinyinDB[title] = cache[title]; });
        })();
        function getPinyin(text){
            try{ return isPinyinReady() ? window.pinyinPro.pinyin(text, {toneType:'symbol', type:'array'}).join(' ') : ''; }
            catch(_){ return ''; }
        }

        // å…¨é‡é¢„è®¡ç®—å¹¶ç¼“å­˜ï¼šä¸ºæ¯é¦–è¯—ç”Ÿæˆæ‹¼éŸ³ï¼ˆä»…åœ¨æ‹¼éŸ³åº“å°±ç»ªæ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæœ‰ç½‘æ—¶ç”Ÿæˆï¼Œä¹‹åç¦»çº¿ä½¿ç”¨ï¼‰
        function precomputeAllPoemPinyin(){
            if (!isPinyinReady()) return;
            const cache = loadPinyinCache();
            const types = Object.keys(poemDatabase);
            types.forEach(t => {
                const diffs = Object.keys(poemDatabase[t]);
                diffs.forEach(d => {
                    poemDatabase[t][d].forEach(p => {
                        const title = p.title;
                        if (!cache[title]) cache[title] = { title: '', lines: [] };
                        if (!cache[title].title) cache[title].title = getPinyin(title);
                        if ((!cache[title].lines || cache[title].lines.length === 0) && Array.isArray(p.lines)){
                            cache[title].lines = p.lines.map(l => getPinyin(l));
                        }
                    });
                });
            });
            savePinyinCache(cache);
            // åˆå¹¶åˆ°è¿è¡Œæ—¶DB
            Object.keys(cache).forEach(title => { poemPinyinDB[title] = cache[title]; });
        }
        const poemDatabase = {
            poem: {
                easy: [
                    {
                        title: "é™å¤œæ€",
                        author: "æç™½",
                        lines: ["åºŠå‰æ˜æœˆå…‰", "ç–‘æ˜¯åœ°ä¸Šéœœ", "ä¸¾å¤´æœ›æ˜æœˆ", "ä½å¤´æ€æ•…ä¹¡"],
                        pinyinTitle: "jÃ¬ng yÃ¨ sÄ«",
                        pinyins: [
                            "chuÃ¡ng qiÃ¡n mÃ­ng yuÃ¨ guÄng",
                            "yÃ­ shÃ¬ dÃ¬ shÃ ng shuÄng",
                            "jÇ” tÃ³u wÃ ng mÃ­ng yuÃ¨",
                            "dÄ« tÃ³u sÄ« gÃ¹ xiÄng"
                        ],
                        description: "æç™½çš„ç»å…¸æ€ä¹¡è¯—"
                    },
                    {
                        title: "æ˜¥æ™“",
                        author: "å­Ÿæµ©ç„¶",
                        lines: ["æ˜¥çœ ä¸è§‰æ™“", "å¤„å¤„é—»å•¼é¸Ÿ", "å¤œæ¥é£é›¨å£°", "èŠ±è½çŸ¥å¤šå°‘"],
                        pinyinTitle: "chÅ«n xiÇo",
                        pinyins: [
                            "chÅ«n miÃ¡n bÃ¹ juÃ© xiÇo",
                            "chÃ¹ chÃ¹ wÃ©n tÃ­ niÇo",
                            "yÃ¨ lÃ¡i fÄ“ng yÇ” shÄ“ng",
                            "huÄ luÃ² zhÄ« duÅ shÇo"
                        ],
                        description: "å­Ÿæµ©ç„¶çš„æ˜¥æ—¥æ¸…æ™¨"
                    },
                    {
                        title: "ç™»é¹³é›€æ¥¼",
                        author: "ç‹ä¹‹æ¶£",
                        lines: ["ç™½æ—¥ä¾å±±å°½", "é»„æ²³å…¥æµ·æµ", "æ¬²ç©·åƒé‡Œç›®", "æ›´ä¸Šä¸€å±‚æ¥¼"],
                        pinyinTitle: "dÄ“ng guÃ n quÃ¨ lÃ³u",
                        pinyins: [
                            "bÃ¡i rÃ¬ yÄ« shÄn jÃ¬n",
                            "huÃ¡ng hÃ© rÃ¹ hÇi liÃº",
                            "yÃ¹ qiÃ³ng qiÄn lÇ mÃ¹",
                            "gÃ¨ng shÃ ng yÃ¬ cÃ©ng lÃ³u"
                        ],
                        description: "ç‹ä¹‹æ¶£çš„å£®å¿—è¯—"
                    },
                    {
                        title: "å’é¹…",
                        author: "éª†å®¾ç‹",
                        lines: ["é¹…ï¼Œé¹…ï¼Œé¹…", "æ›²é¡¹å‘å¤©æ­Œ", "ç™½æ¯›æµ®ç»¿æ°´", "çº¢æŒæ‹¨æ¸…æ³¢"],
                        pinyinTitle: "yÇ’ng Ã©",
                        pinyins: [
                            "Ã©ï¼ŒÃ©ï¼ŒÃ©",
                            "qÇ” xiÃ ng xiÃ ng tiÄn gÄ“",
                            "bÃ¡i mÃ¡o fÃº lÇœ shuÇ",
                            "hÃ³ng zhÇng bÅ qÄ«ng bÅ"
                        ],
                        description: "éª†å®¾ç‹ä¸ƒå²æ—¶çš„å’ç‰©è¯—"
                    },
                    {
                        title: "æ‚¯å†œ",
                        author: "æç»…",
                        lines: ["é”„ç¦¾æ—¥å½“åˆ", "æ±—æ»´ç¦¾ä¸‹åœŸ", "è°çŸ¥ç›˜ä¸­é¤", "ç²’ç²’çš†è¾›è‹¦"],
                        pinyinTitle: "mÇn nÃ³ng",
                        pinyins: [
                            "chÃº hÃ© rÃ¬ dÄng wÇ”",
                            "hÃ n dÄ« hÃ© xiÃ  tÇ”",
                            "shuÃ­ zhÄ« pÃ¡n zhÅng cÄn",
                            "lÃ¬ lÃ¬ jiÄ“ xÄ«n kÇ”"
                        ],
                        description: "æç»…çš„æ‚¯å†œè¯—"
                    },
                    {
                        title: "é£",
                        author: "æå³¤",
                        lines: ["è§£è½ä¸‰ç§‹å¶", "èƒ½å¼€äºŒæœˆèŠ±", "è¿‡æ±Ÿåƒå°ºæµª", "å…¥ç«¹ä¸‡ç«¿æ–œ"],
                        pinyinTitle: "fÄ“ng",
                        pinyins: [
                            "jiÄ› luÃ² sÄn qiÅ« yÃ¨",
                            "nÃ©ng kÄi Ã¨r yuÃ¨ huÄ",
                            "guÃ² jiÄng qiÄn chÇ lÃ ng",
                            "rÃ¹ zhÃº wÃ n gÄn xiÃ©"
                        ],
                        description: "æå³¤çš„å’é£è¯—"
                    },
                    {
                        title: "å°æ± ",
                        author: "æ¨ä¸‡é‡Œ",
                        lines: ["æ³‰çœ¼æ— å£°æƒœç»†æµ", "æ ‘é˜´ç…§æ°´çˆ±æ™´æŸ”", "å°è·æ‰éœ²å°–å°–è§’", "æ—©æœ‰èœ»èœ“ç«‹ä¸Šå¤´"],
                        pinyinTitle: "xiÇo chÃ­",
                        pinyins: [
                            "quÃ¡n yÇn wÃº shÄ“ng xÄ« xÃ¬ liÃº",
                            "shÃ¹ yÄ«n zhÃ o shuÇ Ã i qÃ­ng rÃ³u",
                            "xiÇo hÃ© cÃ¡i lÃ¹ jiÄn jiÄn jiÇo",
                            "zÇo yÇ’u qÄ«ng tÃ­ng lÃ¬ shÃ ng tÃ³u"
                        ],
                        description: "æ¨ä¸‡é‡Œçš„å¤æ—¥å°æ™¯"
                    },
                    {
                        title: "æ¢…èŠ±",
                        author: "ç‹å®‰çŸ³",
                        lines: ["å¢™è§’æ•°ææ¢…", "å‡Œå¯’ç‹¬è‡ªå¼€", "é¥çŸ¥ä¸æ˜¯é›ª", "ä¸ºæœ‰æš—é¦™æ¥"],
                        pinyinTitle: "mÃ©i huÄ",
                        pinyins: [
                            "qiÃ¡ng jiÇo shÃ¹ zhÄ« mÃ©i",
                            "lÃ­ng hÃ¡n dÃº zÃ¬ kÄi",
                            "yÃ¡o zhÄ« bÃº shÃ¬ xuÄ›",
                            "wÃ¨i yÇ’u Ã n xiÄng lÃ¡i"
                        ],
                        description: "ç‹å®‰çŸ³çš„å’æ¢…è¯—"
                    },
                    {
                        title: "æ±Ÿé›ª",
                        author: "æŸ³å®—å…ƒ",
                        lines: ["åƒå±±é¸Ÿé£ç»", "ä¸‡å¾„äººè¸ªç­", "å­¤èˆŸè“‘ç¬ ç¿", "ç‹¬é’“å¯’æ±Ÿé›ª"],
                        pinyinTitle: "jiÄng xuÄ›",
                        pinyins: [
                            "qiÄn shÄn niÇo fÄ“i juÃ©",
                            "wÃ n jÃ¬ng rÃ©n zÅng miÃ¨",
                            "gÅ« zhÅu suÅ lÃ¬ wÄ“ng",
                            "dÃº diÃ o hÃ¡n jiÄng xuÄ›"
                        ],
                        description: "æŸ³å®—å…ƒçš„é›ªæ™¯è¯—"
                    },
                    {
                        title: "å±±è¡Œ",
                        author: "æœç‰§",
                        lines: ["è¿œä¸Šå¯’å±±çŸ³å¾„æ–œ", "ç™½äº‘ç”Ÿå¤„æœ‰äººå®¶", "åœè½¦åçˆ±æ«æ—æ™š", "éœœå¶çº¢äºäºŒæœˆèŠ±"],
                        pinyinTitle: "shÄn xÃ­ng",
                        pinyins: [
                            "yuÇn shÃ ng hÃ¡n shÄn shÃ­ jÃ¬ng xiÃ©",
                            "bÃ¡i yÃºn shÄ“ng chÃ¹ yÇ’u rÃ©n jiÄ",
                            "tÃ­ng chÄ“ zuÃ² Ã i fÄ“ng lÃ­n wÇn",
                            "shuÄng yÃ¨ hÃ³ng yÃº Ã¨r yuÃ¨ huÄ"
                        ],
                        description: "æœç‰§çš„ç§‹å±±è¯—"
                    },
                    {
                        title: "æ¸…æ˜",
                        author: "æœç‰§",
                        lines: ["æ¸…æ˜æ—¶èŠ‚é›¨çº·çº·", "è·¯ä¸Šè¡Œäººæ¬²æ–­é­‚", "å€Ÿé—®é…’å®¶ä½•å¤„æœ‰", "ç‰§ç«¥é¥æŒ‡æèŠ±æ‘"],
                        pinyinTitle: "qÄ«ng mÃ­ng",
                        pinyins: [
                            "qÄ«ng mÃ­ng shÃ­ jiÃ© yÇ” fÄ“n fÄ“n",
                            "lÃ¹ shÃ ng xÃ­ng rÃ©n yÃ¹ duÃ n hÃºn",
                            "jiÃ¨ wÃ¨n jiÇ” jiÄ hÃ© chÃ¹ yÇ’u",
                            "mÃ¹ tÃ³ng yÃ¡o zhÇ xÃ¬ng huÄ cÅ«n"
                        ],
                        description: "æœç‰§çš„æ¸…æ˜è¯—"
                    },
                    {
                        title: "ç»å¥",
                        author: "æœç”«",
                        lines: ["ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³", "ä¸€è¡Œç™½é¹­ä¸Šé’å¤©", "çª—å«è¥¿å²­åƒç§‹é›ª", "é—¨æ³Šä¸œå´ä¸‡é‡Œèˆ¹"],
                        pinyinTitle: "juÃ© jÃ¹",
                        pinyins: [
                            "liÇng gÃ¨ huÃ¡ng lÃ­ mÃ­ng cuÃ¬ liÇ”",
                            "yÃ¬ hÃ¡ng bÃ¡i lÃ¹ shÃ ng qÄ«ng tiÄn",
                            "chuÄng hÃ¡n xÄ« lÇng qiÄn qiÅ« xuÄ›",
                            "mÃ©n bÃ³ dÅng wÃº wÃ n lÇ chuÃ¡n"
                        ],
                        description: "æœç”«çš„æ˜¥æ—¥è¯—"
                    },
                    {
                        title: "çŸ³ç°åŸ",
                        author: "äºè°¦",
                        lines: ["åƒé”¤ä¸‡å‡¿å‡ºæ·±å±±", "çƒˆç«ç„šçƒ§è‹¥ç­‰é—²", "ç²‰èº«ç¢éª¨æµ‘ä¸æ€•", "è¦ç•™æ¸…ç™½åœ¨äººé—´"],
                        pinyinTitle: "shÃ­ huÄ« yÃ­n",
                        pinyins: [
                            "qiÄn chuÃ­ wÃ n zÃ¡o chÅ« shÄ“n shÄn",
                            "liÃ¨ huÇ’ fÃ©n shÄo ruÃ² dÄ›ng xiÃ¡n",
                            "fÄ›n shÄ“n suÃ¬ gÇ” hÃºn bÃº pÃ ",
                            "yÃ o liÃº qÄ«ng bÃ¡i zÃ i rÃ©n jiÄn"
                        ],
                        description: "äºè°¦çš„åŠ±å¿—è¯—"
                    },
                    {
                        title: "ç«¹çŸ³",
                        author: "éƒ‘ç‡®",
                        lines: ["å’¬å®šé’å±±ä¸æ”¾æ¾", "ç«‹æ ¹åŸåœ¨ç ´å²©ä¸­", "åƒç£¨ä¸‡å‡»è¿˜åšåŠ²", "ä»»å°”ä¸œè¥¿å—åŒ—é£"],
                        pinyinTitle: "zhÃº shÃ­",
                        pinyins: [
                            "yÇo dÃ¬ng qÄ«ng shÄn bÃº fÃ ng sÅng",
                            "lÃ¬ gÄ“n yuÃ¡n zÃ i pÃ² yÃ¡n zhÅng",
                            "qiÄn mÃ³ wÃ n jÄ« hÃ¡i jiÄn jÃ¬n",
                            "rÃ¨n Ä›r dÅng xÄ« nÃ¡n bÄ›i fÄ“ng"
                        ],
                        description: "éƒ‘ç‡®çš„å’ç«¹è¯—"
                    }
                ],
                medium: [
                    {
                        title: "èµ æ±ªä¼¦",
                        author: "æç™½",
                        lines: ["æç™½ä¹˜èˆŸå°†æ¬²è¡Œ", "å¿½é—»å²¸ä¸Šè¸æ­Œå£°", "æ¡ƒèŠ±æ½­æ°´æ·±åƒå°º", "ä¸åŠæ±ªä¼¦é€æˆ‘æƒ…"],
                        pinyinTitle: "zÃ¨ng wÄng lÃºn",
                        pinyins: [
                            "lÇ bÃ¡i chÃ©ng zhÅu jiÄng yÃ¹ xÃ­ng",
                            "hÅ« wÃ©n Ã n shÃ ng tÃ  gÄ“ shÄ“ng",
                            "tÃ¡o huÄ tÃ¡n shuÇ shÄ“n qiÄn chÇ",
                            "bÃ¹ jÃ­ wÄng lÃºn sÃ²ng wÇ’ qÃ­ng"
                        ],
                        description: "æç™½çš„å‹æƒ…è¯—"
                    },
                    {
                        title: "æœ›åºå±±ç€‘å¸ƒ",
                        author: "æç™½",
                        lines: ["æ—¥ç…§é¦™ç‚‰ç”Ÿç´«çƒŸ", "é¥çœ‹ç€‘å¸ƒæŒ‚å‰å·", "é£æµç›´ä¸‹ä¸‰åƒå°º", "ç–‘æ˜¯é“¶æ²³è½ä¹å¤©"],
                        pinyinTitle: "wÃ ng lÃº shÄn pÃ¹ bÃ¹",
                        pinyins: [
                            "rÃ¬ zhÃ o xiÄng lÃº shÄ“ng zÇ yÄn",
                            "yÃ¡o kÃ n pÃ¹ bÃ¹ guÃ  qiÃ¡n chuÄn",
                            "fÄ“i liÃº zhÃ­ xiÃ  sÄn qiÄn chÇ",
                            "yÃ­ shÃ¬ yÃ­n hÃ© luÃ² jiÇ” tiÄn"
                        ],
                        description: "æç™½çš„ç€‘å¸ƒå¥‡è§‚"
                    },
                    {
                        title: "æ—©å‘ç™½å¸åŸ",
                        author: "æç™½",
                        lines: ["æœè¾ç™½å¸å½©äº‘é—´", "åƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜", "ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½", "è½»èˆŸå·²è¿‡ä¸‡é‡å±±"],
                        pinyinTitle: "zÇo fÄ bÃ¡i dÃ¬ chÃ©ng",
                        pinyins: [
                            "zhÄo cÃ­ bÃ¡i dÃ¬ cÇi yÃºn jiÄn",
                            "qiÄn lÇ jiÄng lÃ­ng yÄ« rÃ¬ huÃ¡n",
                            "liÇng Ã n yuÃ¡n shÄ“ng tÃ­ bÃ¹ zhÃ¹",
                            "qÄ«ng zhÅu yÇ guÃ² wÃ n chÃ³ng shÄn"
                        ],
                        description: "æç™½çš„æ±Ÿè¡Œè¯—"
                    },
                    {
                        title: "æœ›å¤©é—¨å±±",
                        author: "æç™½",
                        lines: ["å¤©é—¨ä¸­æ–­æ¥šæ±Ÿå¼€", "ç¢§æ°´ä¸œæµè‡³æ­¤å›", "ä¸¤å²¸é’å±±ç›¸å¯¹å‡º", "å­¤å¸†ä¸€ç‰‡æ—¥è¾¹æ¥"],
                        pinyinTitle: "wÃ ng tiÄn mÃ©n shÄn",
                        pinyins: [
                            "tiÄn mÃ©n zhÅng duÃ n chÇ” jiÄng kÄi",
                            "bÃ¬ shuÇ dÅng liÃº zhÃ¬ cÇ huÃ­",
                            "liÇng Ã n qÄ«ng shÄn xiÄng duÃ¬ chÅ«",
                            "gÅ« fÄn yÄ« piÃ n rÃ¬ biÄn lÃ¡i"
                        ],
                        description: "æç™½çš„æ±Ÿå±±è¯—"
                    },
                    {
                        title: "ç‹¬åæ•¬äº­å±±",
                        author: "æç™½",
                        lines: ["ä¼—é¸Ÿé«˜é£å°½", "å­¤äº‘ç‹¬å»é—²", "ç›¸çœ‹ä¸¤ä¸åŒ", "åªæœ‰æ•¬äº­å±±"],
                        pinyinTitle: "dÃº zuÃ² jÃ¬ng tÃ­ng shÄn",
                        pinyins: [
                            "zhÃ²ng niÇo gÄo fÄ“i jÃ¬n",
                            "gÅ« yÃºn dÃº qÃ¹ xiÃ¡n",
                            "xiÄng kÄn liÇng bÃ¹ yÃ n",
                            "zhÇ yÇ’u jÃ¬ng tÃ­ng shÄn"
                        ],
                        description: "æç™½çš„å±±å±…è¯—"
                    },
                    {
                        title: "å¤œå®¿å±±å¯º",
                        author: "æç™½",
                        lines: ["å±æ¥¼é«˜ç™¾å°º", "æ‰‹å¯æ‘˜æ˜Ÿè¾°", "ä¸æ•¢é«˜å£°è¯­", "ææƒŠå¤©ä¸Šäºº"],
                        pinyinTitle: "yÃ¨ sÃ¹ shÄn sÃ¬",
                        pinyins: [
                            "wÄ“i lÃ³u gÄo bÇi chÇ",
                            "shÇ’u kÄ› zhÄi xÄ«ng chÃ©n",
                            "bÃ¹ gÇn gÄo shÄ“ng yÇ”",
                            "kÇ’ng jÄ«ng tiÄn shÃ ng rÃ©n"
                        ],
                        description: "æç™½çš„å±±å¯ºè¯—"
                    },
                    {
                        title: "å¯»éšè€…ä¸é‡",
                        author: "è´¾å²›",
                        lines: ["æ¾ä¸‹é—®ç«¥å­", "è¨€å¸ˆé‡‡è¯å»", "åªåœ¨æ­¤å±±ä¸­", "äº‘æ·±ä¸çŸ¥å¤„"],
                        pinyinTitle: "xÃºn yÇn zhÄ› bÃ¹ yÃ¹",
                        pinyins: [
                            "sÅng xiÃ  wÃ¨n tÃ³ng zÇ",
                            "yÃ¡n shÄ« cÇi yÃ o qÃ¹",
                            "zhÇ zÃ i cÇ shÄn zhÅng",
                            "yÃºn shÄ“n bÃ¹ zhÄ« chÃ¹"
                        ],
                        description: "è´¾å²›çš„è®¿å‹è¯—"
                    },
                    {
                        title: "æ± ä¸Š",
                        author: "ç™½å±…æ˜“",
                        lines: ["å°å¨ƒæ’‘å°è‰‡", "å·é‡‡ç™½è²å›", "ä¸è§£è—è¸ªè¿¹", "æµ®èä¸€é“å¼€"],
                        pinyinTitle: "chÃ­ shÃ ng",
                        pinyins: [
                            "xiÇo wÃ¡ chÄ“ng xiÇo tÇng",
                            "tÅu cÇi bÃ¡i liÃ¡n huÃ­",
                            "bÃ¹ jiÄ› cÃ¡ng zÅng jÃ¬",
                            "fÃº pÃ­ng yÄ« dÃ o kÄi"
                        ],
                        description: "ç™½å±…æ˜“çš„ç«¥è¶£è¯—"
                    },
                    {
                        title: "å°å„¿å‚é’“",
                        author: "èƒ¡ä»¤èƒ½",
                        lines: ["è“¬å¤´ç¨šå­å­¦å‚çº¶", "ä¾§åè“è‹”è‰æ˜ èº«", "è·¯äººå€Ÿé—®é¥æ‹›æ‰‹", "æ€•å¾—é±¼æƒŠä¸åº”äºº"],
                        pinyinTitle: "xiÇo Ã©r chuÃ­ diÃ o",
                        pinyins: [
                            "pÃ©ng tÃ³u zhÃ¬ zÇ xuÃ© chuÃ­ lÃºn",
                            "cÃ¨ zuÃ² mÃ©i tÃ¡i cÇo yÃ¬ng shÄ“n",
                            "lÃ¹ rÃ©n jiÃ¨ wÃ¨n yÃ¡o zhÄo shÇ’u",
                            "pÃ  dÃ© yÃº jÄ«ng bÃ¹ yÃ¬ng rÃ©n"
                        ],
                        description: "èƒ¡ä»¤èƒ½çš„å„¿ç«¥è¯—"
                    },
                    {
                        title: "ä¹æœˆä¹æ—¥å¿†å±±ä¸œå…„å¼Ÿ",
                        author: "ç‹ç»´",
                        lines: ["ç‹¬åœ¨å¼‚ä¹¡ä¸ºå¼‚å®¢", "æ¯é€¢ä½³èŠ‚å€æ€äº²", "é¥çŸ¥å…„å¼Ÿç™»é«˜å¤„", "éæ’èŒ±è¸å°‘ä¸€äºº"],
                        pinyinTitle: "jiÇ” yuÃ¨ jiÇ” rÃ¬ yÃ¬ shÄn dÅng xiÅng dÃ¬",
                        pinyins: [
                            "dÃº zÃ i yÃ¬ xiÄng wÃ©i yÃ¬ kÃ¨",
                            "mÄ›i fÃ©ng jiÄ jiÃ© bÃ¨i sÄ« qÄ«n",
                            "yÃ¡o zhÄ« xiÅng dÃ¬ dÄ“ng gÄo chÃ¹",
                            "biÃ n chÄ zhÅ« yÃº shÇo yÄ« rÃ©n"
                        ],
                        description: "ç‹ç»´çš„æ€ä¹¡è¯—"
                    }
                ],
                hard: [
                    {
                        title: "æ˜¥å¤œå–œé›¨",
                        author: "æœç”«",
                        lines: ["å¥½é›¨çŸ¥æ—¶èŠ‚", "å½“æ˜¥ä¹ƒå‘ç”Ÿ", "éšé£æ½œå…¥å¤œ", "æ¶¦ç‰©ç»†æ— å£°", "é‡å¾„äº‘ä¿±é»‘", "æ±Ÿèˆ¹ç«ç‹¬æ˜", "æ™“çœ‹çº¢æ¹¿å¤„", "èŠ±é‡é”¦å®˜åŸ"],
                        pinyinTitle: "chÅ«n yÃ¨ xÇ yÇ”",
                        pinyins: [
                            "hÇo yÇ” zhÄ« shÃ­ jiÃ©",
                            "dÄng chÅ«n nÇi fÄ shÄ“ng",
                            "suÃ­ fÄ“ng qiÃ¡n rÃ¹ yÃ¨",
                            "rÃ¹n wÃ¹ xÃ¬ wÃº shÄ“ng",
                            "yÄ› jÃ¬ng yÃºn jÃ¹ hÄ“i",
                            "jiÄng chuÃ¡n huÇ’ dÃº mÃ­ng",
                            "xiÇo kÃ n hÃ³ng shÄ« chÃ¹",
                            "huÄ zhÃ²ng jÇn guÄn chÃ©ng"
                        ],
                        description: "æœç”«çš„å–œé›¨è¯—"
                    },
                    {
                        title: "å±±å±…ç§‹æš",
                        author: "ç‹ç»´",
                        lines: ["ç©ºå±±æ–°é›¨å", "å¤©æ°”æ™šæ¥ç§‹", "æ˜æœˆæ¾é—´ç…§", "æ¸…æ³‰çŸ³ä¸Šæµ", "ç«¹å–§å½’æµ£å¥³", "è²åŠ¨ä¸‹æ¸”èˆŸ", "éšæ„æ˜¥èŠ³æ­‡", "ç‹å­™è‡ªå¯ç•™"],
                        pinyinTitle: "shÄn jÅ« qiÅ« mÃ­ng",
                        pinyins: [
                            "kÅng shÄn xÄ«n yÇ” hÃ²u",
                            "tiÄn qÃ¬ wÇn lÃ¡i qiÅ«",
                            "mÃ­ng yuÃ¨ sÅng jiÄn zhÃ o",
                            "qÄ«ng quÃ¡n shÃ­ shÃ ng liÃº",
                            "zhÃº xuÄn guÄ« huÃ n nÇš",
                            "liÃ¡n dÃ²ng xiÃ  yÃº zhÅu",
                            "suÃ­ yÃ¬ chÅ«n fÄng xiÄ“",
                            "wÃ¡ng sÅ«n zÃ¬ kÄ› liÃº"
                        ],
                        description: "ç‹ç»´çš„å±±å±…è¯—"
                    },
                    {
                        title: "è¿‡æ•…äººåº„",
                        author: "å­Ÿæµ©ç„¶",
                        lines: ["æ•…äººå…·é¸¡é»", "é‚€æˆ‘è‡³ç”°å®¶", "ç»¿æ ‘æ‘è¾¹åˆ", "é’å±±éƒ­å¤–æ–œ", "å¼€è½©é¢åœºåœƒ", "æŠŠé…’è¯æ¡‘éº»", "å¾…åˆ°é‡é˜³æ—¥", "è¿˜æ¥å°±èŠèŠ±"],
                        pinyinTitle: "guÃ² gÃ¹ rÃ©n zhuÄng",
                        pinyins: [
                            "gÃ¹ rÃ©n jÃ¹ jÄ« shÇ”",
                            "yÄo wÇ’ zhÃ¬ tiÃ¡n jiÄ",
                            "lÇœ shÃ¹ cÅ«n biÄn hÃ©",
                            "qÄ«ng shÄn guÅ wÃ i xiÃ©",
                            "kÄi xuÄn miÃ n chÃ¡ng pÇ”",
                            "bÇ jiÇ” huÃ  sÄng mÃ¡",
                            "dÃ i dÃ o chÃ³ng yÃ¡ng rÃ¬",
                            "hÃ¡i lÃ¡i jiÃ¹ jÃº huÄ"
                        ],
                        description: "å­Ÿæµ©ç„¶çš„ç”°å›­è¯—"
                    },
                    {
                        title: "é•¿æ­Œè¡Œ",
                        author: "æ±‰ä¹åºœ",
                        lines: ["é’é’å›­ä¸­è‘µ", "æœéœ²å¾…æ—¥æ™", "é˜³æ˜¥å¸ƒå¾·æ³½", "ä¸‡ç‰©ç”Ÿå…‰è¾‰", "å¸¸æç§‹èŠ‚è‡³", "ç„œé»„åå¶è¡°", "ç™¾å·ä¸œåˆ°æµ·", "ä½•æ—¶å¤è¥¿å½’", "å°‘å£®ä¸åŠªåŠ›", "è€å¤§å¾’ä¼¤æ‚²"],
                        pinyinTitle: "chÃ¡ng gÄ“ xÃ­ng",
                        pinyins: [
                            "qÄ«ng qÄ«ng yuÃ¡n zhÅng kuÃ­",
                            "zhÄo lÃ¹ dÃ i rÃ¬ xÄ«",
                            "yÃ¡ng chÅ«n bÃ¹ dÃ© zÃ©",
                            "wÃ n wÃ¹ shÄ“ng guÄng huÄ«",
                            "chÃ¡ng kÇ’ng qiÅ« jiÃ© zhÃ¬",
                            "kÅ«n huÃ¡ng huÃ¡ yÃ¨ shuÄi",
                            "bÇi chuÄn dÅng dÃ o hÇi",
                            "hÃ© shÃ­ fÃ¹ xÄ« guÄ«",
                            "shÃ o zhuÃ ng bÃ¹ nÇ” lÃ¬",
                            "lÇo dÃ  tÃº shÄng bÄ“i"
                        ],
                        description: "æ±‰ä¹åºœçš„åŠ±å¿—è¯—"
                    }
                ]
            },
            ci: {
                easy: [
                    {
                        title: "å’æŸ³",
                        author: "è´ºçŸ¥ç« ",
                         lines: ["ç¢§ç‰å¦†æˆä¸€æ ‘é«˜", "ä¸‡æ¡å‚ä¸‹ç»¿ä¸ç»¦", "ä¸çŸ¥ç»†å¶è°è£å‡º", "äºŒæœˆæ˜¥é£ä¼¼å‰ªåˆ€"],
                         pinyinTitle: "yÇ’ng liÇ”",
                         pinyins: [
                             "bÃ¬ yÃ¹ zhuÄng chÃ©ng yÄ« shÃ¹ gÄo",
                             "wÃ n tiÃ¡o chuÃ­ xiÃ  lÇœ sÄ« tÄo",
                             "bÃ¹ zhÄ« xÃ¬ yÃ¨ shÃ©i cÃ¡i chÅ«",
                             "Ã¨r yuÃ¨ chÅ«n fÄ“ng sÃ¬ jiÇn dÄo"
                         ],
                        description: "è´ºçŸ¥ç« çš„å’æŸ³è¯—"
                    },
                    {
                        title: "æ‘å±…",
                        author: "é«˜é¼",
                         lines: ["è‰é•¿èºé£äºŒæœˆå¤©", "æ‹‚å ¤æ¨æŸ³é†‰æ˜¥çƒŸ", "å„¿ç«¥æ•£å­¦å½’æ¥æ—©", "å¿™è¶ä¸œé£æ”¾çº¸é¸¢"],
                         pinyinTitle: "cÅ«n jÅ«",
                         pinyins: [
                             "cÇo zhÇng yÄ«ng fÄ“i Ã¨r yuÃ¨ tiÄn",
                             "fÃº dÄ« yÃ¡ng liÇ” zuÃ¬ chÅ«n yÄn",
                             "Ã©r tÃ³ng sÃ n xuÃ© guÄ« lÃ¡i zÇo",
                             "mÃ¡ng chÃ¨n dÅng fÄ“ng fÃ ng zhÇ yuÄn"
                         ],
                        description: "é«˜é¼çš„æ‘å±…è¯—"
                    },
                    {
                        title: "å…ƒæ—¥",
                        author: "ç‹å®‰çŸ³",
                         lines: ["çˆ†ç«¹å£°ä¸­ä¸€å²é™¤", "æ˜¥é£é€æš–å…¥å± è‹", "åƒé—¨ä¸‡æˆ·æ›ˆæ›ˆæ—¥", "æ€»æŠŠæ–°æ¡ƒæ¢æ—§ç¬¦"],
                         pinyinTitle: "yuÃ¡n rÃ¬",
                         pinyins: [
                             "bÃ o zhÃº shÄ“ng zhÅng yÄ« suÃ¬ chÃº",
                             "chÅ«n fÄ“ng sÃ²ng nuÇn rÃ¹ tÃº sÅ«",
                             "qiÄn mÃ©n wÃ n hÃ¹ tÃ³ng tÃ³ng rÃ¬",
                             "zÇ’ng bÇ xÄ«n tÃ¡o huÃ n jiÃ¹ fÃº"
                         ],
                        description: "ç‹å®‰çŸ³çš„æ–°å¹´è¯—"
                    },
                    {
                        title: "æ±Ÿå—æ˜¥",
                        author: "æœç‰§",
                        lines: ["åƒé‡Œèºå•¼ç»¿æ˜ çº¢", "æ°´æ‘å±±éƒ­é…’æ——é£", "å—æœå››ç™¾å…«åå¯º", "å¤šå°‘æ¥¼å°çƒŸé›¨ä¸­"],
                        pinyinTitle: "jiÄng nÃ¡n chÅ«n",
                        pinyins: [
                            "qiÄn lÇ yÄ«ng tÃ­ lÇœ yÃ¬ng hÃ³ng",
                            "shuÇ cÅ«n shÄn guÅ jiÇ” qÃ­ fÄ“ng",
                            "nÃ¡n chÃ¡o sÃ¬ bÇi bÄ shÃ­ sÃ¬",
                            "duÅ shÇo lÃ³u tÃ¡i yÄn yÇ” zhÅng"
                        ],
                        description: "æœç‰§çš„æ±Ÿå—è¯—"
                    }
                ],
                medium: [
                    {
                        title: "é¢˜è¥¿æ—å£",
                        author: "è‹è½¼",
                            lines: ["æ¨ªçœ‹æˆå²­ä¾§æˆå³°", "è¿œè¿‘é«˜ä½å„ä¸åŒ", "ä¸è¯†åºå±±çœŸé¢ç›®", "åªç¼˜èº«åœ¨æ­¤å±±ä¸­"],
                            pinyinTitle: "tÃ­ xÄ« lÃ­n bÃ¬",
                            pinyins: [
                                "hÃ©ng kÃ n chÃ©ng lÇng cÃ¨ chÃ©ng fÄ“ng",
                                "yuÇn jÃ¬n gÄo dÄ« gÃ¨ bÃ¹ tÃ³ng",
                                "bÃ¹ shÃ­ lÃº shÄn zhÄ“n miÃ n mÃ¹",
                                "zhÄ« yuÃ¡n shÄ“n zÃ i cÇ shÄn zhÅng"
                            ],
                        description: "è‹è½¼çš„å“²ç†è¯—"
                    },
                    {
                        title: "æƒ å´‡æ˜¥æ±Ÿæ™šæ™¯",
                        author: "è‹è½¼",
                            lines: ["ç«¹å¤–æ¡ƒèŠ±ä¸‰ä¸¤æ", "æ˜¥æ±Ÿæ°´æš–é¸­å…ˆçŸ¥", "è’Œè’¿æ»¡åœ°èŠ¦èŠ½çŸ­", "æ­£æ˜¯æ²³è±šæ¬²ä¸Šæ—¶"],
                            pinyinTitle: "huÃ¬ chÃ³ng chÅ«n jiÄng wÇn jÇng",
                            pinyins: [
                                "zhÃº wÃ i tÃ¡o huÄ sÄn liÇng zhÄ«",
                                "chÅ«n jiÄng shuÇ nuÇn yÄ xiÄn zhÄ«",
                                "lÃ³u hÄo mÇn dÃ¬ lÃº yÃ¡ duÇn",
                                "zhÃ¨ng shÃ¬ hÃ© tÃºn yÃ¹ shÃ ng shÃ­"
                            ],
                        description: "è‹è½¼çš„æ˜¥æ±Ÿè¯—"
                    },
                    {
                        title: "é¥®æ¹–ä¸Šåˆæ™´åé›¨",
                        author: "è‹è½¼",
                            lines: ["æ°´å…‰æ½‹æ»Ÿæ™´æ–¹å¥½", "å±±è‰²ç©ºè’™é›¨äº¦å¥‡", "æ¬²æŠŠè¥¿æ¹–æ¯”è¥¿å­", "æ·¡å¦†æµ“æŠ¹æ€»ç›¸å®œ"],
                            pinyinTitle: "yÇn hÃº shÃ ng chÅ« qÃ­ng hÃ²u yÇ”",
                            pinyins: [
                                "shuÇ guÄng liÃ n yÃ n qÃ­ng fÄng hÇo",
                                "shÄn sÃ¨ kÅng mÃ©ng yÇ” yÃ¬ qÃ­",
                                "yÃ¹ bÇ xÄ« hÃº bÇ xÄ« zÇ",
                                "dÃ n zhuÄng nÃ³ng mÇ’ zÇ’ng xiÄng yÃ­"
                            ],
                        description: "è‹è½¼çš„è¥¿æ¹–è¯—"
                    },
                    {
                        title: "å®¿æ–°å¸‚å¾å…¬åº—",
                        author: "æ¨ä¸‡é‡Œ",
                            lines: ["ç¯±è½ç–ç–ä¸€å¾„æ·±", "æ ‘å¤´æ–°ç»¿æœªæˆé˜´", "å„¿ç«¥æ€¥èµ°è¿½é»„è¶", "é£å…¥èœèŠ±æ— å¤„å¯»"],
                            pinyinTitle: "sÃ¹ xÄ«n shÃ¬ xÃº gÅng diÃ n",
                            pinyins: [
                                "lÃ­ luÃ² shÅ« shÅ« yÄ« jÃ¬ng shÄ“n",
                                "shÃ¹ tÃ³u xÄ«n lÇœ wÃ¨i chÃ©ng yÄ«n",
                                "Ã©r tÃ³ng jÃ­ zÇ’u zhuÄ« huÃ¡ng diÃ©",
                                "fÄ“i rÃ¹ cÃ i huÄ wÃº chÃ¹ xÃºn"
                            ],
                        description: "æ¨ä¸‡é‡Œçš„ç”°å›­è¯—"
                    }
                ],
                hard: [
                    {
                        title: "æ¸…å¹³ä¹Â·æ‘å±…",
                        author: "è¾›å¼ƒç–¾",
                            lines: ["èŒ…æªä½å°", "æºªä¸Šé’é’è‰", "é†‰é‡Œå´éŸ³ç›¸åªšå¥½", "ç™½å‘è°å®¶ç¿åªª", "å¤§å„¿é”„è±†æºªä¸œ", "ä¸­å„¿æ­£ç»‡é¸¡ç¬¼", "æœ€å–œå°å„¿äº¡èµ–", "æºªå¤´å§å‰¥è²è“¬"],
                            pinyinTitle: "qÄ«ng pÃ­ng yuÃ¨Â·cÅ«n jÅ«",
                            pinyins: [
                                "mÃ¡o yÃ¡n dÄ« xiÇo",
                                "xÄ« shÃ ng qÄ«ng qÄ«ng cÇo",
                                "zuÃ¬ lÇ wÃº yÄ«n xiÄng mÃ¨i hÇo",
                                "bÃ¡i fÃ  shÃ©i jiÄ wÄ“ng Ço",
                                "dÃ  Ã©r chÃº dÃ²u xÄ« dÅng",
                                "zhÅng Ã©r zhÃ¨ng zhÄ« jÄ« lÃ³ng",
                                "zuÃ¬ xÇ xiÇo Ã©r wÃ¡ng lÃ i",
                                "xÄ« tÃ³u wÃ² bÅ liÃ¡n pÃ©ng"
                            ],
                        description: "è¾›å¼ƒç–¾çš„æ‘å±…è¯"
                    },
                    {
                        title: "è¥¿æ±ŸæœˆÂ·å¤œè¡Œé»„æ²™é“ä¸­",
                        author: "è¾›å¼ƒç–¾",
                            lines: ["æ˜æœˆåˆ«ææƒŠé¹Š", "æ¸…é£åŠå¤œé¸£è‰", "ç¨»èŠ±é¦™é‡Œè¯´ä¸°å¹´", "å¬å–è›™å£°ä¸€ç‰‡", "ä¸ƒå…«ä¸ªæ˜Ÿå¤©å¤–", "ä¸¤ä¸‰ç‚¹é›¨å±±å‰", "æ—§æ—¶èŒ…åº—ç¤¾æ—è¾¹", "è·¯è½¬æºªæ¡¥å¿½è§"],
                            pinyinTitle: "xÄ« jiÄng yuÃ¨Â·yÃ¨ xÃ­ng huÃ¡ng shÄ dÃ o zhÅng",
                            pinyins: [
                                "mÃ­ng yuÃ¨ biÃ© zhÄ« jÄ«ng quÃ¨",
                                "qÄ«ng fÄ“ng bÃ n yÃ¨ mÃ­ng chÃ¡n",
                                "dÃ o huÄ xiÄng lÇ shuÅ fÄ“ng niÃ¡n",
                                "tÄ«ng qÇ” wÄ shÄ“ng yÄ« piÃ n",
                                "qÄ« bÄ gÃ¨ xÄ«ng tiÄn wÃ i",
                                "liÇng sÄn diÇn yÇ” shÄn qiÃ¡n",
                                "jiÃ¹ shÃ­ mÃ¡o diÃ n shÃ¨ lÃ­n biÄn",
                                "lÃ¹ zhuÇn xÄ« qiÃ¡o hÅ« jiÃ n"
                            ],
                        description: "è¾›å¼ƒç–¾çš„å¤œè¡Œè¯"
                    }
                ]
            },
            modern: {
                easy: [
                    {
                        title: "ç”»",
                        author: "æ— ",
                        lines: ["è¿œçœ‹å±±æœ‰è‰²", "è¿‘å¬æ°´æ— å£°", "æ˜¥å»èŠ±è¿˜åœ¨", "äººæ¥é¸Ÿä¸æƒŠ"],
                        pinyinTitle: "huÃ ",
                        pinyins: [
                            "yuÇn kÃ n shÄn yÇ’u sÃ¨",
                            "jÃ¬n tÄ«ng shuÇ wÃº shÄ“ng",
                            "chÅ«n qÃ¹ huÄ hÃ¡i zÃ i",
                            "rÃ©n lÃ¡i niÇo bÃ¹ jÄ«ng"
                        ],
                        description: "å¤ä»£çš„ç”»ä¸­è¯—"
                    },
                    {
                        title: "ç”»é¸¡",
                        author: "å”å¯…",
                        lines: ["å¤´ä¸Šçº¢å† ä¸ç”¨è£", "æ»¡èº«é›ªç™½èµ°å°†æ¥", "å¹³ç”Ÿä¸æ•¢è½»è¨€è¯­", "ä¸€å«åƒé—¨ä¸‡æˆ·å¼€"],
                        pinyinTitle: "huÃ  jÄ«",
                        pinyins: [
                            "tÃ³u shÃ ng hÃ³ng guÄn bÃ¹ yÃ²ng cÃ¡i",
                            "mÇn shÄ“n xuÄ› bÃ¡i zÇ’u jiÄng lÃ¡i",
                            "pÃ­ng shÄ“ng bÃ¹ gÇn qÄ«ng yÃ¡n yÇ”",
                            "yÃ­ jiÃ o qiÄn mÃ©n wÃ n hÃ¹ kÄi"
                        ],
                        description: "å”å¯…çš„å’é¸¡è¯—"
                    }
                ],
                medium: [
                    {
                        title: "ä¹¡æ„",
                        author: "ä½™å…‰ä¸­",
                        lines: ["å°æ—¶å€™", "ä¹¡æ„æ˜¯ä¸€æšå°å°çš„é‚®ç¥¨", "æˆ‘åœ¨è¿™å¤´", "æ¯äº²åœ¨é‚£å¤´"],
                        pinyinTitle: "xiÄng chÃ³u",
                        pinyins: [
                            "xiÇo shÃ­ hÃ²u",
                            "xiÄng chÃ³u shÃ¬ yÄ« mÃ©i xiÇo xiÇo de yÃ³u piÃ o",
                            "wÇ’ zÃ i zhÃ¨ tÃ³u",
                            "mÇ” qÄ«n zÃ i nÃ  tÃ³u"
                        ],
                        description: "ä½™å…‰ä¸­çš„ç°ä»£è¯—"
                    },
                    {
                        title: "å†åˆ«åº·æ¡¥",
                        author: "å¾å¿—æ‘©",
                        lines: ["è½»è½»çš„æˆ‘èµ°äº†", "æ­£å¦‚æˆ‘è½»è½»çš„æ¥", "æˆ‘è½»è½»çš„æ‹›æ‰‹", "ä½œåˆ«è¥¿å¤©çš„äº‘å½©", "é‚£æ²³ç•”çš„é‡‘æŸ³", "æ˜¯å¤•é˜³ä¸­çš„æ–°å¨˜"],
                        pinyinTitle: "zÃ i biÃ© kÄng qiÃ¡o",
                        pinyins: [
                            "qÄ«ng qÄ«ng de wÇ’ zÇ’u le",
                            "zhÃ¨ng rÃº wÇ’ qÄ«ng qÄ«ng de lÃ¡i",
                            "wÇ’ qÄ«ng qÄ«ng de zhÄo shÇ’u",
                            "zuÃ² biÃ© xÄ« tiÄn de yÃºn cÇi",
                            "nÃ  hÃ© pÃ n de jÄ«n liÇ”",
                            "shÃ¬ xÄ« yÃ¡ng zhÅng de xÄ«n niÃ¡ng"
                        ],
                        description: "å¾å¿—æ‘©çš„ç¦»åˆ«è¯—"
                    }
                ],
                hard: [
                    {
                        title: "ä¸ƒå¾‹Â·é•¿å¾",
                        author: "æ¯›æ³½ä¸œ",
                        lines: ["çº¢å†›ä¸æ€•è¿œå¾éš¾", "ä¸‡æ°´åƒå±±åªç­‰é—²", "äº”å²­é€¶è¿¤è…¾ç»†æµª", "ä¹Œè’™ç£…ç¤´èµ°æ³¥ä¸¸", "é‡‘æ²™æ°´æ‹äº‘å´–æš–", "å¤§æ¸¡æ¡¥æ¨ªé“ç´¢å¯’", "æ›´å–œå²·å±±åƒé‡Œé›ª", "ä¸‰å†›è¿‡åå°½å¼€é¢œ"],
                        pinyinTitle: "qÄ« lÇœÂ·chÃ¡ng zhÄ“ng",
                        pinyins: [
                            "hÃ³ng jÅ«n bÃ¹ pÃ  yuÇn zhÄ“ng nÃ¡n",
                            "wÃ n shuÇ qiÄn shÄn zhÇ dÄ›ng xiÃ¡n",
                            "wÇ” lÇng wÄ“i yÃ­ tÃ©ng xÃ¬ lÃ ng",
                            "wÅ« mÃ©ng pÃ¡ng bÃ³ zÇ’u nÃ­ wÃ¡n",
                            "jÄ«n shÄ shuÇ pÄi yÃºn yÃ¡ nuÇn",
                            "dÃ  dÃ¹ qiÃ¡o hÃ©ng tiÄ› suÇ’ hÃ¡n",
                            "gÃ¨ng xÇ mÃ­n shÄn qiÄn lÇ xuÄ›",
                            "sÄn jÅ«n guÃ² hÃ²u jÇn kÄi yÃ¡n"
                        ],
                        description: "æ¯›æ³½ä¸œçš„é•¿å¾è¯—"
                    },
                    {
                        title: "åœç®—å­Â·å’æ¢…",
                        author: "æ¯›æ³½ä¸œ",
                        lines: ["é£é›¨é€æ˜¥å½’", "é£é›ªè¿æ˜¥åˆ°", "å·²æ˜¯æ‚¬å´–ç™¾ä¸ˆå†°", "çŠ¹æœ‰èŠ±æä¿", "ä¿ä¹Ÿä¸äº‰æ˜¥", "åªæŠŠæ˜¥æ¥æŠ¥", "å¾…åˆ°å±±èŠ±çƒ‚æ¼«æ—¶", "å¥¹åœ¨ä¸›ä¸­ç¬‘"],
                        pinyinTitle: "bÇ” suÃ n zÇÂ·yÇ’ng mÃ©i",
                        pinyins: [
                            "fÄ“ng yÇ” sÃ²ng chÅ«n guÄ«",
                            "fÄ“i xuÄ› yÃ­ng chÅ«n dÃ o",
                            "yÇ shÃ¬ xuÃ¡n yÃ¡ bÇi zhÃ ng bÄ«ng",
                            "yÃ³u yÇ’u huÄ zhÄ« qiÃ o",
                            "qiÃ o yÄ› bÃ¹ zhÄ“ng chÅ«n",
                            "zhÇ bÇ chÅ«n lÃ¡i bÃ o",
                            "dÃ i dÃ o shÄn huÄ lÃ n mÃ n shÃ­",
                            "tÄ zÃ i cÃ³ng zhÅng xiÃ o"
                        ],
                        description: "æ¯›æ³½ä¸œçš„å’æ¢…è¯"
                    }
                ]
            }
        };
        
        // æ¸¸æˆçŠ¶æ€å˜é‡
        let gameState = {
            currentType: 'poem',
            currentDifficulty: 'easy',
            level: 1,
            score: 0,
            combo: 0,
            maxCombo: 0,
            completedPoems: 0,
            totalTime: 0,
            isGameActive: false,
            currentPoem: null,
            usedPoems: [],
            timer: null,
            timeLimit: 180,
            isTimerEnabled: true,
            achievements: [],
            dragElement: null,
            correctPlacements: 0,
            hintTimeouts: [] // å­˜å‚¨æç¤ºçš„å®šæ—¶å™¨
        };
        
        // éš¾åº¦é…ç½®
        const difficultyConfig = {
            easy: { timeLimit: 180, pointsPerLine: 100, comboMultiplier: 1.2 },
            medium: { timeLimit: 240, pointsPerLine: 150, comboMultiplier: 1.5 },
            hard: { timeLimit: 300, pointsPerLine: 200, comboMultiplier: 2.0 }
        };
        
        // æˆå°±ç³»ç»Ÿ
        const achievements = [
            { id: 'first_poem', name: 'åˆéœ²å¤´è§’', desc: 'å®Œæˆç¬¬ä¸€é¦–è¯—', icon: 'ğŸ¯', unlocked: false },
            { id: 'combo_3', name: 'è¿å‡»é«˜æ‰‹', desc: 'è¿ç»­å®Œæˆ3é¦–è¯—', icon: 'ğŸ”¥', unlocked: false },
            { id: 'speed_master', name: 'é€Ÿåº¦ä¹‹ç‹', desc: '60ç§’å†…å®Œæˆä¸€é¦–è¯—', icon: 'âš¡', unlocked: false },
            { id: 'poet_scholar', name: 'è¯—è¯å­¦è€…', desc: 'å®Œæˆ10é¦–è¯—', icon: 'ğŸ“š', unlocked: false },
            { id: 'perfect_round', name: 'å®Œç¾è¡¨ç°', desc: 'ä¸€æ¬¡æ€§æ­£ç¡®æ‹¼æ¥', icon: 'ğŸ’', unlocked: false }
        ];

        // å¾½ç« æŒä¹…åŒ–ä¸é¢„è§ˆ
        const GAME_KEY = 'poetry';
        function getEarnedAchievementIds() {
            try { return JSON.parse(localStorage.getItem('earnedAchievements_' + GAME_KEY) || '[]'); } catch (_) { return []; }
        }
        function saveAchievementUnlocked(id) {
            const ids = new Set(getEarnedAchievementIds());
            if (!ids.has(id)) {
                ids.add(id);
                try { localStorage.setItem('earnedAchievements_' + GAME_KEY, JSON.stringify(Array.from(ids))); } catch (_) {}
            }
        }
        function renderBadgePreview() {
            const grid = document.getElementById('badge-preview-grid');
            if (!grid) return;
            const owned = new Set(getEarnedAchievementIds());
            grid.innerHTML = achievements.map(a => {
                const earned = owned.has(a.id);
                const base = earned ? 'from-yellow-100 to-orange-100 border-yellow-300 text-amber-900' : 'from-gray-50 to-gray-100 border-gray-200 text-gray-400 opacity-80';
                return `
                    <div class="relative w-20 h-20 rounded-2xl border-2 bg-gradient-to-br ${base} shadow-sm flex flex-col items-center justify-center overflow-hidden" title="${a.name}ï¼š${a.desc}">
                        <div class="text-2xl mb-1">${a.icon}</div>
                        <div class="text-[10px] font-bold text-center leading-tight px-1">${a.name}</div>
                        ${earned ? '<div class=\"absolute right-1 top-1 bg-amber-400 text-white text-[10px] px-1 rounded-full shadow\">å·²è·</div>' : '<div class=\"absolute right-1 top-1 bg-gray-400 text-white text-[10px] px-1 rounded-full shadow\">æœªè·</div>'}
                    </div>
                `;
            }).join('');
        }
        
        // DOMå…ƒç´ 
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const homeBtn = document.getElementById('home-btn');
        const hintBtn = document.getElementById('hint-btn');
        const resetBtn = document.getElementById('reset-btn');
        const continueBtn = document.getElementById('continue-btn');
        const poemTitle = document.getElementById('poem-title');
        const poemAuthor = document.getElementById('poem-author');
        const poemHint = document.getElementById('poem-hint');
        const puzzlePieces = document.getElementById('puzzle-pieces');
        const dropZones = document.getElementById('drop-zones');
        const levelDisplay = document.getElementById('level-display');
        const comboDisplay = document.getElementById('combo-display');
        const scoreDisplay = document.getElementById('score-display');
        const countdownEl = document.getElementById('countdown');
        const progressBar = document.getElementById('progress-bar');
        
        // äº‹ä»¶ç›‘å¬
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', restartGame);
        homeBtn.addEventListener('click', goHome);
        hintBtn.addEventListener('click', showHint);
        resetBtn.addEventListener('click', resetPuzzle);
        continueBtn.addEventListener('click', continueToNext);
        
        // è¯—è¯ç±»å‹é€‰æ‹©
        document.querySelectorAll('.poetry-type-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.poetry-type-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                gameState.currentType = btn.dataset.type;
                updateTimerDescription();
                // åˆ‡æ¢ç±»å‹æ—¶ä¹Ÿåˆ·æ–°å¾½ç« é¢„è§ˆ
                try { renderBadgePreview(); } catch(_) {}
            });
        });
        
        // éš¾åº¦é€‰æ‹©
        document.querySelectorAll('.difficulty-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                gameState.currentDifficulty = btn.dataset.difficulty;
                updateTimerDescription();
                // åˆ‡æ¢éš¾åº¦æ—¶åˆ·æ–°å¾½ç« é¢„è§ˆï¼ˆå½“å‰ç‰ˆæœ¬å¾½ç« ä¸éš¾åº¦æ— å…³ï¼Œä»…ä¿æŒä¸€è‡´ä½“éªŒï¼‰
                try { renderBadgePreview(); } catch(_) {}
            });
        });
        
        // å€’è®¡æ—¶å¼€å…³äº‹ä»¶ç›‘å¬
        document.getElementById('timer-toggle').addEventListener('change', function() {
            gameState.isTimerEnabled = this.checked;
            updateTimerDescription();
        });

        // é¦–æ¬¡è¿›å…¥æ—¶æ¸²æŸ“å¾½ç« é¢„è§ˆ
        try { renderBadgePreview(); } catch(_) {}
        
        // æ›´æ–°è®¡æ—¶å™¨æè¿°
        function updateTimerDescription() {
            const description = document.getElementById('timer-description');
            if (!gameState.isTimerEnabled) {
                description.textContent = 'ä¸é™æ—¶æ¨¡å¼';
            } else {
                const config = difficultyConfig[gameState.currentDifficulty];
                description.textContent = `${config.timeLimit}ç§’é™æ—¶`;
            }
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            // ä¿å­˜è®¾ç½®
            const isTimerEnabled = gameState.isTimerEnabled;
            const currentType = gameState.currentType;
            const currentDifficulty = gameState.currentDifficulty;
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState = {
                currentType: currentType,
                currentDifficulty: currentDifficulty,
                level: 1,
                score: 0,
                combo: 0,
                maxCombo: 0,
                completedPoems: 0,
                totalTime: 0,
                isGameActive: true,
                currentPoem: null,
                usedPoems: [],
                timer: null,
                timeLimit: difficultyConfig[currentDifficulty].timeLimit,
                isTimerEnabled: isTimerEnabled,
                achievements: [],
                dragElement: null,
                correctPlacements: 0
            };
            
            // åˆ‡æ¢ç•Œé¢
            startScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            // å¼€å§‹ç¬¬ä¸€é¦–è¯—
            nextPoem();

            // æ¸²æŸ“å¼€å§‹å¡ç‰‡å¾½ç« é¢„è§ˆï¼ˆè¿”å›é¦–é¡µå†è¿›æ—¶ä¹Ÿèƒ½çœ‹åˆ°æœ€æ–°çŠ¶æ€ï¼‰
            try { renderBadgePreview(); } catch(_) {}
        }
        
        // ç”Ÿæˆä¸‹ä¸€é¦–è¯—
        function nextPoem() {
            if (!gameState.isGameActive) return;
            
            // ç¡®ä¿å®Œæ•´è¯—è¯åŒºåŸŸéšè—
            const completedPoemEl = document.getElementById('completed-poem');
            completedPoemEl.classList.add('hidden');
            completedPoemEl.classList.remove('poem-reveal');
            
            // é€‰æ‹©è¯—è¯
            const poems = poemDatabase[gameState.currentType][gameState.currentDifficulty];
            const availablePoems = poems.filter(poem => !gameState.usedPoems.includes(poem.title));
            
            if (availablePoems.length === 0) {
                // æ‰€æœ‰è¯—è¯å®Œæˆï¼Œå‡çº§æˆ–ç»“æŸ
                levelUp();
                return;
            }
            
            // éšæœºé€‰æ‹©ä¸€é¦–è¯—
            const randomIndex = Math.floor(Math.random() * availablePoems.length);
            gameState.currentPoem = availablePoems[randomIndex];
            gameState.usedPoems.push(gameState.currentPoem.title);
            gameState.correctPlacements = 0;
            
            // æ˜¾ç¤ºè¯—è¯ä¿¡æ¯
            poemTitle.textContent = gameState.currentPoem.title;
            poemAuthor.textContent = gameState.currentPoem.author;
            poemHint.textContent = gameState.currentPoem.description;
            // æ ‡é¢˜æ‹¼éŸ³
            const titlePyEl = document.getElementById('poem-title-pinyin');
            const applyTitlePinyin = () => {
                let py = getPinyin(gameState.currentPoem.title);
                if(!py && gameState.currentPoem.pinyinTitle) py = gameState.currentPoem.pinyinTitle;
                if(!py && poemPinyinDB[gameState.currentPoem.title]) py = poemPinyinDB[gameState.currentPoem.title].title;
                titlePyEl.textContent = py || '';
            };
            applyTitlePinyin();
            ensurePinyinReady(applyTitlePinyin);
            
            // ç”Ÿæˆæ‹¼å›¾ï¼ˆç¡®ä¿æ‹¼éŸ³åº“å°±ç»ªåä¹Ÿèƒ½å†æ¬¡æ¸²æŸ“ï¼‰
            generatePuzzle();
            ensurePinyinReady(() => {
                // äºŒæ¬¡åˆ·æ–°ï¼šé‡æ–°ç”Ÿæˆï¼Œå¡«å……æ‹¼éŸ³
                generatePuzzle();
            });
            
            // å¼€å§‹è®¡æ—¶
            startTimer();
            
            // æ›´æ–°æ˜¾ç¤º
            updateGameDisplay();
        }
        
        // ç”Ÿæˆæ‹¼å›¾
        function generatePuzzle() {
            const lines = [...gameState.currentPoem.lines];
            const shuffledLines = shuffleArray([...lines]);
            
            // æ¸…ç©ºå®¹å™¨
            puzzlePieces.innerHTML = '';
            dropZones.innerHTML = '';
            
            // åˆ›å»ºæ‹¼å›¾ç‰‡
            shuffledLines.forEach((line, index) => {
                const piece = document.createElement('div');
                piece.className = 'puzzle-piece bg-white rounded-xl shadow-lg p-4 text-center cursor-grab border-2 border-gray-200 hover:border-primary hover:shadow-xl transform hover:scale-105';
                let py = getPinyin(line) || '';
                if(!py && Array.isArray(gameState.currentPoem.pinyins)){
                    const idx = lines.indexOf(line);
                    if(idx>-1) py = gameState.currentPoem.pinyins[idx] || '';
                }
                if(!py && poemPinyinDB[gameState.currentPoem.title]){
                    const idx = lines.indexOf(line);
                    if(idx>-1) py = poemPinyinDB[gameState.currentPoem.title].lines[idx] || '';
                }
                py = py || '&nbsp;';
                piece.innerHTML = `
                    <div class="pinyin-text">${py}</div>
                    <div class="font-poem text-lg text-poem font-medium">${line}</div>
                `;
                piece.dataset.line = line;
                piece.draggable = true;
                
                // æ‹–æ‹½äº‹ä»¶
                piece.addEventListener('dragstart', handleDragStart);
                piece.addEventListener('dragend', handleDragEnd);
                
                // ç§»åŠ¨ç«¯è§¦æ‘¸æ”¯æŒ
                piece.addEventListener('touchstart', handleTouchStart, {passive: false});
                piece.addEventListener('touchmove', handleTouchMove, {passive: false});
                piece.addEventListener('touchend', handleTouchEnd, {passive: false});
                
                puzzlePieces.appendChild(piece);
            });
            
            // åˆ›å»ºæ”¾ç½®åŒºåŸŸ
            lines.forEach((line, index) => {
                const zone = document.createElement('div');
                zone.className = 'drop-zone bg-gray-100 rounded-xl p-6 text-center min-h-[80px] flex items-center justify-center border-2 border-dashed border-gray-300';
                // åˆå§‹ä¸æ˜¾ç¤ºæ‹¼éŸ³ï¼Œé˜²æ­¢æç¤ºç­”æ¡ˆ
                zone.innerHTML = `
                    <div class="text-gray-400 font-poem">ç¬¬${index + 1}å¥</div>
                `;
                zone.dataset.correctLine = line;
                zone.dataset.position = index;
                
                // æ‹–æ”¾äº‹ä»¶
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('drop', handleDrop);
                zone.addEventListener('dragleave', handleDragLeave);
                
                dropZones.appendChild(zone);
            });
        }
        
        // æ‹–æ‹½å¼€å§‹
        function handleDragStart(e) {
            gameState.dragElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.outerHTML);
        }
        
        // æ‹–æ‹½ç»“æŸ
        function handleDragEnd(e) {
            this.classList.remove('dragging');
        }
        
        // ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶å¤„ç†
        let touchDragElement = null;
        let touchOffset = { x: 0, y: 0 };
        let dragPreview = null;
        
        function handleTouchStart(e) {
            e.preventDefault();
            touchDragElement = this;
            
            // è®°å½•è§¦æ‘¸åç§»
            const touch = e.touches[0];
            const rect = this.getBoundingClientRect();
            touchOffset.x = touch.clientX - rect.left;
            touchOffset.y = touch.clientY - rect.top;
            
            // åˆ›å»ºæ‹–æ‹½é¢„è§ˆ
            dragPreview = this.cloneNode(true);
            dragPreview.style.position = 'fixed';
            dragPreview.style.top = (touch.clientY - touchOffset.y) + 'px';
            dragPreview.style.left = (touch.clientX - touchOffset.x) + 'px';
            dragPreview.style.opacity = '0.8';
            dragPreview.style.transform = 'rotate(5deg) scale(1.1)';
            dragPreview.style.zIndex = '9999';
            dragPreview.style.pointerEvents = 'none';
            document.body.appendChild(dragPreview);
            
            // è®¾ç½®åŸå…ƒç´ æ ·å¼
            this.style.opacity = '0.5';
            gameState.dragElement = this;
        }
        
        function handleTouchMove(e) {
            e.preventDefault();
            if (!touchDragElement || !dragPreview) return;
            
            const touch = e.touches[0];
            dragPreview.style.top = (touch.clientY - touchOffset.y) + 'px';
            dragPreview.style.left = (touch.clientX - touchOffset.x) + 'px';
            
            // æ£€æµ‹æ”¾ç½®åŒºåŸŸ
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            const dropZone = elementBelow?.closest('.drop-zone');
            
            // æ¸…é™¤æ‰€æœ‰é«˜äº®
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('drag-over');
            });
            
            // é«˜äº®å½“å‰æ”¾ç½®åŒºåŸŸ
            if (dropZone && !dropZone.classList.contains('correct')) {
                dropZone.classList.add('drag-over');
            }
        }
        
        function handleTouchEnd(e) {
            e.preventDefault();
            if (!touchDragElement) return;
            
            const touch = e.changedTouches[0];
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            const dropZone = elementBelow?.closest('.drop-zone');
            
            // æ¸…ç†æ‹–æ‹½é¢„è§ˆ
            if (dragPreview) {
                dragPreview.remove();
                dragPreview = null;
            }
            
            // æ¢å¤åŸå…ƒç´ æ ·å¼
            touchDragElement.style.opacity = '';
            
            // æ¸…é™¤æ‰€æœ‰é«˜äº®
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('drag-over');
            });
            
            // å¤„ç†æ”¾ç½®
            if (dropZone && !dropZone.classList.contains('correct')) {
                const droppedLine = touchDragElement.dataset.line.trim();
                const correctLine = dropZone.dataset.correctLine.trim();
                
                if (droppedLine === correctLine) {
                    // æ­£ç¡®æ”¾ç½® - ä½¿ç”¨ä¸æ‹–æ‹½ç›¸åŒçš„é€»è¾‘
                    handleCorrectPlacement(dropZone, droppedLine);
                } else {
                    // é”™è¯¯æ”¾ç½®
                    handleIncorrectPlacement(dropZone);
                }
            }
            
            touchDragElement = null;
            gameState.dragElement = null;
        }
        
        // æ‹–æ‹½æ‚¬åœ
        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            this.classList.add('drag-over');
        }
        
        // æ‹–æ‹½ç¦»å¼€
        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }
        
        // æ­£ç¡®æ”¾ç½®å¤„ç†
        function handleCorrectPlacement(dropZone, droppedLine) {
            // ç«‹å³ç§»é™¤æ‹¼å›¾ç‰‡ - æœ€é«˜ä¼˜å…ˆçº§
            if (gameState.dragElement && gameState.dragElement.parentNode) {
                gameState.dragElement.parentNode.removeChild(gameState.dragElement);
            }
            
            // æ­£ç¡®æ”¾ç½®
            let py = getPinyin(droppedLine);
            if(!py && poemPinyinDB[gameState.currentPoem.title]){
                const idx = gameState.currentPoem.lines.indexOf(droppedLine);
                if(idx>-1) py = poemPinyinDB[gameState.currentPoem.title].lines[idx] || '';
            }
            dropZone.innerHTML = `
                <div class="text-center">
                    <div class="pinyin-text">${py}</div>
                    <div class="font-poem text-lg text-poem font-medium">${droppedLine}</div>
                </div>
            `;
            dropZone.classList.remove('bg-gray-100', 'border-gray-300');
            dropZone.classList.add('correct', 'bg-green-50', 'border-green-300');
            
            // æ¸…é™¤æç¤ºçŠ¶æ€
            dropZone.dataset.showingHint = 'false';
            dropZone.style.border = '2px solid #10B981';
            dropZone.style.animation = '';
            
            // æ¸…é™¤æç¤ºå®šæ—¶å™¨
            if (gameState.hintTimeouts) {
                gameState.hintTimeouts = gameState.hintTimeouts.filter(item => {
                    if (item.zone === dropZone) {
                        clearTimeout(item.timeout);
                        return false;
                    }
                    return true;
                });
            }
            gameState.correctPlacements++;
            
            // æ£€æŸ¥æ˜¯å¦å®Œæˆ
            if (gameState.correctPlacements === gameState.currentPoem.lines.length) {
                handlePoemComplete();
            }
            
            // å¢åŠ è¿å‡»
            gameState.combo++;
            gameState.maxCombo = Math.max(gameState.maxCombo, gameState.combo);
            
            // åŠ åˆ†
            const config = difficultyConfig[gameState.currentDifficulty];
            const basePoints = config.pointsPerLine;
            const comboBonus = Math.floor(basePoints * (gameState.combo - 1) * 0.1);
            const totalPoints = basePoints + comboBonus;
            gameState.score += totalPoints;
            
            // ğŸ‰ æ’’èŠ±åº†ç¥ï¼
            showCelebration();
            
            updateGameDisplay();
        }
        
        // é”™è¯¯æ”¾ç½®å¤„ç†
        function handleIncorrectPlacement(dropZone) {
            gameState.combo = 0;
            updateGameDisplay();
            
            // é”™è¯¯è§†è§‰åé¦ˆï¼šçº¢æ¡† + æŠ–åŠ¨ + é”™è¯¯å›¾æ ‡
            dropZone.style.border = '3px solid #EF4444';
            dropZone.style.backgroundColor = '#FEE2E2';
            dropZone.innerHTML = `
                <div class="text-red-500 text-2xl">âŒ</div>
                <div class="text-red-600 text-sm font-medium mt-1">ä½ç½®é”™è¯¯</div>
            `;
            dropZone.style.animation = 'shake 0.5s ease-in-out';
            
            // 1.5ç§’åæ¢å¤åŸçŠ¶
            setTimeout(() => {
                dropZone.style.animation = '';
                dropZone.style.border = '2px dashed #D1D5DB';
                dropZone.style.backgroundColor = '#F3F4F6';
                dropZone.innerHTML = `
                    <div class="text-gray-400 font-poem">ç¬¬${parseInt(dropZone.dataset.position) + 1}å¥</div>
                `;
            }, 1500);
        }
        
        // æ‹–æ”¾
        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            if (!gameState.dragElement) return;
            
            const droppedLine = gameState.dragElement.dataset.line.trim();
            const correctLine = this.dataset.correctLine.trim();
            
            if (droppedLine === correctLine) {
                handleCorrectPlacement(this, droppedLine);
            } else {
                handleIncorrectPlacement(this);
            }
            
            // æ¸…ç†æ‹–æ‹½çŠ¶æ€
            gameState.dragElement = null;
        }
        
        // è¯—è¯å®Œæˆ
        function handlePoemComplete() {
            gameState.completedPoems++;
            
            // åœæ­¢è®¡æ—¶
            clearInterval(gameState.timer);
            
            // å®ŒæˆåŠ¨ç”»
            dropZones.classList.add('poem-complete');
            
            // æ˜¾ç¤ºå®Œæ•´è¯—è¯
            showCompletedPoem();
            
            // æ£€æŸ¥æˆå°±
            checkAchievements();
            
            // ä¸å†è‡ªåŠ¨åˆ‡æ¢ï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡»ç»§ç»­æŒ‰é’®
        }
        
        // æ˜¾ç¤ºå®Œæˆçš„è¯—è¯
        function showCompletedPoem() {
            const completedPoemEl = document.getElementById('completed-poem');
            const poemContentEl = document.getElementById('complete-poem-content');
            
            // ç”Ÿæˆå®Œæ•´è¯—è¯å†…å®¹ - æ›´ä¼˜é›…çš„æ’ç‰ˆ
            let poemHTML = '';
            gameState.currentPoem.lines.forEach((line, index) => {
                let py = getPinyin(line);
                if(!py && Array.isArray(gameState.currentPoem.pinyins)){
                    const idx = gameState.currentPoem.lines.indexOf(line);
                    if(idx>-1) py = gameState.currentPoem.pinyins[idx] || '';
                }
                if(!py && poemPinyinDB[gameState.currentPoem.title]){
                    const idx = gameState.currentPoem.lines.indexOf(line);
                    if(idx>-1) py = poemPinyinDB[gameState.currentPoem.title].lines[idx] || '';
                }
                poemHTML += `<div class="poem-line-appear" style="animation-delay: ${index * 0.4}s">
                    <div class="pinyin-text">${py}</div>
                    <div>${line}</div>
                </div>`;
            });
            
            poemContentEl.innerHTML = poemHTML;
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯æœ€åä¸€é¦–è¯—ï¼ˆéœ€è¦å‡çº§ï¼‰
            const poems = poemDatabase[gameState.currentType][gameState.currentDifficulty];
            const availablePoems = poems.filter(poem => !gameState.usedPoems.includes(poem.title));
            const isLastPoem = availablePoems.length === 0; // æ²¡æœ‰å‰©ä½™è¯—è¯äº†ï¼Œéœ€è¦å‡çº§
            
            // æ˜¾ç¤ºç»§ç»­æŒ‰é’®å¹¶æ›´æ–°æ–‡å­—
            const continueBtn = document.getElementById('continue-btn');
            const continueBtnContainer = document.getElementById('continue-btn-container');
            
            if (isLastPoem) {
                continueBtn.innerHTML = 'è¿›å…¥ä¸‹ä¸€å…³ <i class="fa fa-arrow-up ml-2"></i>';
            } else {
                continueBtn.innerHTML = 'ç»§ç»­ä¸‹ä¸€é¦– <i class="fa fa-arrow-right ml-2"></i>';
            }
            
            // æ˜¾ç¤ºç»§ç»­æŒ‰é’®å®¹å™¨ï¼ˆæç¤ºå’Œé‡ç½®æŒ‰é’®ä¿æŒæ˜¾ç¤ºï¼‰
            continueBtnContainer.classList.remove('hidden');
            
            // æ˜¾ç¤ºå®Œæ•´è¯—è¯åŒºåŸŸ
            completedPoemEl.classList.remove('hidden');
            completedPoemEl.classList.add('poem-reveal');
            
            // å®Œå…¨éšè—æ‹¼å›¾åŒºåŸŸ
            const puzzleArea = document.querySelector('.flex.flex-col.lg\\:flex-row.gap-8');
            if (puzzleArea) {
                puzzleArea.style.transition = 'opacity 0.8s ease-out, transform 0.8s ease-out';
                puzzleArea.style.opacity = '0';
                puzzleArea.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    puzzleArea.style.display = 'none';
                }, 800);
            }
        }
        
        // éšè—å®Œæˆçš„è¯—è¯
        function hideCompletedPoem() {
            const completedPoemEl = document.getElementById('completed-poem');
            const puzzleArea = document.querySelector('.flex.flex-col.lg\\:flex-row.gap-8');
            const continueBtnContainer = document.getElementById('continue-btn-container');
            
            // éšè—å®Œæ•´è¯—è¯
            completedPoemEl.classList.add('hidden');
            completedPoemEl.classList.remove('poem-reveal');
            
            // æ¢å¤æ‹¼å›¾åŒºåŸŸ
            if (puzzleArea) {
                puzzleArea.style.display = 'flex';
                puzzleArea.style.opacity = '1';
                puzzleArea.style.transform = 'translateY(0)';
            }
            
            // éšè—ç»§ç»­æŒ‰é’®å®¹å™¨ï¼ˆæç¤ºå’Œé‡ç½®æŒ‰é’®ä¸€ç›´ä¿æŒæ˜¾ç¤ºï¼‰
            continueBtnContainer.classList.add('hidden');
        }
        
        // ç»§ç»­ä¸‹ä¸€é¦–è¯—
        function continueToNext() {
            dropZones.classList.remove('poem-complete');
            hideCompletedPoem();
            nextPoem();
        }
        
        // å‡çº§
        function levelUp() {
            gameState.level++;
            gameState.usedPoems = [];
            
            // æ˜¾ç¤ºå‡çº§åŠ¨ç”»
            showLevelUpNotification();
            
            setTimeout(nextPoem, 3000);
        }
        
        // å¼€å§‹è®¡æ—¶
        function startTimer() {
            if (!gameState.isTimerEnabled) {
                countdownEl.textContent = 'âˆ';
                return;
            }
            
            let timeLeft = gameState.timeLimit;
            countdownEl.textContent = timeLeft;
            
            gameState.timer = setInterval(() => {
                timeLeft--;
                countdownEl.textContent = timeLeft;
                
                // æ—¶é—´è­¦å‘Šæ•ˆæœ
                if (timeLeft <= 30) {
                    countdownEl.parentElement.classList.add('animate-pulse');
                    countdownEl.parentElement.style.backgroundColor = '#EF4444';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    endGame();
                }
            }, 1000);
        }
        
        // æ›´æ–°æ¸¸æˆæ˜¾ç¤º
        function updateGameDisplay() {
            levelDisplay.textContent = gameState.level;
            comboDisplay.textContent = gameState.combo;
            scoreDisplay.textContent = gameState.score;
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = (gameState.correctPlacements / gameState.currentPoem.lines.length) * 100;
            progressBar.style.width = `${progress}%`;
            
            // é‡ç½®è®¡æ—¶å™¨æ ·å¼
            countdownEl.parentElement.classList.remove('animate-pulse');
            countdownEl.parentElement.style.backgroundColor = '#F59E0B';
        }
        
        // æ˜¾ç¤ºæç¤º
        function showHint() {
            const emptyZones = Array.from(dropZones.children).filter(zone => 
                !zone.classList.contains('correct')
            );
            
            if (emptyZones.length === 0) return; // å¦‚æœéƒ½å®Œæˆäº†å°±ä¸æç¤º
            
            // æ™ºèƒ½é€‰æ‹©ï¼šä¼˜å…ˆæç¤ºç¬¬ä¸€ä¸ªç©ºä½ç½®ï¼ˆæŒ‰è¯—å¥é¡ºåºï¼‰
            let targetZone = null;
            for (let i = 0; i < gameState.currentPoem.lines.length; i++) {
                const zone = Array.from(dropZones.children).find(z => 
                    parseInt(z.dataset.position) === i && !z.classList.contains('correct')
                );
                if (zone) {
                    targetZone = zone;
                    break;
                }
            }
            
            if (targetZone) {
                const correctLine = targetZone.dataset.correctLine;
                const hintText = correctLine.substring(0, 2) + '...'; // æ˜¾ç¤ºå‰ä¸¤ä¸ªå­—
                
                // æ˜¾ç¤ºä½ç½®æç¤ºï¼ˆæ©™è‰²è¾¹æ¡†+é—ªçƒï¼‰
                targetZone.style.border = '3px solid #F59E0B';
                targetZone.style.animation = 'pulse 1s ease-in-out 3';
                
                // æ˜¾ç¤ºå†…å®¹æç¤º
                const originalContent = targetZone.innerHTML;
                targetZone.innerHTML = `
                    <div class="text-orange-500 font-poem text-sm">
                        <div class="mb-1">ç¬¬${parseInt(targetZone.dataset.position) + 1}å¥</div>
                        <div class="font-bold">${hintText}</div>
                    </div>
                `;
                
                // æ ‡è®°è¿™ä¸ªåŒºåŸŸæ­£åœ¨æ˜¾ç¤ºæç¤º
                targetZone.dataset.showingHint = 'true';
                
                // 4ç§’åæ¢å¤ï¼ˆä¿å­˜å®šæ—¶å™¨IDï¼‰
                const hintTimeout = setTimeout(() => {
                    // åªæœ‰åœ¨æœªè¢«æ­£ç¡®æ”¾ç½®çš„æƒ…å†µä¸‹æ‰æ¢å¤
                    if (!targetZone.classList.contains('correct')) {
                        targetZone.style.border = '2px dashed #D1D5DB';
                        targetZone.style.animation = '';
                        targetZone.innerHTML = originalContent;
                        targetZone.dataset.showingHint = 'false';
                    }
                }, 4000);
                
                // ä¿å­˜å®šæ—¶å™¨IDåˆ°æ¸¸æˆçŠ¶æ€ï¼Œä»¥ä¾¿åç»­æ¸…é™¤
                gameState.hintTimeouts.push({ timeout: hintTimeout, zone: targetZone });
                
                // åŒæ—¶é«˜äº®å¯¹åº”çš„æ‹¼å›¾ç‰‡
                const puzzlePieces = Array.from(document.querySelectorAll('.puzzle-piece'));
                const matchingPiece = puzzlePieces.find(piece => 
                    piece.dataset.line === correctLine
                );
                
                if (matchingPiece) {
                    matchingPiece.style.border = '3px solid #10B981';
                    matchingPiece.style.transform = 'scale(1.05)';
                    matchingPiece.style.boxShadow = '0 0 20px rgba(16, 185, 129, 0.5)';
                    
                    setTimeout(() => {
                        matchingPiece.style.border = '2px solid #e5e7eb';
                        matchingPiece.style.transform = '';
                        matchingPiece.style.boxShadow = '';
                    }, 4000);
                }
            }
        }
        
        // é‡ç½®æ‹¼å›¾
        function resetPuzzle() {
            gameState.correctPlacements = 0;
            gameState.combo = 0;
            generatePuzzle();
            updateGameDisplay();
        }
        
        // æ£€æŸ¥æˆå°±
        function checkAchievements() {
            achievements.forEach(achievement => {
                if (achievement.unlocked) return;
                
                let shouldUnlock = false;
                
                switch (achievement.id) {
                    case 'first_poem':
                        shouldUnlock = gameState.completedPoems === 1;
                        break;
                    case 'combo_3':
                        shouldUnlock = gameState.combo >= 3;
                        break;
                    case 'speed_master':
                        shouldUnlock = gameState.timeLimit - parseInt(countdownEl.textContent) <= 60;
                        break;
                    case 'poet_scholar':
                        shouldUnlock = gameState.completedPoems >= 10;
                        break;
                    case 'perfect_round':
                        shouldUnlock = gameState.correctPlacements === gameState.currentPoem.lines.length && gameState.combo === gameState.currentPoem.lines.length;
                        break;
                }
                
                if (shouldUnlock) {
                    achievement.unlocked = true;
                    gameState.achievements.push(achievement);
                    showAchievement(achievement);
                    // æŒä¹…åŒ–å·²è·å¾½ç« 
                    try { saveAchievementUnlocked(achievement.id); } catch(_) {}
                }
            });
        }
        
        // æ˜¾ç¤ºæˆå°±
        function showAchievement(achievement) {
            const achievementEl = document.createElement('div');
            achievementEl.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-6 py-3 rounded-full shadow-lg z-50 animate-bounce';
            achievementEl.innerHTML = `
                <span class="text-2xl mr-2">${achievement.icon}</span>
                <span class="font-bold">${achievement.name}</span>
            `;
            document.body.appendChild(achievementEl);
            
            setTimeout(() => {
                achievementEl.remove();
            }, 3000);
        }
        
        // ğŸ‰ æ’’èŠ±åº†ç¥åŠ¨ç”»
        function showCelebration() {
            const overlay = document.createElement('div');
            overlay.className = 'celebration-overlay';
            
            // æ·»åŠ åº†ç¥æ–‡å­—
            const celebrationTexts = ['å¤ªæ£’äº†ï¼', 'çœŸå‰å®³ï¼', 'å¥½æ£’å•Šï¼', 'ç»§ç»­åŠ æ²¹ï¼', 'å®Œç¾ï¼'];
            const randomText = celebrationTexts[Math.floor(Math.random() * celebrationTexts.length)];
            
            const textEl = document.createElement('div');
            textEl.className = 'celebration-text';
            textEl.textContent = randomText;
            overlay.appendChild(textEl);
            
            // ç”Ÿæˆå½©è‰²åœ†ç‚¹æ’’èŠ±
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = (1.5 + Math.random() * 1) + 's';
                overlay.appendChild(confetti);
            }
            
            // ç”Ÿæˆæ˜Ÿæ˜Ÿè¡¨æƒ…ç¬¦å·
            const stars = ['â­', 'ğŸŒŸ', 'âœ¨', 'ğŸ’«', 'ğŸ‰', 'ğŸŠ', 'ğŸ‘', 'ğŸ’–'];
            
            for (let i = 0; i < 20; i++) {
                const star = document.createElement('div');
                star.className = 'star-confetti';
                star.textContent = stars[Math.floor(Math.random() * stars.length)];
                star.style.left = Math.random() * 100 + 'vw';
                star.style.animationDelay = Math.random() * 0.8 + 's';
                star.style.animationDuration = (2 + Math.random() * 1) + 's';
                overlay.appendChild(star);
            }
            
            document.body.appendChild(overlay);
            
            // 3ç§’åç§»é™¤æ’’èŠ±æ•ˆæœ
            setTimeout(() => {
                overlay.remove();
            }, 3000);
        }
        
        // æ˜¾ç¤ºå‡çº§æç¤º
        function showLevelUpNotification() {
            const notification = document.createElement('div');
            notification.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
            notification.innerHTML = `
                <div class="bg-white rounded-3xl p-8 text-center level-complete">
                    <div class="text-6xl mb-4">ğŸ‰</div>
                    <h3 class="text-2xl font-bold text-primary mb-2">å‡çº§äº†ï¼</h3>
                    <p class="text-gray-600">è¿›å…¥ç¬¬ ${gameState.level} å…³</p>
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // ç»“æŸæ¸¸æˆ
        function endGame() {
            gameState.isGameActive = false;
            clearInterval(gameState.timer);
            
            // åˆ‡æ¢åˆ°ç»“æœç•Œé¢
            gameScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            // æ˜¾ç¤ºç»“æœ
            displayResults();
        }
        
        // æ˜¾ç¤ºç»“æœ
        function displayResults() {
            const accuracy = gameState.completedPoems > 0 ? 100 : 0;
            
            document.getElementById('final-score').textContent = gameState.score;
            document.getElementById('final-level').textContent = gameState.level;
            document.getElementById('final-accuracy').textContent = `${accuracy}%`;
            document.getElementById('poems-completed').textContent = gameState.completedPoems;
            
            // æ ¹æ®è¡¨ç°æ˜¾ç¤ºä¸åŒçš„ç»“æœ
            const resultIcon = document.getElementById('result-icon');
            const resultTitle = document.getElementById('result-title');
            
            if (gameState.completedPoems >= 10) {
                resultIcon.textContent = 'ğŸ†';
                resultTitle.textContent = 'è¯—è¯å¤§å¸ˆï¼';
            } else if (gameState.completedPoems >= 5) {
                resultIcon.textContent = 'ğŸ‰';
                resultTitle.textContent = 'å¾ˆæ£’ï¼';
            } else if (gameState.completedPoems >= 1) {
                resultIcon.textContent = 'ğŸ‘';
                resultTitle.textContent = 'ä¸é”™å“¦ï¼';
            } else {
                resultIcon.textContent = 'ğŸ’ª';
                resultTitle.textContent = 'ç»§ç»­åŠªåŠ›ï¼';
            }
            
            // æ˜¾ç¤ºæˆå°±
            displayAchievements();

            // è®°å½•åˆ°å­¦ä¹ ä¸­å¿ƒï¼ˆè¯­æ–‡-è¯—è¯æ‹¼å›¾ï¼‰
            try {
                if (window.recordLearningProgress) {
                    const totalTime = gameState.elapsedTime || 0; // è‹¥æ— ç²¾ç¡®è®¡æ—¶ï¼Œåˆ™å¯ç”¨å…³å¡æ—¶é—´ä¼°ç®—
                    const score = Math.min(100, gameState.score || accuracy);
                    window.recordLearningProgress('chinese', 'poetry', score, totalTime);
                }
            } catch (_) {}
        }
        
        // æ˜¾ç¤ºæˆå°±
        function displayAchievements() {
            const achievementsEl = document.getElementById('achievements');
            
            if (gameState.achievements.length > 0) {
                achievementsEl.innerHTML = `
                    <h3 class="text-lg font-bold mb-4">è·å¾—æˆå°±</h3>
                    <div class="flex flex-wrap justify-center gap-3">
                        ${gameState.achievements.map(achievement => `
                            <div class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-2 rounded-full text-sm">
                                <span class="mr-2">${achievement.icon}</span>
                                <span>${achievement.name}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                achievementsEl.innerHTML = '';
            }
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            resultScreen.classList.add('hidden');
            startGame();
        }
        
        // è¿”å›é¦–é¡µ
        function goHome() {
            resultScreen.classList.add('hidden');
            gameScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }
        
        // å·¥å…·å‡½æ•°ï¼šæ‰“ä¹±æ•°ç»„
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // åˆå§‹åŒ–æŒ‰é’®æ ·å¼
        document.addEventListener('DOMContentLoaded', () => {
            const style = document.createElement('style');
            style.textContent = `
                .poetry-type-btn, .difficulty-btn {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 0.25rem;
                    padding: 1rem;
                    border-radius: 1rem;
                    border: 2px solid #e5e7eb;
                    background: white;
                    cursor: pointer;
                    transition: all 0.3s;
                }
                .poetry-type-btn:hover, .difficulty-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
                }
                .poetry-type-btn.active, .difficulty-btn.active {
                    border-color: #7C3AED;
                    background: linear-gradient(135deg, #7C3AED, #EC4899);
                    color: white;
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
            // è‹¥æ‹¼éŸ³åº“å·²å°±ç»ªï¼Œåˆ™ä¸€æ¬¡æ€§é¢„è®¡ç®—ç¼“å­˜ï¼Œåç»­ç¦»çº¿å¯ç”¨
            ensurePinyinReady(precomputeAllPoemPinyin);
        });
    </script>
</body>
</html>