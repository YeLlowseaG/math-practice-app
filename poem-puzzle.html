<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>诗词拼图游戏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: '楷体', '微软雅黑', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e6f7ff, #f0f9eb);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(90deg, #36d1dc, #5b86e5);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            color: white;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.3);
        }
        
        .game-controls {
            background: rgba(255, 255, 255, 0.92);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .poem-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .poem-btn {
            padding: 12px 25px;
            background: linear-gradient(90deg, #ff9a9e, #fad0c4);
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }
        
        .poem-btn.active {
            background: linear-gradient(90deg, #36d1dc, #5b86e5);
        }
        
        .game-area {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            margin-bottom: 30px;
        }
        
        .poem-info {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(to right, #f8f9fa, #e9ecef);
            border-radius: 15px;
            border: 2px dashed #5b86e5;
        }
        
        .poem-pieces {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }
        
        .poem-piece {
            padding: 15px 25px;
            background: #ffd166;
            border-radius: 12px;
            font-size: 1.2rem;
            cursor: move;
            transition: all 0.3s;
            user-select: none;
        }
        
        .poem-piece:hover {
            background: #ff9a9e;
            color: white;
        }
        
        .poem-target {
            min-height: 200px;
            border: 3px dashed #5b86e5;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            background: rgba(235, 251, 255, 0.5);
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }
        
        .target-line {
            display: flex;
            gap: 10px;
            align-items: center;
            min-height: 50px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.7);
            min-width: 300px;
            justify-content: center;
        }
        
        .btn {
            display: block;
            margin: 25px auto 0;
            padding: 12px 40px;
            background: linear-gradient(90deg, #36d1dc, #5b86e5);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: scale(1.05);
        }
        
        .result-area {
            text-align: center;
            margin-top: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            min-height: 40px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🎯 诗词拼图游戏</h1>
            <p>将诗句碎片拖放到正确位置，完成古诗拼图</p>
        </header>
        
        <div class="game-controls">
            <h2><i class="fas fa-puzzle-piece"></i> 选择古诗 <i class="fas fa-puzzle-piece"></i></h2>
            <div class="poem-selector">
                <button class="poem-btn active" data-poem="yong-e">咏鹅</button>
                <button class="poem-btn" data-poem="hua">画</button>
                <button class="poem-btn" data-poem="min-nong">悯农</button>
                <button class="poem-btn" data-poem="feng">风</button>
            </div>
        </div>
        
        <div class="game-area">
            <div class="poem-info">
                <div class="poem-title" id="poem-title">咏鹅</div>
                <div class="poem-author" id="poem-author">——骆宾王</div>
                <p>请将下面的诗句碎片拖到正确位置，组成完整的古诗：</p>
            </div>
            
            <div class="poem-pieces" id="poem-pieces"></div>
            
            <div class="poem-target" id="poem-target">
                <div class="target-line" data-line="1">请将诗句拖放到此处</div>
                <div class="target-line" data-line="2">请将诗句拖放到此处</div>
                <div class="target-line" data-line="3">请将诗句拖放到此处</div>
                <div class="target-line" data-line="4">请将诗句拖放到此处</div>
            </div>
            
            <div class="result-area" id="result-area"></div>
            
            <button class="btn" id="check-btn">
                <i class="fas fa-check-circle"></i> 检查拼图
            </button>
            
            <button class="btn" id="reset-btn" style="background: linear-gradient(90deg, #ff9a9e, #fad0c4); margin-top: 15px;">
                <i class="fas fa-redo"></i> 重新开始
            </button>
        </div>
    </div>

    <script>
        // 古诗数据
        const poems = {
            'yong-e': {
                title: '咏鹅',
                author: '骆宾王',
                lines: ['鹅，鹅，鹅', '曲项向天歌', '白毛浮绿水', '红掌拨清波']
            },
            'hua': {
                title: '画',
                author: '王维',
                lines: ['远看山有色', '近听水无声', '春去花还在', '人来鸟不惊']
            },
            'min-nong': {
                title: '悯农',
                author: '李绅',
                lines: ['锄禾日当午', '汗滴禾下土', '谁知盘中餐', '粒粒皆辛苦']
            },
            'feng': {
                title: '风',
                author: '李峤',
                lines: ['解落三秋叶', '能开二月花', '过江千尺浪', '入竹万竿斜']
            }
        };
        
        // 游戏状态
        let gameState = {
            currentPoem: 'yong-e',
            placedPieces: {}
        };
        
        // DOM元素
        const poemBtns = document.querySelectorAll('.poem-btn');
        const poemTitle = document.getElementById('poem-title');
        const poemAuthor = document.getElementById('poem-author');
        const poemPieces = document.getElementById('poem-pieces');
        const poemTarget = document.getElementById('poem-target');
        const resultArea = document.getElementById('result-area');
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');
        
        // 加载古诗
        function loadPoem(poemKey) {
            const poem = poems[poemKey];
            poemTitle.textContent = poem.title;
            poemAuthor.textContent = `——${poem.author}`;
            
            // 清空之前的碎片
            poemPieces.innerHTML = '';
            gameState.placedPieces = {};
            
            // 创建诗句碎片
            poem.lines.forEach((line, index) => {
                const piece = document.createElement('div');
                piece.className = 'poem-piece';
                piece.textContent = line;
                piece.dataset.line = index + 1;
                piece.draggable = true;
                
                piece.addEventListener('dragstart', handleDragStart);
                piece.addEventListener('dragend', handleDragEnd);
                
                poemPieces.appendChild(piece);
            });
            
            // 重置目标区域
            const targetLines = poemTarget.querySelectorAll('.target-line');
            targetLines.forEach(line => {
                line.innerHTML = '请将诗句拖放到此处';
            });
            
            // 重置结果
            resultArea.innerHTML = '';
        }
        
        // 拖拽开始
        function handleDragStart(e) {
            e.target.style.opacity = '0.5';
            e.dataTransfer.setData('text/plain', e.target.textContent);
            e.dataTransfer.setData('line', e.target.dataset.line);
        }
        
        // 拖拽结束
        function handleDragEnd(e) {
            e.target.style.opacity = '1';
        }
        
        // 拖拽放置
        function handleDrop(e) {
            e.preventDefault();
            const targetLine = e.target.closest('.target-line');
            if (!targetLine) return;
            
            const text = e.dataTransfer.getData('text/plain');
            const lineNum = e.dataTransfer.getData('line');
            
            // 检查是否已经有诗句在这一行
            if (gameState.placedPieces[targetLine.dataset.line]) {
                return;
            }
            
            // 放置诗句
            targetLine.innerHTML = `<div class="poem-piece" data-line="${lineNum}">${text}</div>`;
            gameState.placedPieces[targetLine.dataset.line] = lineNum;
            
            // 移除原始碎片
            const originalPiece = document.querySelector(`.poem-piece[data-line="${lineNum}"]:not([style*="opacity"])`);
            if (originalPiece) {
                originalPiece.remove();
            }
        }
        
        // 检查拼图
        function checkPuzzle() {
            const poem = poems[gameState.currentPoem];
            const isCorrect = Object.keys(gameState.placedPieces).length === 4 &&
                             Object.values(gameState.placedPieces).every((line, index) => 
                                 parseInt(line) === index + 1);
            
            if (isCorrect) {
                resultArea.innerHTML = '<span style="color:#06d6a0; font-size: 1.5rem;">✓ 太棒了！拼图正确！</span>';
            } else {
                resultArea.innerHTML = '<span style="color:#ef476f; font-size: 1.5rem;">顺序不对哦，再试试看！</span>';
            }
        }
        
        // 事件监听器
        poemBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // 移除所有active类
                poemBtns.forEach(b => b.classList.remove('active'));
                // 添加active类到当前按钮
                this.classList.add('active');
                
                // 切换古诗
                gameState.currentPoem = this.dataset.poem;
                loadPoem(gameState.currentPoem);
            });
        });
        
        // 拖拽事件监听器
        poemTarget.addEventListener('dragover', e => e.preventDefault());
        poemTarget.addEventListener('drop', handleDrop);
        
        // 按钮事件监听器
        checkBtn.addEventListener('click', checkPuzzle);
        resetBtn.addEventListener('click', () => loadPoem(gameState.currentPoem));
        
        // 初始化游戏
        loadPoem('yong-e');
    </script>
</body>
</html>
