<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯—è¯æ‹¼å›¾æ¸¸æˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'æ¥·ä½“', 'å¾®è½¯é›…é»‘', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e6f7ff, #f0f9eb);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(90deg, #36d1dc, #5b86e5);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            color: white;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.3);
        }
        
        .game-controls {
            background: rgba(255, 255, 255, 0.92);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .poem-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .poem-btn {
            padding: 12px 25px;
            background: linear-gradient(90deg, #ff9a9e, #fad0c4);
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }
        
        .poem-btn.active {
            background: linear-gradient(90deg, #36d1dc, #5b86e5);
        }
        
        .game-area {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            margin-bottom: 30px;
        }
        
        .poem-info {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(to right, #f8f9fa, #e9ecef);
            border-radius: 15px;
            border: 2px dashed #5b86e5;
        }
        
        .poem-pieces {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }
        
        .poem-piece {
            padding: 15px 25px;
            background: #ffd166;
            border-radius: 12px;
            font-size: 1.2rem;
            cursor: move;
            transition: all 0.3s;
            user-select: none;
        }
        
        .poem-piece:hover {
            background: #ff9a9e;
            color: white;
        }
        
        .poem-target {
            min-height: 200px;
            border: 3px dashed #5b86e5;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            background: rgba(235, 251, 255, 0.5);
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }
        
        .target-line {
            display: flex;
            gap: 10px;
            align-items: center;
            min-height: 50px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.7);
            min-width: 300px;
            justify-content: center;
        }
        
        .btn {
            display: block;
            margin: 25px auto 0;
            padding: 12px 40px;
            background: linear-gradient(90deg, #36d1dc, #5b86e5);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: scale(1.05);
        }
        
        .result-area {
            text-align: center;
            margin-top: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            min-height: 40px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¯ è¯—è¯æ‹¼å›¾æ¸¸æˆ</h1>
            <p>å°†è¯—å¥ç¢ç‰‡æ‹–æ”¾åˆ°æ­£ç¡®ä½ç½®ï¼Œå®Œæˆå¤è¯—æ‹¼å›¾</p>
        </header>
        
        <div class="game-controls">
            <h2><i class="fas fa-puzzle-piece"></i> é€‰æ‹©å¤è¯— <i class="fas fa-puzzle-piece"></i></h2>
            <div class="poem-selector">
                <button class="poem-btn active" data-poem="yong-e">å’é¹…</button>
                <button class="poem-btn" data-poem="hua">ç”»</button>
                <button class="poem-btn" data-poem="min-nong">æ‚¯å†œ</button>
                <button class="poem-btn" data-poem="feng">é£</button>
            </div>
        </div>
        
        <div class="game-area">
            <div class="poem-info">
                <div class="poem-title" id="poem-title">å’é¹…</div>
                <div class="poem-author" id="poem-author">â€”â€”éª†å®¾ç‹</div>
                <p>è¯·å°†ä¸‹é¢çš„è¯—å¥ç¢ç‰‡æ‹–åˆ°æ­£ç¡®ä½ç½®ï¼Œç»„æˆå®Œæ•´çš„å¤è¯—ï¼š</p>
            </div>
            
            <div class="poem-pieces" id="poem-pieces"></div>
            
            <div class="poem-target" id="poem-target">
                <div class="target-line" data-line="1">è¯·å°†è¯—å¥æ‹–æ”¾åˆ°æ­¤å¤„</div>
                <div class="target-line" data-line="2">è¯·å°†è¯—å¥æ‹–æ”¾åˆ°æ­¤å¤„</div>
                <div class="target-line" data-line="3">è¯·å°†è¯—å¥æ‹–æ”¾åˆ°æ­¤å¤„</div>
                <div class="target-line" data-line="4">è¯·å°†è¯—å¥æ‹–æ”¾åˆ°æ­¤å¤„</div>
            </div>
            
            <div class="result-area" id="result-area"></div>
            
            <button class="btn" id="check-btn">
                <i class="fas fa-check-circle"></i> æ£€æŸ¥æ‹¼å›¾
            </button>
            
            <button class="btn" id="reset-btn" style="background: linear-gradient(90deg, #ff9a9e, #fad0c4); margin-top: 15px;">
                <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹
            </button>
        </div>
    </div>

    <script>
        // å¤è¯—æ•°æ®
        const poems = {
            'yong-e': {
                title: 'å’é¹…',
                author: 'éª†å®¾ç‹',
                lines: ['é¹…ï¼Œé¹…ï¼Œé¹…', 'æ›²é¡¹å‘å¤©æ­Œ', 'ç™½æ¯›æµ®ç»¿æ°´', 'çº¢æŒæ‹¨æ¸…æ³¢']
            },
            'hua': {
                title: 'ç”»',
                author: 'ç‹ç»´',
                lines: ['è¿œçœ‹å±±æœ‰è‰²', 'è¿‘å¬æ°´æ— å£°', 'æ˜¥å»èŠ±è¿˜åœ¨', 'äººæ¥é¸Ÿä¸æƒŠ']
            },
            'min-nong': {
                title: 'æ‚¯å†œ',
                author: 'æç»…',
                lines: ['é”„ç¦¾æ—¥å½“åˆ', 'æ±—æ»´ç¦¾ä¸‹åœŸ', 'è°çŸ¥ç›˜ä¸­é¤', 'ç²’ç²’çš†è¾›è‹¦']
            },
            'feng': {
                title: 'é£',
                author: 'æå³¤',
                lines: ['è§£è½ä¸‰ç§‹å¶', 'èƒ½å¼€äºŒæœˆèŠ±', 'è¿‡æ±Ÿåƒå°ºæµª', 'å…¥ç«¹ä¸‡ç«¿æ–œ']
            }
        };
        
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            currentPoem: 'yong-e',
            placedPieces: {}
        };
        
        // DOMå…ƒç´ 
        const poemBtns = document.querySelectorAll('.poem-btn');
        const poemTitle = document.getElementById('poem-title');
        const poemAuthor = document.getElementById('poem-author');
        const poemPieces = document.getElementById('poem-pieces');
        const poemTarget = document.getElementById('poem-target');
        const resultArea = document.getElementById('result-area');
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');
        
        // åŠ è½½å¤è¯—
        function loadPoem(poemKey) {
            const poem = poems[poemKey];
            poemTitle.textContent = poem.title;
            poemAuthor.textContent = `â€”â€”${poem.author}`;
            
            // æ¸…ç©ºä¹‹å‰çš„ç¢ç‰‡
            poemPieces.innerHTML = '';
            gameState.placedPieces = {};
            
            // åˆ›å»ºè¯—å¥ç¢ç‰‡
            poem.lines.forEach((line, index) => {
                const piece = document.createElement('div');
                piece.className = 'poem-piece';
                piece.textContent = line;
                piece.dataset.line = index + 1;
                piece.draggable = true;
                
                piece.addEventListener('dragstart', handleDragStart);
                piece.addEventListener('dragend', handleDragEnd);
                
                poemPieces.appendChild(piece);
            });
            
            // é‡ç½®ç›®æ ‡åŒºåŸŸ
            const targetLines = poemTarget.querySelectorAll('.target-line');
            targetLines.forEach(line => {
                line.innerHTML = 'è¯·å°†è¯—å¥æ‹–æ”¾åˆ°æ­¤å¤„';
            });
            
            // é‡ç½®ç»“æœ
            resultArea.innerHTML = '';
        }
        
        // æ‹–æ‹½å¼€å§‹
        function handleDragStart(e) {
            e.target.style.opacity = '0.5';
            e.dataTransfer.setData('text/plain', e.target.textContent);
            e.dataTransfer.setData('line', e.target.dataset.line);
        }
        
        // æ‹–æ‹½ç»“æŸ
        function handleDragEnd(e) {
            e.target.style.opacity = '1';
        }
        
        // æ‹–æ‹½æ”¾ç½®
        function handleDrop(e) {
            e.preventDefault();
            const targetLine = e.target.closest('.target-line');
            if (!targetLine) return;
            
            const text = e.dataTransfer.getData('text/plain');
            const lineNum = e.dataTransfer.getData('line');
            
            // æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰è¯—å¥åœ¨è¿™ä¸€è¡Œ
            if (gameState.placedPieces[targetLine.dataset.line]) {
                return;
            }
            
            // æ”¾ç½®è¯—å¥
            targetLine.innerHTML = `<div class="poem-piece" data-line="${lineNum}">${text}</div>`;
            gameState.placedPieces[targetLine.dataset.line] = lineNum;
            
            // ç§»é™¤åŸå§‹ç¢ç‰‡
            const originalPiece = document.querySelector(`.poem-piece[data-line="${lineNum}"]:not([style*="opacity"])`);
            if (originalPiece) {
                originalPiece.remove();
            }
        }
        
        // æ£€æŸ¥æ‹¼å›¾
        function checkPuzzle() {
            const poem = poems[gameState.currentPoem];
            const isCorrect = Object.keys(gameState.placedPieces).length === 4 &&
                             Object.values(gameState.placedPieces).every((line, index) => 
                                 parseInt(line) === index + 1);
            
            if (isCorrect) {
                resultArea.innerHTML = '<span style="color:#06d6a0; font-size: 1.5rem;">âœ“ å¤ªæ£’äº†ï¼æ‹¼å›¾æ­£ç¡®ï¼</span>';
            } else {
                resultArea.innerHTML = '<span style="color:#ef476f; font-size: 1.5rem;">é¡ºåºä¸å¯¹å“¦ï¼Œå†è¯•è¯•çœ‹ï¼</span>';
            }
        }
        
        // äº‹ä»¶ç›‘å¬å™¨
        poemBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // ç§»é™¤æ‰€æœ‰activeç±»
                poemBtns.forEach(b => b.classList.remove('active'));
                // æ·»åŠ activeç±»åˆ°å½“å‰æŒ‰é’®
                this.classList.add('active');
                
                // åˆ‡æ¢å¤è¯—
                gameState.currentPoem = this.dataset.poem;
                loadPoem(gameState.currentPoem);
            });
        });
        
        // æ‹–æ‹½äº‹ä»¶ç›‘å¬å™¨
        poemTarget.addEventListener('dragover', e => e.preventDefault());
        poemTarget.addEventListener('drop', handleDrop);
        
        // æŒ‰é’®äº‹ä»¶ç›‘å¬å™¨
        checkBtn.addEventListener('click', checkPuzzle);
        resetBtn.addEventListener('click', () => loadPoem(gameState.currentPoem));
        
        // åˆå§‹åŒ–æ¸¸æˆ
        loadPoem('yong-e');
    </script>
</body>
</html>
