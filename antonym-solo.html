<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åä¹‰è¯æŒ‘æˆ˜ - å•äººé—¯å…³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- é…ç½®Tailwindè‡ªå®šä¹‰é¢œè‰²å’Œå­—ä½“ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        danger: '#EF4444',
                        neutral: '#F7FFF7',
                        text: '#1F2937'
                    },
                    fontFamily: {
                        kids: ['"Comic Sans MS"', '"Marker Felt"', 'Arial', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            }
            .bounce-light {
                animation: bounce-light 0.5s ease infinite alternate;
            }
            .pulse-slow {
                animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
            .scale-hover {
                transition: transform 0.2s;
            }
            .scale-hover:hover {
                transform: scale(1.05);
            }
            .correct-animation {
                animation: correct 0.6s ease-in-out;
            }
            .wrong-animation {
                animation: wrong 0.6s ease-in-out;
            }
            .level-complete {
                animation: levelComplete 1s ease-in-out;
            }
            @keyframes bounce-light {
                from { transform: translateY(0); }
                to { transform: translateY(-5px); }
            }
            @keyframes correct {
                0% { transform: scale(1); background-color: #10B981; }
                50% { transform: scale(1.1); background-color: #34D399; }
                100% { transform: scale(1); background-color: #10B981; }
            }
            @keyframes wrong {
                0% { transform: translateX(0); background-color: #EF4444; }
                25% { transform: translateX(-5px); background-color: #F87171; }
                75% { transform: translateX(5px); background-color: #F87171; }
                100% { transform: translateX(0); background-color: #EF4444; }
            }
            @keyframes levelComplete {
                0% { transform: scale(1) rotate(0deg); }
                25% { transform: scale(1.2) rotate(5deg); }
                75% { transform: scale(1.2) rotate(-5deg); }
                100% { transform: scale(1) rotate(0deg); }
            }
            @keyframes button-press {
                0% { transform: scale(1); }
                50% { transform: scale(0.95); }
                100% { transform: scale(1); }
            }
            
            .button-press {
                animation: button-press 0.2s ease-in-out;
            }
            
            /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
            @media (max-width: 768px) {
                .option-btn {
                    min-height: 64px;
                    font-size: 1.1rem;
                    padding: 16px 12px;
                }
                .float-animation {
                    animation: none;
                }
            }
            
            @media (max-width: 480px) {
                .option-btn {
                    min-height: 72px;
                    font-size: 1rem;
                    padding: 20px 12px;
                }
                #question-text {
                    font-size: 1.5rem;
                }
            }
            
            .ripple {
                position: absolute;
                border-radius: 50%;
                background: rgba(59, 130, 246, 0.3);
                transform: scale(0);
                animation: ripple-animation 0.6s linear;
                pointer-events: none;
            }
            
            @keyframes ripple-animation {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
            

            

        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen font-kids text-text overflow-hidden">
    
    <!-- å¼€å§‹ç•Œé¢ -->
    <div id="start-screen" class="flex flex-col items-center justify-center h-screen p-6 relative">
        <div class="text-center max-w-lg mx-auto bg-white rounded-3xl shadow-2xl p-8 transform transition-all duration-500">
            <h1 class="text-[clamp(2rem,5vw,3rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary mb-4">åä¹‰è¯æŒ‘æˆ˜</h1>
            <p class="text-lg mb-6 text-gray-600">å•äººé—¯å…³æ¨¡å¼<br>æŒ‘æˆ˜ä½ çš„åä¹‰è¯çŸ¥è¯†ï¼</p>
            
            <div class="flex justify-center mb-8">
                <div class="w-32 h-32 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-white text-5xl shadow-lg relative overflow-hidden">
                    <i class="fa fa-user"></i>
                    <div class="absolute inset-0 bg-white opacity-20 rounded-full animate-ping"></div>
                </div>
            </div>
            
            <!-- éš¾åº¦é€‰æ‹© -->
            <div class="mb-6">
                <h3 class="text-lg font-bold mb-4">é€‰æ‹©éš¾åº¦</h3>
                <div class="flex justify-center gap-3">
                    <button class="difficulty-btn active" data-difficulty="easy">
                        <span class="text-lg">ğŸ˜Š ç®€å•</span>
                        <span class="text-xs">10ç§’/é¢˜</span>
                    </button>
                    <button class="difficulty-btn" data-difficulty="medium">
                        <span class="text-lg">ğŸ¤” ä¸­ç­‰</span>
                        <span class="text-xs">8ç§’/é¢˜</span>
                    </button>
                    <button class="difficulty-btn" data-difficulty="hard">
                        <span class="text-lg">ğŸ”¥ å›°éš¾</span>
                        <span class="text-xs">6ç§’/é¢˜</span>
                    </button>
                </div>
            </div>
            
            <!-- å€’è®¡æ—¶å¼€å…³ -->
            <div class="mb-6 flex items-center justify-center gap-4 bg-gray-50 rounded-2xl p-4">
                <i class="fa fa-clock-o text-gray-600"></i>
                <span class="text-gray-700 font-medium">å€’è®¡æ—¶æ¨¡å¼</span>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="timer-toggle" class="sr-only peer" checked>
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
                <span class="text-xs text-gray-500" id="timer-description">æ ¹æ®éš¾åº¦é™æ—¶</span>
            </div>
            
            <button id="start-btn" class="bg-accent hover:bg-yellow-400 text-white font-bold py-4 px-8 rounded-full text-xl shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                å¼€å§‹æŒ‘æˆ˜ <i class="fa fa-play ml-2"></i>
            </button>
            
            <div class="mt-6 text-sm text-gray-500">
                <p>é€‚åˆå¹´é¾„ï¼š6-12å²</p>
                <p>ç›®æ ‡ï¼šè¿ç»­ç­”å¯¹è·å¾—é«˜åˆ†ï¼</p>
            </div>
        </div>
        
        <!-- è£…é¥°å…ƒç´  -->
        <div class="absolute top-10 left-10 text-5xl text-primary/30">
            <i class="fa fa-star bounce-light"></i>
        </div>
        <div class="absolute bottom-10 right-10 text-5xl text-secondary/30">
            <i class="fa fa-heart bounce-light" style="animation-delay: 0.3s"></i>
        </div>
        <div class="absolute top-1/4 right-20 text-4xl text-accent/30">
            <i class="fa fa-trophy bounce-light" style="animation-delay: 0.6s"></i>
        </div>
    </div>

    <!-- æ¸¸æˆç•Œé¢ -->
    <div id="game-screen" class="hidden h-screen flex flex-col">
        <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
        <div class="flex justify-between items-center p-3 bg-white/80 backdrop-blur-sm shadow-md">
            <!-- å·¦ä¾§ä¿¡æ¯ -->
            <div class="flex items-center gap-4">
                <div class="bg-primary px-4 py-2 rounded-full text-white font-bold shadow-md">
                    <span>å…³å¡ </span><span id="level-display">1</span>
                </div>
                <div class="bg-secondary px-4 py-2 rounded-full text-white font-bold shadow-md">
                    <span>è¿å‡» </span><span id="combo-display">0</span>
                </div>
            </div>
            
            <!-- ä¸­é—´è®¡æ—¶å™¨ -->
            <div id="timer" class="bg-accent text-white px-6 py-3 rounded-full shadow-md">
                <i class="fa fa-clock-o mr-2"></i>
                <span id="countdown" class="text-xl font-bold">å€’è®¡æ—¶ 10.0</span>
            </div>
            
            <!-- å³ä¾§åˆ†æ•° -->
            <div class="bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 rounded-full text-white font-bold shadow-md">
                <i class="fa fa-star mr-2"></i>
                <span id="score-display">0</span>
            </div>
        </div>
        
        <!-- å…³å¡è¿›åº¦æ¡ -->
        <div class="bg-gray-100 border-b border-gray-200">
            <div class="px-4 py-2">
                <div class="flex items-center justify-between mb-2">
                    <span id="progress-text" class="text-sm font-medium text-gray-600">ç¬¬1å…³</span>
                    <span id="progress-percentage" class="text-sm font-medium text-gray-600">0/10</span>
                </div>
                <div class="bg-gray-200 h-3 rounded-full overflow-hidden">
                    <div id="progress-bar" class="bg-gradient-to-r from-primary to-secondary h-full transition-all duration-500 ease-out"></div>
                </div>
            </div>
        </div>
        
        <!-- ä¸»è¦æ¸¸æˆåŒºåŸŸ -->
        <div class="flex-1 flex flex-col items-center p-6">
            <!-- åé¦ˆä¿¡æ¯ - ç§»åˆ°é¡¶éƒ¨ -->
            <div id="feedback" class="mb-4 text-center text-3xl font-bold h-16 flex items-center justify-center">
                <!-- åé¦ˆä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸ -->
            </div>
            
            <!-- ç›®æ ‡å­—æ˜¾ç¤º -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 text-center mb-6 transform transition-all duration-500">
                <p class="text-gray-500 text-lg mb-2">æ‰¾å‡ºå®ƒçš„åä¹‰è¯</p>
                <p class="text-[clamp(2.5rem,6vw,4rem)] font-bold text-text" id="target-word">å¤§</p>
                <p class="text-gray-400 text-lg mt-2" id="target-pinyin">dÃ </p>
            </div>
            
            <!-- é€‰é¡¹åŒºåŸŸ -->
            <div id="options-container" class="grid grid-cols-2 gap-4 max-w-xl w-full mt-auto mb-4">
                <!-- é€‰é¡¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>
    
    <!-- ç»“æœç•Œé¢ -->
    <div id="result-screen" class="hidden flex flex-col items-center justify-center h-screen p-6 bg-white/90 backdrop-blur-md">
        <div class="text-center max-w-lg mx-auto">
            <div id="result-icon" class="text-8xl mb-6">ğŸ‰</div>
            <h2 id="result-title" class="text-[clamp(2rem,5vw,3rem)] font-bold mb-6">å¤ªæ£’äº†ï¼</h2>
            
            <div class="bg-neutral rounded-2xl shadow-lg p-8 mb-8">
                <div class="grid grid-cols-2 gap-6">
                    <div class="text-center">
                        <div class="text-primary text-3xl font-bold" id="final-score">0</div>
                        <div class="text-gray-600">æ€»åˆ†æ•°</div>
                    </div>
                    <div class="text-center">
                        <div class="text-secondary text-3xl font-bold" id="final-level">1</div>
                        <div class="text-gray-600">åˆ°è¾¾å…³å¡</div>
                    </div>
                    <div class="text-center">
                        <div class="text-accent text-3xl font-bold" id="final-accuracy">0%</div>
                        <div class="text-gray-600">å‡†ç¡®ç‡</div>
                    </div>
                    <div class="text-center">
                        <div class="text-purple-500 text-3xl font-bold" id="max-combo">0</div>
                        <div class="text-gray-600">æœ€é«˜è¿å‡»</div>
                    </div>
                </div>
            </div>
            
            <!-- æˆå°±æ˜¾ç¤º -->
            <div id="achievements" class="mb-8">
                <!-- æˆå°±å¾½ç« ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="flex gap-4 justify-center">
                <button id="restart-btn" class="bg-primary hover:bg-indigo-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                    å†æ¥ä¸€æ¬¡ <i class="fa fa-refresh ml-2"></i>
                </button>
                <button id="home-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg transform transition-all duration-300 hover:scale-105 active:scale-95">
                    è¿”å›é¦–é¡µ <i class="fa fa-home ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // åä¹‰è¯æ•°æ®åº“ - æŒ‰éš¾åº¦åˆ†çº§ï¼ˆå«æ‹¼éŸ³ï¼‰- 200å¯¹åä¹‰è¯
        const antonymsList = {
            easy: [
                // åŸºç¡€å½¢å®¹è¯ç±»
                { word: "å¤§", pinyin: "dÃ ", antonym: "å°", antonymPinyin: "xiÇo" },
                { word: "å¤š", pinyin: "duÅ", antonym: "å°‘", antonymPinyin: "shÇo" },
                { word: "é«˜", pinyin: "gÄo", antonym: "çŸ®", antonymPinyin: "Çi" },
                { word: "èƒ–", pinyin: "pÃ ng", antonym: "ç˜¦", antonymPinyin: "shÃ²u" },
                { word: "é•¿", pinyin: "chÃ¡ng", antonym: "çŸ­", antonymPinyin: "duÇn" },
                { word: "å®½", pinyin: "kuÄn", antonym: "çª„", antonymPinyin: "zhÇi" },
                { word: "åš", pinyin: "hÃ²u", antonym: "è–„", antonymPinyin: "bÃ¡o" },
                { word: "ç²—", pinyin: "cÅ«", antonym: "ç»†", antonymPinyin: "xÃ¬" },
                { word: "å¿«", pinyin: "kuÃ i", antonym: "æ…¢", antonymPinyin: "mÃ n" },
                { word: "è¿œ", pinyin: "yuÇn", antonym: "è¿‘", antonymPinyin: "jÃ¬n" },
                { word: "é»‘", pinyin: "hÄ“i", antonym: "ç™½", antonymPinyin: "bÃ¡i" },
                { word: "çº¢", pinyin: "hÃ³ng", antonym: "ç»¿", antonymPinyin: "lÇœ" },
                { word: "æ˜", pinyin: "mÃ­ng", antonym: "æš—", antonymPinyin: "Ã n" },
                { word: "äº®", pinyin: "liÃ ng", antonym: "æš—", antonymPinyin: "Ã n" },
                { word: "ç”œ", pinyin: "tiÃ¡n", antonym: "è‹¦", antonymPinyin: "kÇ”" },
                { word: "é…¸", pinyin: "suÄn", antonym: "ç”œ", antonymPinyin: "tiÃ¡n" },
                { word: "å’¸", pinyin: "xiÃ¡n", antonym: "æ·¡", antonymPinyin: "dÃ n" },
                { word: "å†·", pinyin: "lÄ›ng", antonym: "çƒ­", antonymPinyin: "rÃ¨" },
                { word: "æ¸©", pinyin: "wÄ“n", antonym: "å‡‰", antonymPinyin: "liÃ¡ng" },
                { word: "å¹²", pinyin: "gÄn", antonym: "æ¹¿", antonymPinyin: "shÄ«" },
                { word: "è½¯", pinyin: "ruÇn", antonym: "ç¡¬", antonymPinyin: "yÃ¬ng" },
                { word: "æ¾", pinyin: "sÅng", antonym: "ç´§", antonymPinyin: "jÇn" },
                { word: "æ–°", pinyin: "xÄ«n", antonym: "æ—§", antonymPinyin: "jiÃ¹" },
                { word: "å¥½", pinyin: "hÇo", antonym: "å", antonymPinyin: "huÃ i" },
                { word: "çœŸ", pinyin: "zhÄ“n", antonym: "å‡", antonymPinyin: "jiÇ" },
                { word: "ç¾", pinyin: "mÄ›i", antonym: "ä¸‘", antonymPinyin: "chÇ’u" },
                { word: "é¦™", pinyin: "xiÄng", antonym: "è‡­", antonymPinyin: "chÃ²u" },
                { word: "è½»", pinyin: "qÄ«ng", antonym: "é‡", antonymPinyin: "zhÃ²ng" },
                { word: "æ·±", pinyin: "shÄ“n", antonym: "æµ…", antonymPinyin: "qiÇn" },
                { word: "æµ“", pinyin: "nÃ³ng", antonym: "æ·¡", antonymPinyin: "dÃ n" },
                { word: "ç†Ÿ", pinyin: "shÃº", antonym: "ç”Ÿ", antonymPinyin: "shÄ“ng" },
                { word: "æ­£", pinyin: "zhÃ¨ng", antonym: "æ­ª", antonymPinyin: "wÄi" },
                { word: "ç›´", pinyin: "zhÃ­", antonym: "å¼¯", antonymPinyin: "wÄn" },
                { word: "æ»¡", pinyin: "mÇn", antonym: "ç©º", antonymPinyin: "kÅng" },
                { word: "å°–", pinyin: "jiÄn", antonym: "é’", antonymPinyin: "dÃ¹n" },
                // åŸºç¡€åŠ¨è¯ç±»
                { word: "å¼€", pinyin: "kÄi", antonym: "å…³", antonymPinyin: "guÄn" },
                { word: "è¿›", pinyin: "jÃ¬n", antonym: "å‡º", antonymPinyin: "chÅ«" },
                { word: "æ¥", pinyin: "lÃ¡i", antonym: "å»", antonymPinyin: "qÃ¹" },
                { word: "ä¸Š", pinyin: "shÃ ng", antonym: "ä¸‹", antonymPinyin: "xiÃ " },
                { word: "å‡", pinyin: "shÄ“ng", antonym: "é™", antonymPinyin: "jiÃ ng" },
                { word: "èµ·", pinyin: "qÇ", antonym: "è½", antonymPinyin: "luÃ²" },
                { word: "æ¨", pinyin: "tuÄ«", antonym: "æ‹‰", antonymPinyin: "lÄ" },
                { word: "æ¶¨", pinyin: "zhÇng", antonym: "è½", antonymPinyin: "luÃ²" },
                { word: "å¾—", pinyin: "dÃ©", antonym: "å¤±", antonymPinyin: "shÄ«" },
                { word: "ä¹°", pinyin: "mÇi", antonym: "å–", antonymPinyin: "mÃ i" },
                { word: "çˆ±", pinyin: "Ã i", antonym: "æ¨", antonymPinyin: "hÃ¨n" },
                { word: "å“­", pinyin: "kÅ«", antonym: "ç¬‘", antonymPinyin: "xiÃ o" },
                { word: "é†’", pinyin: "xÇng", antonym: "ç¡", antonymPinyin: "shuÃ¬" },
                { word: "è¿", pinyin: "yÃ­ng", antonym: "é€", antonymPinyin: "sÃ²ng" },
                { word: "é—®", pinyin: "wÃ¨n", antonym: "ç­”", antonymPinyin: "dÃ¡" },
                { word: "åˆ†", pinyin: "fÄ“n", antonym: "åˆ", antonymPinyin: "hÃ©" },
                { word: "æ­»", pinyin: "sÇ", antonym: "æ´»", antonymPinyin: "huÃ³" },
                { word: "å­˜", pinyin: "cÃºn", antonym: "äº¡", antonymPinyin: "wÃ¡ng" },
                { word: "æ”¶", pinyin: "shÅu", antonym: "æ”¾", antonymPinyin: "fÃ ng" },
                { word: "ä¼¸", pinyin: "shÄ“n", antonym: "ç¼©", antonymPinyin: "suÅ" },
                { word: "ä¸¾", pinyin: "jÇ”", antonym: "æ”¾", antonymPinyin: "fÃ ng" },
                { word: "åŠ ", pinyin: "jiÄ", antonym: "å‡", antonymPinyin: "jiÇn" },
                { word: "èƒœ", pinyin: "shÃ¨ng", antonym: "è´¥", antonymPinyin: "bÃ i" },
                { word: "è¾“", pinyin: "shÅ«", antonym: "èµ¢", antonymPinyin: "yÃ­ng" },
                { word: "æœ‰", pinyin: "yÇ’u", antonym: "æ— ", antonymPinyin: "wÃº" },
                { word: "åŠ¨", pinyin: "dÃ²ng", antonym: "é™", antonymPinyin: "jÃ¬ng" },
                { word: "æ”»", pinyin: "gÅng", antonym: "å®ˆ", antonymPinyin: "shÇ’u" },
                { word: "ä¼ ", pinyin: "chuÃ¡n", antonym: "æ¥", antonymPinyin: "jiÄ“" },
                { word: "æ¶¨", pinyin: "zhÇng", antonym: "è·Œ", antonymPinyin: "diÄ“" },
                { word: "å¢", pinyin: "zÄ“ng", antonym: "å‡", antonymPinyin: "jiÇn" },
                { word: "ç”Ÿ", pinyin: "shÄ“ng", antonym: "ç­", antonymPinyin: "miÃ¨" },
                { word: "å§‹", pinyin: "shÇ", antonym: "ç»ˆ", antonymPinyin: "zhÅng" },
                { word: "æ­¢", pinyin: "zhÇ", antonym: "è¡Œ", antonymPinyin: "xÃ­ng" },
                { word: "è¿½", pinyin: "zhuÄ«", antonym: "é€ƒ", antonymPinyin: "tÃ¡o" },
                { word: "è½", pinyin: "luÃ²", antonym: "å‡", antonymPinyin: "shÄ“ng" },
                { word: "å€Ÿ", pinyin: "jiÃ¨", antonym: "è¿˜", antonymPinyin: "huÃ¡n" },
                { word: "å–", pinyin: "qÇ”", antonym: "èˆ", antonymPinyin: "shÄ›" },
                { word: "å", pinyin: "tÅ«n", antonym: "å", antonymPinyin: "tÇ”" },
                { word: "å¸", pinyin: "xÄ«", antonym: "å‘¼", antonymPinyin: "hÅ«" },
                // æ–¹ä½è¯ç±»
                { word: "å‰", pinyin: "qiÃ¡n", antonym: "å", antonymPinyin: "hÃ²u" },
                { word: "å·¦", pinyin: "zuÇ’", antonym: "å³", antonymPinyin: "yÃ²u" },
                { word: "é‡Œ", pinyin: "lÇ", antonym: "å¤–", antonymPinyin: "wÃ i" },
                { word: "ä¸œ", pinyin: "dÅng", antonym: "è¥¿", antonymPinyin: "xÄ«" },
                { word: "å—", pinyin: "nÃ¡n", antonym: "åŒ—", antonymPinyin: "bÄ›i" },
                { word: "å†…", pinyin: "nÃ¨i", antonym: "å¤–", antonymPinyin: "wÃ i" },
                { word: "è¿œ", pinyin: "yuÇn", antonym: "è¿‘", antonymPinyin: "jÃ¬n" },
                { word: "é«˜", pinyin: "gÄo", antonym: "ä½", antonymPinyin: "dÄ«" },
                { word: "æ¨ª", pinyin: "hÃ©ng", antonym: "ç«–", antonymPinyin: "shÃ¹" },
                { word: "æ–œ", pinyin: "xiÃ©", antonym: "æ­£", antonymPinyin: "zhÃ¨ng" },
                { word: "å¤©", pinyin: "tiÄn", antonym: "åœ°", antonymPinyin: "dÃ¬" },
                { word: "æ˜¼", pinyin: "zhÃ²u", antonym: "å¤œ", antonymPinyin: "yÃ¨" },
                { word: "æ˜¥", pinyin: "chÅ«n", antonym: "ç§‹", antonymPinyin: "qiÅ«" },
                { word: "å¤", pinyin: "xiÃ ", antonym: "å†¬", antonymPinyin: "dÅng" },
                { word: "æ—©", pinyin: "zÇo", antonym: "æ™š", antonymPinyin: "wÇn" },
                { word: "æ™¨", pinyin: "chÃ©n", antonym: "æ˜", antonymPinyin: "hÅ«n" },
                { word: "å¤", pinyin: "gÇ”", antonym: "ä»Š", antonymPinyin: "jÄ«n" },
                { word: "æœ", pinyin: "zhÄo", antonym: "æš®", antonymPinyin: "mÃ¹" },
                { word: "é¦–", pinyin: "shÇ’u", antonym: "å°¾", antonymPinyin: "wÄ›i" }
            ],
            medium: [
                // å¤æ‚å½¢å®¹è¯ç±»
                { word: "å…‰æ»‘", pinyin: "guÄng huÃ¡", antonym: "ç²—ç³™", antonymPinyin: "cÅ« cÄo" },
                { word: "æ•´é½", pinyin: "zhÄ›ng qÃ­", antonym: "å‡Œä¹±", antonymPinyin: "lÃ­ng luÃ n" },
                { word: "å¹²å‡€", pinyin: "gÄn jÃ¬ng", antonym: "è‚®è„", antonymPinyin: "Äng zÄng" },
                { word: "å®‰é™", pinyin: "Än jÃ¬ng", antonym: "çƒ­é—¹", antonymPinyin: "rÃ¨ nÃ o" },
                { word: "å‹¤åŠ³", pinyin: "qÃ­n lÃ¡o", antonym: "æ‡’æƒ°", antonymPinyin: "lÇn duÃ²" },
                { word: "èªæ˜", pinyin: "cÅng mÃ­ng", antonym: "æ„šè ¢", antonymPinyin: "yÃº chÇ”n" },
                { word: "å‹‡æ•¢", pinyin: "yÇ’ng gÇn", antonym: "èƒ†å°", antonymPinyin: "dÇn xiÇo" },
                { word: "è¯šå®", pinyin: "chÃ©ng shÃ­", antonym: "è™šä¼ª", antonymPinyin: "xÅ« wÄ›i" },
                { word: "çƒ­æƒ…", pinyin: "rÃ¨ qÃ­ng", antonym: "å†·æ¼ ", antonymPinyin: "lÄ›ng mÃ²" },
                { word: "å–„è‰¯", pinyin: "shÃ n liÃ¡ng", antonym: "å‡¶æ¶", antonymPinyin: "xiÅng Ã¨" },
                { word: "è°¦è™š", pinyin: "qiÄn xÅ«", antonym: "éª„å‚²", antonymPinyin: "jiÄo Ã o" },
                { word: "æ´»æ³¼", pinyin: "huÃ³ pÅ", antonym: "å‘†æ¿", antonymPinyin: "dÄi bÇn" },
                { word: "æœºçµ", pinyin: "jÄ« lÃ­ng", antonym: "ç¬¨æ‹™", antonymPinyin: "bÃ¨n zhuÅ" },
                { word: "æ¸©æŸ”", pinyin: "wÄ“n rÃ³u", antonym: "ç²—æš´", antonymPinyin: "cÅ« bÃ o" },
                // å…¶ä»–ç±»åˆ«
                { word: "æ˜¯", pinyin: "shÃ¬", antonym: "å¦", antonymPinyin: "fÇ’u" },
                { word: "å¯¹", pinyin: "duÃ¬", antonym: "é”™", antonymPinyin: "cuÃ²" },
                { word: "è¯¥", pinyin: "gÄi", antonym: "ä¸è¯¥", antonymPinyin: "bÃ¹ gÄi" },
                { word: "èƒ½", pinyin: "nÃ©ng", antonym: "ä¸èƒ½", antonymPinyin: "bÃ¹ nÃ©ng" },
                { word: "ä¼š", pinyin: "huÃ¬", antonym: "ä¸ä¼š", antonymPinyin: "bÃ¹ huÃ¬" },
                { word: "å¯ä»¥", pinyin: "kÄ› yÇ", antonym: "ä¸å¯ä»¥", antonymPinyin: "bÃ¹ kÄ› yÇ" },
                { word: "åº”è¯¥", pinyin: "yÄ«ng gÄi", antonym: "ä¸åº”è¯¥", antonymPinyin: "bÃ¹ yÄ«ng gÄi" },
                { word: "å¿…é¡»", pinyin: "bÃ¬ xÅ«", antonym: "ä¸å¿…", antonymPinyin: "bÃ¹ bÃ¬" },
                { word: "ä¹Ÿè®¸", pinyin: "yÄ› xÇ”", antonym: "ä¸€å®š", antonymPinyin: "yÄ« dÃ¬ng" },
                { word: "å¯èƒ½", pinyin: "kÄ› nÃ©ng", antonym: "ä¸å¯èƒ½", antonymPinyin: "bÃ¹ kÄ› nÃ©ng" },
                { word: "ç»å¸¸", pinyin: "jÄ«ng chÃ¡ng", antonym: "å¶å°”", antonymPinyin: "Ç’u Ä›r" },
                { word: "æœ‰æ—¶", pinyin: "yÇ’u shÃ­", antonym: "æ°¸è¿œ", antonymPinyin: "yÇ’ng yuÇn" },
                { word: "è®¸å¤š", pinyin: "xÇ” duÅ", antonym: "å¾ˆå°‘", antonymPinyin: "hÄ›n shÇo" },
                { word: "å…¨éƒ¨", pinyin: "quÃ¡n bÃ¹", antonym: "éƒ¨åˆ†", antonymPinyin: "bÃ¹ fÃ¨n" },
                { word: "ä¸€èµ·", pinyin: "yÄ« qÇ", antonym: "åˆ†å¼€", antonymPinyin: "fÄ“n kÄi" },
                { word: "å®¹æ˜“", pinyin: "rÃ³ng yÃ¬", antonym: "å›°éš¾", antonymPinyin: "kÃ¹n nÃ¡n" },
                { word: "ç®€å•", pinyin: "jiÇn dÄn", antonym: "å¤æ‚", antonymPinyin: "fÃ¹ zÃ¡" },
                { word: "é«˜å…´", pinyin: "gÄo xÃ¬ng", antonym: "éš¾è¿‡", antonymPinyin: "nÃ¡n guÃ²" },
                { word: "å®‰å…¨", pinyin: "Än quÃ¡n", antonym: "å±é™©", antonymPinyin: "wÄ“i xiÇn" },
                { word: "æˆåŠŸ", pinyin: "chÃ©ng gÅng", antonym: "å¤±è´¥", antonymPinyin: "shÄ« bÃ i" },
                { word: "åŒæ„", pinyin: "tÃ³ng yÃ¬", antonym: "åå¯¹", antonymPinyin: "fÇn duÃ¬" },
                { word: "ç†Ÿæ‚‰", pinyin: "shÃº xÄ«", antonym: "é™Œç”Ÿ", antonymPinyin: "mÃ² shÄ“ng" },
                { word: "æ˜ç™½", pinyin: "mÃ­ng bai", antonym: "ç³Šæ¶‚", antonymPinyin: "hÃº tu" },
                { word: "æ¸…æ¥š", pinyin: "qÄ«ng chu", antonym: "æ¨¡ç³Š", antonymPinyin: "mÃ³ hu" },
                { word: "ç´§å¼ ", pinyin: "jÇn zhÄng", antonym: "è½»æ¾", antonymPinyin: "qÄ«ng sÅng" },
                { word: "å¿™ç¢Œ", pinyin: "mÃ¡ng lÃ¹", antonym: "æ‚ é—²", antonymPinyin: "yÅu xiÃ¡n" },
                { word: "ç¬”ç›´", pinyin: "bÇ zhÃ­", antonym: "å¼¯æ›²", antonymPinyin: "wÄn qÅ«" },
                { word: "å‡¸èµ·", pinyin: "tÅ« qÇ", antonym: "å‡¹é™·", antonymPinyin: "Äo xiÃ n" },
                { word: "æ–°é²œ", pinyin: "xÄ«n xiÄn", antonym: "é™ˆæ—§", antonymPinyin: "chÃ©n jiÃ¹" },
                { word: "å¹³å¦", pinyin: "pÃ­ng tÇn", antonym: "å´å²–", antonymPinyin: "qÃ­ qÅ«" },
                { word: "èšåˆ", pinyin: "jÃ¹ hÃ©", antonym: "åˆ†æ•£", antonymPinyin: "fÄ“n sÃ n" },
                { word: "åšå®š", pinyin: "jiÄn dÃ¬ng", antonym: "åŠ¨æ‘‡", antonymPinyin: "dÃ²ng yÃ¡o" },
                { word: "å›¢ç»“", pinyin: "tuÃ¡n jiÃ©", antonym: "åˆ†è£‚", antonymPinyin: "fÄ“n liÃ¨" },
                { word: "ä¸°å¯Œ", pinyin: "fÄ“ng fÃ¹", antonym: "è´«ä¹", antonymPinyin: "pÃ­n fÃ¡" },
                { word: "åå·", pinyin: "kÇn kÄ›", antonym: "å¹³å¦", antonymPinyin: "pÃ­ng tÇn" },
                { word: "æ›²æŠ˜", pinyin: "qÅ« zhÃ©", antonym: "å¹³å¦", antonymPinyin: "pÃ­ng tÇn" },
                { word: "å’Œå¹³", pinyin: "hÃ© pÃ­ng", antonym: "æˆ˜äº‰", antonymPinyin: "zhÃ n zhÄ“ng" },
                { word: "å¯Œè£•", pinyin: "fÃ¹ yÃ¹", antonym: "è´«ç©·", antonymPinyin: "pÃ­n qiÃ³ng" },
                { word: "å¼ºå¤§", pinyin: "qiÃ¡ng dÃ ", antonym: "å¼±å°", antonymPinyin: "ruÃ² xiÇo" },
                { word: "å¤æ‚", pinyin: "fÃ¹ zÃ¡", antonym: "å•ä¸€", antonymPinyin: "dÄn yÄ«" },
                { word: "ç³Šæ¶‚", pinyin: "hÃº tu", antonym: "æ¸…é†’", antonymPinyin: "qÄ«ng xÇng" },
                { word: "å®Œæ•´", pinyin: "wÃ¡n zhÄ›ng", antonym: "æ®‹ç¼º", antonymPinyin: "cÃ¡n quÄ“" },
                { word: "æ­£å¸¸", pinyin: "zhÃ¨ng chÃ¡ng", antonym: "å¼‚å¸¸", antonymPinyin: "yÃ¬ chÃ¡ng" },
                { word: "æ™®é€š", pinyin: "pÇ” tÅng", antonym: "ç‰¹æ®Š", antonymPinyin: "tÃ¨ shÅ«" },
                { word: "æ‡µæ‡‚", pinyin: "mÄ›ng dÇ’ng", antonym: "æ˜ç™½", antonymPinyin: "mÃ­ng bai" },
                { word: "æµ‘æµŠ", pinyin: "hÃºn zhuÃ³", antonym: "æ¸…æ¾ˆ", antonymPinyin: "qÄ«ng chÃ¨" }
            ],
            hard: [
                // é«˜çº§å½¢å®¹è¯ç±»
                { word: "ç¹è£", pinyin: "fÃ¡n rÃ³ng", antonym: "è¡°è´¥", antonymPinyin: "shuÄi bÃ i" },
                { word: "å…´æ—º", pinyin: "xÄ«ng wÃ ng", antonym: "è§æ¡", antonymPinyin: "xiÄo tiÃ¡o" },
                { word: "å®½é˜”", pinyin: "kuÄn kuÃ²", antonym: "ç‹­çª„", antonymPinyin: "xiÃ¡ zhÇi" },
                { word: "é”‹åˆ©", pinyin: "fÄ“ng lÃ¬", antonym: "æ»é’", antonymPinyin: "zhÃ¬ dÃ¹n" },
                { word: "å®½æ•", pinyin: "kuÄn chÇng", antonym: "ç‹­å°", antonymPinyin: "xiÃ¡ xiÇo" },
                { word: "èˆ’å±•", pinyin: "shÅ« zhÇn", antonym: "èœ·ç¼©", antonymPinyin: "quÃ¡n suÅ" },
                { word: "æ•æ·", pinyin: "mÇn jiÃ©", antonym: "è¿Ÿç¼“", antonymPinyin: "chÃ­ huÇn" },
                { word: "æ¸…æ™°", pinyin: "qÄ«ng xÄ«", antonym: "æœ¦èƒ§", antonymPinyin: "mÃ©ng lÃ³ng" },
                { word: "é™¡å³­", pinyin: "dÇ’u qiÃ o", antonym: "å¹³ç¼“", antonymPinyin: "pÃ­ng huÇn" },
                { word: "ç¼“å’Œ", pinyin: "huÇn hÃ©", antonym: "æ¿€çƒˆ", antonymPinyin: "jÄ« liÃ¨" },
                { word: "å˜ˆæ‚", pinyin: "cÃ¡o zÃ¡", antonym: "å¯‚é™", antonymPinyin: "jÃ¬ jÃ¬ng" },
                { word: "æ¾å¼›", pinyin: "sÅng chÃ­", antonym: "ç´§å¼ ", antonymPinyin: "jÇn zhÄng" },
                { word: "å¾®å¼±", pinyin: "wÄ“i ruÃ²", antonym: "å¼ºçƒˆ", antonymPinyin: "qiÃ¡ng liÃ¨" },
                { word: "è“¬å‹ƒ", pinyin: "pÃ©ng bÃ³", antonym: "è¡°è´¥", antonymPinyin: "shuÄi bÃ i" },
                { word: "æ—ºç››", pinyin: "wÃ ng shÃ¨ng", antonym: "æ¯è", antonymPinyin: "kÅ« wÄ›i" },
                { word: "é•‡é™", pinyin: "zhÃ¨n jÃ¬ng", antonym: "æ…Œå¼ ", antonymPinyin: "huÄng zhÄng" },
                { word: "æ²‰ç€", pinyin: "chÃ©n zhuÃ³", antonym: "æ…Œå¼ ", antonymPinyin: "huÄng zhÄng" },
                { word: "ç¼“æ…¢", pinyin: "huÇn mÃ n", antonym: "å¿«é€Ÿ", antonymPinyin: "kuÃ i sÃ¹" },
                { word: "æ°¸ä¹…", pinyin: "yÇ’ng jiÇ”", antonym: "æš‚æ—¶", antonymPinyin: "zÃ n shÃ­" },
                { word: "è¾½é˜”", pinyin: "liÃ¡o kuÃ²", antonym: "ç‹­çª„", antonymPinyin: "xiÃ¡ zhÇi" },
                { word: "å·¨å¤§", pinyin: "jÃ¹ dÃ ", antonym: "æ¸ºå°", antonymPinyin: "miÇo xiÇo" },
                { word: "å…‰æ˜", pinyin: "guÄng mÃ­ng", antonym: "é»‘æš—", antonymPinyin: "hÄ“i Ã n" },
                { word: "æ¸©æš–", pinyin: "wÄ“n nuÇn", antonym: "å¯’å†·", antonymPinyin: "hÃ¡n lÄ›ng" },
                { word: "æ‹®æ®", pinyin: "jiÃ© jÅ«", antonym: "å¯Œè£•", antonymPinyin: "fÃ¹ yÃ¹" },
                { word: "æ„šç¬¨", pinyin: "yÃº bÃ¨n", antonym: "èªæ˜", antonymPinyin: "cÅng mÃ­ng" },
                { word: "ç¬¨æ‹™", pinyin: "bÃ¨n zhuÅ", antonym: "ä¼¶ä¿", antonymPinyin: "lÃ­ng lÃ¬" },
                { word: "ç‹ æ¯’", pinyin: "hÄ›n dÃº", antonym: "å–„è‰¯", antonymPinyin: "shÃ n liÃ¡ng" },
                { word: "é€¼ä»„", pinyin: "bÄ« zÃ¨", antonym: "å®½é˜”", antonymPinyin: "kuÄn kuÃ²" },
                { word: "åå•¬", pinyin: "lÃ¬n sÃ¨", antonym: "æ…·æ…¨", antonymPinyin: "kÄng kÇi" },
                { word: "æ½®æ¹¿", pinyin: "chÃ¡o shÄ«", antonym: "å¹²ç‡¥", antonymPinyin: "gÄn zÃ o" },
                { word: "çŸ­æš‚", pinyin: "duÇn zÃ n", antonym: "æ°¸ä¹…", antonymPinyin: "yÇ’ng jiÇ”" },
                { word: "æ¼†é»‘", pinyin: "qÄ« hÄ“i", antonym: "æ˜äº®", antonymPinyin: "mÃ­ng liÃ ng" },
                { word: "å–§é—¹", pinyin: "xuÄn nÃ o", antonym: "å¯‚é™", antonymPinyin: "jÃ¬ jÃ¬ng" },
                { word: "æŸ”è½¯", pinyin: "rÃ³u ruÇn", antonym: "åšç¡¬", antonymPinyin: "jiÄn yÃ¬ng" },
                { word: "æ¸…æ¾ˆ", pinyin: "qÄ«ng chÃ¨", antonym: "æµ‘æµŠ", antonymPinyin: "hÃºn zhuÃ³" },
                { word: "èœ¿èœ’", pinyin: "wÄn yÃ¡n", antonym: "ç¬”ç›´", antonymPinyin: "bÇ zhÃ­" },
                { word: "ç”Ÿç–", pinyin: "shÄ“ng shÅ«", antonym: "ç†Ÿæ‚‰", antonymPinyin: "shÃº xÄ«" },
                { word: "è½»ç›ˆ", pinyin: "qÄ«ng yÃ­ng", antonym: "ç¬¨é‡", antonymPinyin: "bÃ¨n zhÃ²ng" },
                { word: "è…çƒ‚", pinyin: "fÇ” lÃ n", antonym: "æ–°é²œ", antonymPinyin: "xÄ«n xiÄn" },
                { word: "ç¹é‡", pinyin: "fÃ¡n zhÃ²ng", antonym: "è½»æ¾", antonymPinyin: "qÄ«ng sÅng" },
                { word: "æ‚²ä¼¤", pinyin: "bÄ“i shÄng", antonym: "æ„‰å¿«", antonymPinyin: "yÃº kuÃ i" },
                { word: "ç‚çƒ­", pinyin: "yÃ¡n rÃ¨", antonym: "å¯’å†·", antonymPinyin: "hÃ¡n lÄ›ng" },
                { word: "çŠ¹è±«", pinyin: "yÃ³u yÃ¹", antonym: "æœæ–­", antonymPinyin: "guÇ’ duÃ n" },
                { word: "è½¯å¼±", pinyin: "ruÇn ruÃ²", antonym: "åšå¼º", antonymPinyin: "jiÄn qiÃ¡ng" }
            ]
        };
        
        // æ¸¸æˆçŠ¶æ€å˜é‡
        let gameState = {
            currentDifficulty: 'easy',
            level: 1,
            score: 0,
            combo: 0,
            maxCombo: 0,
            totalQuestions: 0,
            correctAnswers: 0,
            timeLimit: 10,
            isGameActive: false,
            currentQuestion: null,
            usedQuestions: [],
            timer: null,
            achievements: [],
            questionsPerLevel: 10, // æ¯å…³10é¢˜
            currentLevelQuestions: 0, // å½“å‰å…³å¡å·²ç­”é¢˜æ•°
            currentTimeLeft: 10, // å½“å‰å‰©ä½™æ—¶é—´
            isTimerEnabled: true // å€’è®¡æ—¶å¼€å…³çŠ¶æ€
        };
        
        // éš¾åº¦é…ç½®
        const difficultyConfig = {
            easy: { timeLimit: 10, pointsPerCorrect: 10, comboMultiplier: 1.2 },
            medium: { timeLimit: 8, pointsPerCorrect: 15, comboMultiplier: 1.5 },
            hard: { timeLimit: 6, pointsPerCorrect: 20, comboMultiplier: 2.0 }
        };
        
        // æˆå°±ç³»ç»Ÿ
        const achievements = [
            { id: 'first_correct', name: 'åˆè¯•èº«æ‰‹', desc: 'ç­”å¯¹ç¬¬ä¸€é¢˜', icon: 'ğŸ¯', unlocked: false },
            { id: 'combo_5', name: 'è¿å‡»è¾¾äºº', desc: 'è¿ç»­ç­”å¯¹5é¢˜', icon: 'ğŸ”¥', unlocked: false },
            { id: 'level_5', name: 'é—¯å…³é«˜æ‰‹', desc: 'åˆ°è¾¾ç¬¬5å…³', icon: 'ğŸ†', unlocked: false },
            { id: 'speed_demon', name: 'é—ªç”µä¾ ', desc: '3ç§’å†…ç­”å¯¹', icon: 'âš¡', unlocked: false },
            { id: 'perfect_level', name: 'å®Œç¾å…³å¡', desc: 'ä¸€å…³å†…å…¨éƒ¨ç­”å¯¹', icon: 'ğŸ’', unlocked: false }
        ];
        
        // DOMå…ƒç´ 
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const homeBtn = document.getElementById('home-btn');
        const targetWordEl = document.getElementById('target-word');
        const optionsContainer = document.getElementById('options-container');
        const levelDisplay = document.getElementById('level-display');
        const comboDisplay = document.getElementById('combo-display');
        const scoreDisplay = document.getElementById('score-display');
        const countdownEl = document.getElementById('countdown');
        const progressBar = document.getElementById('progress-bar');
        const feedbackEl = document.getElementById('feedback');
        
        // äº‹ä»¶ç›‘å¬
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', restartGame);
        homeBtn.addEventListener('click', goHome);
        
        // éš¾åº¦é€‰æ‹©
        document.querySelectorAll('.difficulty-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                gameState.currentDifficulty = btn.dataset.difficulty;
                updateTimerDescription();
            });
        });
        
        // å€’è®¡æ—¶å¼€å…³äº‹ä»¶ç›‘å¬
        document.getElementById('timer-toggle').addEventListener('change', function() {
            gameState.isTimerEnabled = this.checked;
            updateTimerDescription();
        });
        
        // æ›´æ–°è®¡æ—¶å™¨æè¿°
        function updateTimerDescription() {
            const description = document.getElementById('timer-description');
            if (!gameState.isTimerEnabled) {
                description.textContent = 'ä¸é™æ—¶æ¨¡å¼';
            } else {
                const config = difficultyConfig[gameState.currentDifficulty];
                description.textContent = `æ¯é¢˜${config.timeLimit}ç§’é™æ—¶`;
            }
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            // ä¿å­˜å€’è®¡æ—¶å¼€å…³çŠ¶æ€
            const isTimerEnabled = gameState.isTimerEnabled;
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState = {
                currentDifficulty: gameState.currentDifficulty,
                level: 1,
                score: 0,
                combo: 0,
                maxCombo: 0,
                totalQuestions: 0,
                correctAnswers: 0,
                timeLimit: difficultyConfig[gameState.currentDifficulty].timeLimit,
                isGameActive: true,
                currentQuestion: null,
                usedQuestions: [],
                timer: null,
                achievements: [],
                questionsPerLevel: 10, // æ¯å…³10é¢˜
                currentLevelQuestions: 0, // å½“å‰å…³å¡å·²ç­”é¢˜æ•°
                currentTimeLeft: difficultyConfig[gameState.currentDifficulty].timeLimit, // å½“å‰å‰©ä½™æ—¶é—´
                isTimerEnabled: isTimerEnabled // ä¿æŒå€’è®¡æ—¶å¼€å…³çŠ¶æ€
            };
            
            // åˆ‡æ¢ç•Œé¢
            startScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            // æ˜¾ç¤ºæ¸¸æˆå¼€å§‹æç¤º
            showGameStartNotification();
            
            // åˆå§‹åŒ–è¿›åº¦æ¡
            updateProgressBar();
            
            // å¦‚æœç”¨æˆ·15ç§’å†…æ²¡æœ‰ç‚¹å‡»æŒ‰é’®ï¼Œè‡ªåŠ¨å¼€å§‹æ¸¸æˆ
            setTimeout(() => {
                if (document.querySelector('.fixed.inset-0.bg-black\\/50')) {
                    nextQuestion();
                }
            }, 15000);
        }
        
        // ç”Ÿæˆä¸‹ä¸€é¢˜
        function nextQuestion() {
            if (!gameState.isGameActive) return;
            
            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            if (gameState.timer) {
                clearInterval(gameState.timer);
            }
            
            // é‡ç½®è®¡æ—¶å™¨æ˜¾ç¤º
            resetTimerDisplay();
            
            // é€‰æ‹©é¢˜ç›®
            const difficulty = getCurrentDifficulty();
            const availableQuestions = antonymsList[difficulty].filter(
                q => !gameState.usedQuestions.includes(q.word)
            );
            
            // å¦‚æœå½“å‰éš¾åº¦çš„é¢˜ç›®ç”¨å®Œäº†ï¼Œæ¸¸æˆç»“æŸ
            if (availableQuestions.length === 0) {
                showGameStatus('é¢˜ç›®å·²ç”¨å®Œï¼');
                setTimeout(() => {
                    endGame();
                }, 2000);
                return;
            }
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªé¢˜ç›®
            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            gameState.currentQuestion = availableQuestions[randomIndex];
            gameState.usedQuestions.push(gameState.currentQuestion.word);
            
            // æ˜¾ç¤ºé¢˜ç›®
            targetWordEl.textContent = gameState.currentQuestion.word;
            
            // æ˜¾ç¤ºæ‹¼éŸ³
            const targetPinyinEl = document.getElementById('target-pinyin');
            const currentPinyin = gameState.currentQuestion.pinyin || '';
            targetPinyinEl.textContent = currentPinyin;
            
            // ç”Ÿæˆé€‰é¡¹
            generateOptions();
            
            // å¼€å§‹è®¡æ—¶
            startTimer();
            
            // æ›´æ–°è¿›åº¦æ¡
            updateProgressBar();
        }
        
        // è·å–å½“å‰éš¾åº¦
        function getCurrentDifficulty() {
            // æ ¹æ®å…³å¡è‡ªåŠ¨è°ƒæ•´éš¾åº¦
            if (gameState.level <= 3) return 'easy';
            if (gameState.level <= 7) return 'medium';
            return 'hard';
        }
        
        // ç”Ÿæˆé€‰é¡¹
        function generateOptions() {
            const correctAnswer = gameState.currentQuestion.antonym;
            const difficulty = getCurrentDifficulty();
            const allWords = antonymsList[difficulty];
            
            // ç”Ÿæˆå¹²æ‰°é¡¹
            const distractors = [];
            while (distractors.length < 3) {
                const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
                if (randomWord.antonym !== correctAnswer && !distractors.includes(randomWord.antonym)) {
                    distractors.push(randomWord.antonym);
                }
            }
            
            // æ··åˆæ­£ç¡®ç­”æ¡ˆå’Œå¹²æ‰°é¡¹
            let options = [correctAnswer, ...distractors];
            options = shuffleArray(options);
            
            // ç”Ÿæˆé€‰é¡¹æŒ‰é’®
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                // æŸ¥æ‰¾æ‹¼éŸ³ä¿¡æ¯
                const difficulty = getCurrentDifficulty();
                const allWords = antonymsList[difficulty];
                const wordData = allWords.find(item => item.word === option || item.antonym === option);
                const pinyin = wordData ? (wordData.word === option ? wordData.pinyin : wordData.antonymPinyin) : '';
                
                const button = document.createElement('button');
                button.className = 'option-btn bg-white hover:bg-blue-50 text-text font-bold py-4 px-6 rounded-2xl text-xl shadow-lg transform transition-all duration-200 hover:scale-105 active:scale-95 border-4 border-gray-200 hover:border-blue-300 hover:shadow-xl flex flex-col items-center justify-center relative overflow-hidden';
                
                // æ·»åŠ æ¶Ÿæ¼ªæ•ˆæœå®¹å™¨
                const rippleContainer = document.createElement('div');
                rippleContainer.className = 'absolute inset-0 rounded-2xl overflow-hidden pointer-events-none';
                button.appendChild(rippleContainer);
                
                // æ·»åŠ é€‰ä¸­æ€æ•ˆæœ
                button.addEventListener('mousedown', () => {
                    button.classList.add('bg-blue-100', 'border-blue-400', 'scale-95', 'button-press');
                });
                
                button.addEventListener('mouseup', () => {
                    button.classList.remove('bg-blue-100', 'border-blue-400', 'scale-95');
                });
                
                button.addEventListener('mouseleave', () => {
                    button.classList.remove('bg-blue-100', 'border-blue-400', 'scale-95');
                });
                
                // æ·»åŠ è§¦æ‘¸è®¾å¤‡æ”¯æŒ
                button.addEventListener('touchstart', () => {
                    button.classList.add('bg-blue-100', 'border-blue-400', 'scale-95', 'button-press');
                });
                
                button.addEventListener('touchend', () => {
                    button.classList.remove('bg-blue-100', 'border-blue-400', 'scale-95');
                });
                
                // æ·»åŠ æ¶Ÿæ¼ªæ•ˆæœ
                function createRipple(event) {
                    const ripple = document.createElement('span');
                    const rect = button.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = event.clientX - rect.left - size / 2;
                    const y = event.clientY - rect.top - size / 2;
                    
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    ripple.classList.add('ripple');
                    
                    rippleContainer.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                }
                
                button.addEventListener('click', createRipple);
                
                // åˆ›å»ºæ±‰å­—å’Œæ‹¼éŸ³å…ƒç´ 
                const contentDiv = document.createElement('div');
                contentDiv.className = 'flex flex-col items-center justify-center z-10 relative';
                contentDiv.innerHTML = `
                    <div class="text-xl font-bold">${option}</div>
                    <div class="text-gray-400 text-xs mt-1">${pinyin || ''}</div>
                `;
                button.appendChild(contentDiv);
                
                button.addEventListener('click', () => handleAnswer(option));
                optionsContainer.appendChild(button);
            });
        }
        
        // å¤„ç†ç­”æ¡ˆ
        function handleAnswer(selectedAnswer) {
            if (!gameState.isGameActive) return;
            
            clearInterval(gameState.timer);
            gameState.totalQuestions++;
            gameState.currentLevelQuestions++;
            
            const isCorrect = selectedAnswer === gameState.currentQuestion.antonym;
            
            if (isCorrect) {
                showGameStatus('ç­”å¯¹äº†ï¼');
                handleCorrectAnswer();
            } else {
                showGameStatus('ç­”é”™äº†ï¼');
                handleWrongAnswer(selectedAnswer);
            }
            
            // æ£€æŸ¥æ˜¯å¦å®Œæˆå½“å‰å…³å¡
            if (gameState.currentLevelQuestions >= gameState.questionsPerLevel) {
                // å®Œæˆå½“å‰å…³å¡ï¼Œå‡çº§
                setTimeout(() => {
                    if (gameState.isGameActive) {
                        levelUp();
                    }
                }, 1500);
            } else {
                // ç»§ç»­å½“å‰å…³å¡
                setTimeout(() => {
                    if (gameState.isGameActive) {
                        nextQuestion();
                    }
                }, 1500);
            }
        }
        
        // å¤„ç†æ­£ç¡®ç­”æ¡ˆ
        function handleCorrectAnswer() {
            gameState.correctAnswers++;
            gameState.combo++;
            gameState.maxCombo = Math.max(gameState.maxCombo, gameState.combo);
            
            // è®¡ç®—åˆ†æ•°
            const config = difficultyConfig[gameState.currentDifficulty];
            const basePoints = config.pointsPerCorrect;
            const comboBonus = Math.floor(basePoints * (gameState.combo - 1) * 0.1);
            
            // ä½¿ç”¨ä¿å­˜çš„æ—¶é—´å€¼è®¡ç®—æ—¶é—´å¥–åŠ±
            const timeBonus = Math.floor((gameState.timeLimit - gameState.currentTimeLeft) * 2);
            const totalPoints = basePoints + comboBonus + timeBonus;
            
            // è°ƒè¯•ä¿¡æ¯
            console.log('åˆ†æ•°è®¡ç®—:', {
                currentDifficulty: gameState.currentDifficulty,
                basePoints,
                comboBonus,
                timeBonus,
                totalPoints,
                timeLimit: gameState.timeLimit,
                currentTimeLeft: gameState.currentTimeLeft
            });
            
            // ç¡®ä¿åˆ†æ•°æ˜¯æœ‰æ•ˆæ•°å­—
            if (isNaN(totalPoints)) {
                console.error('åˆ†æ•°è®¡ç®—é”™è¯¯:', { basePoints, comboBonus, timeBonus, totalPoints });
                const fallbackPoints = basePoints;
                gameState.score += fallbackPoints;
                showFeedback(`æ­£ç¡®ï¼+${fallbackPoints}åˆ†`, 'success');
            } else {
                gameState.score += totalPoints;
                showFeedback(`æ­£ç¡®ï¼+${totalPoints}åˆ†`, 'success');
            }
            
            // æ›´æ–°æ˜¾ç¤º
            updateGameDisplay();
            
            // é«˜äº®æ­£ç¡®é€‰é¡¹
            highlightCorrectOption();
            
            // æ£€æŸ¥æˆå°±
            checkAchievements();
        }
        
        // å¤„ç†é”™è¯¯ç­”æ¡ˆ
        function handleWrongAnswer(selectedAnswer) {
            gameState.combo = 0;
            
            // æ›´æ–°æ˜¾ç¤º
            updateGameDisplay();
            
            // åé¦ˆ
            showFeedback(`ç­”é”™äº†ï¼æ­£ç¡®ç­”æ¡ˆï¼š${gameState.currentQuestion.antonym}`, 'error');
            
            // é«˜äº®æ­£ç¡®å’Œé”™è¯¯é€‰é¡¹
            highlightAnswers(selectedAnswer);
            
            // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
            if (shouldEndGame()) {
                showGameOverWarning();
                setTimeout(endGame, 2000);
            }
        }
        
        // å‡çº§å…³å¡
        function levelUp() {
            gameState.level++;
            gameState.currentLevelQuestions = 0; // é‡ç½®å½“å‰å…³å¡ç­”é¢˜æ•°
            
            // æ£€æŸ¥æ˜¯å¦éœ€è¦åˆ‡æ¢éš¾åº¦
            const newDifficulty = getCurrentDifficulty();
            if (newDifficulty !== gameState.currentDifficulty) {
                gameState.currentDifficulty = newDifficulty;
                gameState.usedQuestions = []; // é‡ç½®å·²ç”¨é¢˜ç›®
            }
            
            // å¢åŠ æ—¶é—´é™åˆ¶ï¼ˆéš¾åº¦é€’å¢ï¼‰
            if (gameState.level % 3 === 0) {
                gameState.timeLimit = Math.max(4, gameState.timeLimit - 1);
            }
            
            // è·å–éš¾åº¦ä¿¡æ¯
            const difficulty = getCurrentDifficulty();
            const difficultyText = {
                'easy': 'ç®€å•',
                'medium': 'ä¸­ç­‰', 
                'hard': 'å›°éš¾'
            }[difficulty];
            
            const timeText = gameState.timeLimit;
            
            // æ˜¾ç¤ºå‡çº§çŠ¶æ€
            showGameStatus('å‡çº§ä¸­...');
            
            showLevelUpNotification(gameState.level, difficultyText, timeText);
            updateGameDisplay();
            
            // é‡ç½®è¿›åº¦æ¡
            setTimeout(() => {
                updateProgressBar();
            }, 1000);
            
            setTimeout(nextQuestion, 3000);
        }
        
        // å¼€å§‹è®¡æ—¶
        function startTimer() {
            if (!gameState.isTimerEnabled) {
                // ä¸é™æ—¶æ¨¡å¼ï¼Œæ˜¾ç¤ºæ— é™ç¬¦å·
                countdownEl.textContent = 'ä¸é™æ—¶ âˆ';
                return;
            }
            
            let timeLeft = gameState.timeLimit;
            gameState.currentTimeLeft = timeLeft; // ä¿å­˜å½“å‰æ—¶é—´
            updateCountdownDisplay(timeLeft);
            
            gameState.timer = setInterval(() => {
                timeLeft -= 0.1;
                gameState.currentTimeLeft = timeLeft; // æ›´æ–°ä¿å­˜çš„æ—¶é—´
                updateCountdownDisplay(timeLeft);
                
                // æ—¶é—´è­¦å‘Šæ•ˆæœ
                if (timeLeft <= 3) {
                    countdownEl.parentElement.classList.add('animate-pulse');
                    countdownEl.parentElement.style.backgroundColor = '#EF4444';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    showGameStatus('ç­”é¢˜è¶…æ—¶ï¼');
                    setTimeout(() => {
                        handleWrongAnswer('è¶…æ—¶');
                    }, 1000);
                }
            }, 100);
        }
        
        // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
        function updateCountdownDisplay(timeLeft) {
            if (timeLeft <= 0) {
                countdownEl.textContent = 'å€’è®¡æ—¶ 0.0';
            } else {
                countdownEl.textContent = `å€’è®¡æ—¶ ${timeLeft.toFixed(1)}`;
            }
        }
        
        // æ˜¾ç¤ºæ¸¸æˆçŠ¶æ€
        function showGameStatus(status) {
            countdownEl.textContent = status;
            countdownEl.parentElement.style.backgroundColor = '#6B7280';
        }
        
        // æ›´æ–°æ¸¸æˆæ˜¾ç¤º
        function updateGameDisplay() {
            levelDisplay.textContent = gameState.level;
            comboDisplay.textContent = gameState.combo;
            
            // ç¡®ä¿åˆ†æ•°æ˜¯æœ‰æ•ˆæ•°å­—
            if (isNaN(gameState.score)) {
                console.error('æ€»åˆ†æ˜¾ç¤ºé”™è¯¯:', gameState.score);
                gameState.score = 0;
            }
            scoreDisplay.textContent = gameState.score;
            
            // é‡ç½®è®¡æ—¶å™¨æ ·å¼
            countdownEl.parentElement.classList.remove('animate-pulse');
            countdownEl.parentElement.style.backgroundColor = '#F59E0B';
        }
        
        // é‡ç½®è®¡æ—¶å™¨æ˜¾ç¤º
        function resetTimerDisplay() {
            countdownEl.parentElement.classList.remove('animate-pulse');
            countdownEl.parentElement.style.backgroundColor = '#F59E0B';
        }
        
        // æ›´æ–°è¿›åº¦æ¡
        function updateProgressBar() {
            // è®¡ç®—å½“å‰å…³å¡è¿›åº¦
            const currentProgress = (gameState.currentLevelQuestions / gameState.questionsPerLevel) * 100;
            
            // æ›´æ–°è¿›åº¦æ¡
            progressBar.style.width = `${currentProgress}%`;
            
            // æ›´æ–°è¿›åº¦æ–‡æœ¬
            const progressTextEl = document.getElementById('progress-text');
            const progressPercentageEl = document.getElementById('progress-percentage');
            
            if (progressTextEl && progressPercentageEl) {
                progressTextEl.textContent = `ç¬¬${gameState.level}å…³`;
                progressPercentageEl.textContent = `${gameState.currentLevelQuestions}/${gameState.questionsPerLevel}`;
            }
            
            // å½“è¿›åº¦æ¥è¿‘å®Œæˆæ—¶æ˜¾ç¤ºæç¤º
            const remainingQuestions = gameState.questionsPerLevel - gameState.currentLevelQuestions;
            if (remainingQuestions <= 3 && remainingQuestions > 0) {
                showProgressNotification(remainingQuestions);
            }
        }
        
        // æ˜¾ç¤ºåé¦ˆ
        function showFeedback(message, type) {
            feedbackEl.textContent = message;
            feedbackEl.className = 'mb-6 text-center text-3xl font-bold h-16 flex items-center justify-center';
            
            switch (type) {
                case 'success':
                    feedbackEl.classList.add('text-secondary', 'correct-animation', 'bg-green-50', 'rounded-2xl', 'px-6', 'py-3', 'shadow-lg');
                    break;
                case 'error':
                    feedbackEl.classList.add('text-danger', 'wrong-animation', 'bg-red-50', 'rounded-2xl', 'px-6', 'py-3', 'shadow-lg');
                    break;
                case 'level-up':
                    feedbackEl.classList.add('text-accent', 'level-complete', 'bg-yellow-50', 'rounded-2xl', 'px-6', 'py-3', 'shadow-lg');
                    break;
            }
            
            setTimeout(() => {
                feedbackEl.textContent = '';
                feedbackEl.className = 'mb-6 text-center text-3xl font-bold h-16 flex items-center justify-center';
            }, 1400);
        }
        
        // æ˜¾ç¤ºå…³å¡å‡çº§æç¤º
        function showLevelUpNotification(level, difficulty, timeLimit) {
            const notification = document.createElement('div');
            notification.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50';
            notification.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl transform transition-all duration-500">
                    <div class="text-6xl mb-4">ğŸ‰</div>
                    <h2 class="text-2xl font-bold text-accent mb-2">æ­å–œå‡çº§ï¼</h2>
                    <div class="text-lg text-gray-700 mb-4">
                        <p class="font-bold">ç¬¬ ${level} å…³</p>
                        <p class="text-sm text-gray-500 mt-1">éš¾åº¦ï¼š${difficulty} | æ—¶é—´ï¼š${timeLimit}ç§’/é¢˜</p>
                        <p class="text-sm text-gray-500">æ¯å…³10é¢˜ï¼ŒåŠ æ²¹ï¼</p>
                    </div>
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-4">
                        <p class="text-sm text-gray-600">
                            ğŸ’¡ <strong>æ¸¸æˆæç¤ºï¼š</strong><br>
                            â€¢ æ¯å…³10é¢˜ï¼Œå®Œæˆå³å¯å‡çº§<br>
                            â€¢ è¿ç»­ç­”å¯¹å¯è·å¾—è¿å‡»åŠ åˆ†<br>
                            â€¢ ç­”é”™ä¼šé‡ç½®è¿å‡»æ•°<br>
                            â€¢ è¿ç»­ç­”é”™3é¢˜æ¸¸æˆç»“æŸ<br>
                            â€¢ æ¯é“é¢˜æœ‰æ—¶é—´é™åˆ¶ï¼Œè¶…æ—¶ç®—ç­”é”™
                        </p>
                    </div>
                    <button class="bg-accent hover:bg-yellow-400 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 hover:scale-105">
                        ç»§ç»­æŒ‘æˆ˜
                    </button>
                    <div class="text-xs text-gray-400 mt-2">
                        ç‚¹å‡»ç»§ç»­æˆ–8ç§’åè‡ªåŠ¨å¼€å§‹
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // ç‚¹å‡»ç»§ç»­æŒ‰é’®å…³é—­æç¤º
            notification.querySelector('button').addEventListener('click', () => {
                notification.remove();
            });
            
            // 8ç§’åè‡ªåŠ¨å…³é—­ï¼Œç»™ç”¨æˆ·å……è¶³æ—¶é—´é˜…è¯»
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 8000);
        }
        
        // é«˜äº®æ­£ç¡®é€‰é¡¹
        function highlightCorrectOption() {
            const buttons = optionsContainer.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                if (btn.textContent === gameState.currentQuestion.antonym) {
                    btn.className = 'option-btn bg-secondary text-white font-bold py-4 px-6 rounded-2xl text-xl shadow-lg border-4 border-secondary correct-animation';
                } else {
                    btn.disabled = true;
                    btn.classList.add('opacity-50');
                }
            });
        }
        
        // é«˜äº®ç­”æ¡ˆï¼ˆæ­£ç¡®å’Œé”™è¯¯ï¼‰
        function highlightAnswers(selectedAnswer) {
            const buttons = optionsContainer.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                if (btn.textContent === gameState.currentQuestion.antonym) {
                    btn.className = 'option-btn bg-secondary text-white font-bold py-4 px-6 rounded-2xl text-xl shadow-lg border-4 border-secondary correct-animation';
                } else if (btn.textContent === selectedAnswer) {
                    btn.className = 'option-btn bg-danger text-white font-bold py-4 px-6 rounded-2xl text-xl shadow-lg border-4 border-danger wrong-animation';
                } else {
                    btn.disabled = true;
                    btn.classList.add('opacity-50');
                }
            });
        }
        
        // æ£€æŸ¥æ˜¯å¦åº”è¯¥ç»“æŸæ¸¸æˆ
        function shouldEndGame() {
            // è¿ç»­ç­”é”™3é¢˜ç»“æŸæ¸¸æˆ
            return gameState.combo === 0 && gameState.correctAnswers < gameState.totalQuestions - 2;
        }
        
        // æ˜¾ç¤ºæ¸¸æˆç»“æŸè­¦å‘Š
        function showGameOverWarning() {
            const notification = document.createElement('div');
            notification.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50';
            notification.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl transform transition-all duration-500">
                    <div class="text-6xl mb-4">âš ï¸</div>
                    <h2 class="text-2xl font-bold text-danger mb-2">æ¸¸æˆå³å°†ç»“æŸ</h2>
                    <div class="text-lg text-gray-700 mb-4">
                        <p class="font-bold">è¿ç»­ç­”é”™3é¢˜</p>
                        <p class="text-sm text-gray-500 mt-1">å½“å‰å…³å¡ï¼šç¬¬ ${gameState.level} å…³</p>
                        <p class="text-sm text-gray-500">æ€»åˆ†æ•°ï¼š${gameState.score} åˆ†</p>
                    </div>
                    <div class="bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-4 mb-4">
                        <p class="text-sm text-gray-600">
                            ğŸ’¡ <strong>æ¸¸æˆè§„åˆ™ï¼š</strong><br>
                            â€¢ è¿ç»­ç­”å¯¹å¯è·å¾—è¿å‡»åŠ åˆ†<br>
                            â€¢ ç­”é”™ä¼šé‡ç½®è¿å‡»æ•°<br>
                            â€¢ è¿ç»­ç­”é”™3é¢˜æ¸¸æˆç»“æŸ
                        </p>
                    </div>
                    <div class="text-sm text-gray-500 mb-4">
                        å³å°†æ˜¾ç¤ºæœ€ç»ˆç»“æœ...
                    </div>
                    <button class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full transition-all duration-300 hover:scale-105 text-sm">
                        ç«‹å³æŸ¥çœ‹ç»“æœ
                    </button>
                    <div class="text-xs text-gray-400 mt-2">
                        ç‚¹å‡»æŸ¥çœ‹æˆ–5ç§’åè‡ªåŠ¨æ˜¾ç¤º
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // ç‚¹å‡»ç«‹å³æŸ¥çœ‹ç»“æœæŒ‰é’®
            notification.querySelector('button').addEventListener('click', () => {
                notification.remove();
            });
            
            // 5ç§’åè‡ªåŠ¨å…³é—­ï¼Œç»™ç”¨æˆ·æ—¶é—´äº†è§£æ¸¸æˆç»“æŸåŸå› 
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // æ˜¾ç¤ºè¿›åº¦æç¤º
        function showProgressNotification(remainingQuestions) {
            // é¿å…é‡å¤æ˜¾ç¤º
            if (document.querySelector('.progress-notification')) return;
            
            const notification = document.createElement('div');
            notification.className = 'progress-notification fixed top-20 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-4 rounded-full shadow-lg z-40 animate-bounce';
            notification.innerHTML = `
                <div class="flex items-center">
                    <span class="text-2xl mr-3">ğŸ¯</span>
                    <div class="mr-4">
                        <div class="font-bold">å³å°†å‡çº§ï¼</div>
                        <div class="text-sm opacity-90">è¿˜å‰© ${remainingQuestions} é¢˜</div>
                    </div>
                    <button class="bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-full text-xs transition-all duration-300">
                        çŸ¥é“äº†
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // ç‚¹å‡»çŸ¥é“äº†æŒ‰é’®å…³é—­æç¤º
            notification.querySelector('button').addEventListener('click', () => {
                notification.remove();
            });
            
            // 5ç§’åè‡ªåŠ¨å…³é—­ï¼Œç»™ç”¨æˆ·æ—¶é—´äº†è§£å³å°†å‡çº§
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // æ˜¾ç¤ºæ¸¸æˆå¼€å§‹æç¤º
        function showGameStartNotification() {
            const notification = document.createElement('div');
            notification.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50';
            notification.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl transform transition-all duration-500">
                    <div class="text-6xl mb-4">ğŸš€</div>
                    <h2 class="text-2xl font-bold text-primary mb-2">æ¸¸æˆå¼€å§‹ï¼</h2>
                    <div class="text-lg text-gray-700 mb-4">
                        <p class="font-bold">ç¬¬ 1 å…³ - ç®€å•éš¾åº¦</p>
                        <p class="text-sm text-gray-500 mt-1">æ—¶é—´é™åˆ¶ï¼š${gameState.timeLimit}ç§’/é¢˜</p>
                        <p class="text-sm text-gray-500">æ¯å…³10é¢˜ï¼Œå®Œæˆå³å¯å‡çº§ï¼</p>
                    </div>
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-4 mb-4">
                        <p class="text-sm text-gray-600">
                            ğŸ’¡ <strong>æ¸¸æˆè§„åˆ™ï¼š</strong><br>
                            â€¢ æ¯å…³10é¢˜ï¼Œå®Œæˆå³å¯å‡çº§<br>
                            â€¢ ç‚¹å‡»æ­£ç¡®ç­”æ¡ˆè·å¾—åˆ†æ•°<br>
                            â€¢ è¿ç»­ç­”å¯¹å¯è·å¾—è¿å‡»åŠ åˆ†<br>
                            â€¢ ç­”é”™ä¼šé‡ç½®è¿å‡»æ•°<br>
                            â€¢ è¿ç»­ç­”é”™3é¢˜æ¸¸æˆç»“æŸ<br>
                            â€¢ æ¯é“é¢˜æœ‰æ—¶é—´é™åˆ¶ï¼Œè¶…æ—¶ç®—ç­”é”™<br>
                            â€¢ å¿«é€Ÿç­”é¢˜å¯è·å¾—æ—¶é—´å¥–åŠ±<br>
                            â€¢ ç®€å•ï¼š9å…³ï¼Œä¸­ç­‰ï¼š6å…³ï¼Œå›°éš¾ï¼š4å…³
                        </p>
                    </div>
                    <div class="text-sm text-gray-500 mb-4">
                        è¯·ä»”ç»†é˜…è¯»æ¸¸æˆè§„åˆ™ï¼Œå‡†å¤‡å¥½åç‚¹å‡»å¼€å§‹
                    </div>
                    <button class="bg-accent hover:bg-yellow-400 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 hover:scale-105">
                        å¼€å§‹æ¸¸æˆ
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // ç‚¹å‡»å¼€å§‹æ¸¸æˆæŒ‰é’®å…³é—­æç¤ºå¹¶å¼€å§‹æ¸¸æˆ
            notification.querySelector('button').addEventListener('click', () => {
                notification.remove();
                // ç«‹å³å¼€å§‹ç¬¬ä¸€é¢˜
                nextQuestion();
            });
            
            // 15ç§’åè‡ªåŠ¨å…³é—­ï¼Œç»™ç”¨æˆ·å……è¶³æ—¶é—´é˜…è¯»
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 15000);
        }
        
        // æ£€æŸ¥æˆå°±
        function checkAchievements() {
            achievements.forEach(achievement => {
                if (achievement.unlocked) return;
                
                let shouldUnlock = false;
                
                switch (achievement.id) {
                    case 'first_correct':
                        shouldUnlock = gameState.correctAnswers === 1;
                        break;
                    case 'combo_5':
                        shouldUnlock = gameState.combo >= 5;
                        break;
                    case 'level_5':
                        shouldUnlock = gameState.level >= 5;
                        break;
                    case 'speed_demon':
                        shouldUnlock = parseInt(countdownEl.textContent) >= gameState.timeLimit - 3;
                        break;
                    case 'perfect_level':
                        shouldUnlock = gameState.combo >= 5;
                        break;
                }
                
                if (shouldUnlock) {
                    achievement.unlocked = true;
                    gameState.achievements.push(achievement);
                    showAchievement(achievement);
                }
            });
        }
        
        // æ˜¾ç¤ºæˆå°±
        function showAchievement(achievement) {
            const achievementEl = document.createElement('div');
            achievementEl.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-6 py-3 rounded-full shadow-lg z-50 animate-bounce';
            achievementEl.innerHTML = `
                <span class="text-2xl mr-2">${achievement.icon}</span>
                <span class="font-bold">${achievement.name}</span>
            `;
            document.body.appendChild(achievementEl);
            
            setTimeout(() => {
                achievementEl.remove();
            }, 3000);
        }
        
        // ç»“æŸæ¸¸æˆ
        function endGame() {
            gameState.isGameActive = false;
            clearInterval(gameState.timer);
            
            // æ˜¾ç¤ºæ¸¸æˆç»“æŸçŠ¶æ€
            showGameStatus('æ¸¸æˆç»“æŸ');
            
            // å»¶è¿Ÿåˆ‡æ¢åˆ°ç»“æœç•Œé¢
            setTimeout(() => {
                // åˆ‡æ¢åˆ°ç»“æœç•Œé¢
                gameScreen.classList.add('hidden');
                resultScreen.classList.remove('hidden');
                
                // æ˜¾ç¤ºç»“æœ
                displayResults();
            }, 2000);
        }
        
        // æ˜¾ç¤ºç»“æœ
        function displayResults() {
            const accuracy = gameState.totalQuestions > 0 ? Math.round((gameState.correctAnswers / gameState.totalQuestions) * 100) : 0;
            
            document.getElementById('final-score').textContent = gameState.score;
            document.getElementById('final-level').textContent = gameState.level;
            document.getElementById('final-accuracy').textContent = `${accuracy}%`;
            document.getElementById('max-combo').textContent = gameState.maxCombo;
            
            // æ ¹æ®è¡¨ç°æ˜¾ç¤ºä¸åŒçš„ç»“æœ
            const resultIcon = document.getElementById('result-icon');
            const resultTitle = document.getElementById('result-title');
            
            if (accuracy >= 90) {
                resultIcon.textContent = 'ğŸ†';
                resultTitle.textContent = 'å®Œç¾è¡¨ç°ï¼';
            } else if (accuracy >= 70) {
                resultIcon.textContent = 'ğŸ‰';
                resultTitle.textContent = 'å¾ˆæ£’ï¼';
            } else if (accuracy >= 50) {
                resultIcon.textContent = 'ğŸ‘';
                resultTitle.textContent = 'ä¸é”™å“¦ï¼';
            } else {
                resultIcon.textContent = 'ğŸ’ª';
                resultTitle.textContent = 'ç»§ç»­åŠªåŠ›ï¼';
            }
            
            // æ˜¾ç¤ºæ¸¸æˆç»Ÿè®¡è¯¦æƒ…
            showGameStats(accuracy);
            
            // æ˜¾ç¤ºæˆå°±
            displayAchievements();
        }
        
        // æ˜¾ç¤ºæ¸¸æˆç»Ÿè®¡è¯¦æƒ…
        function showGameStats(accuracy) {
            const statsNotification = document.createElement('div');
            statsNotification.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50';
            statsNotification.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-lg mx-4 text-center shadow-2xl transform transition-all duration-500">
                    <div class="text-6xl mb-4">ğŸ“Š</div>
                    <h2 class="text-2xl font-bold text-primary mb-4">æ¸¸æˆç»Ÿè®¡</h2>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-blue-50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-blue-600">${gameState.score}</div>
                            <div class="text-sm text-gray-600">æ€»åˆ†æ•°</div>
                        </div>
                        <div class="bg-green-50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-green-600">${gameState.level}</div>
                            <div class="text-sm text-gray-600">åˆ°è¾¾å…³å¡</div>
                        </div>
                        <div class="bg-purple-50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-purple-600">${accuracy}%</div>
                            <div class="text-sm text-gray-600">æ­£ç¡®ç‡</div>
                        </div>
                        <div class="bg-orange-50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-orange-600">${gameState.maxCombo}</div>
                            <div class="text-sm text-gray-600">æœ€å¤§è¿å‡»</div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-4 mb-6">
                        <p class="text-sm text-gray-600">
                            ğŸ’¡ <strong>æ¸¸æˆæ€»ç»“ï¼š</strong><br>
                            â€¢ æ€»å…±ç­”é¢˜ï¼š${gameState.totalQuestions} é¢˜<br>
                            â€¢ ç­”å¯¹é¢˜ç›®ï¼š${gameState.correctAnswers} é¢˜<br>
                            â€¢ ç­”é”™é¢˜ç›®ï¼š${gameState.totalQuestions - gameState.correctAnswers} é¢˜<br>
                            â€¢ å¹³å‡æ¯é¢˜ç”¨æ—¶ï¼š${gameState.timeLimit} ç§’
                        </p>
                    </div>
                    
                    <button class="bg-accent hover:bg-yellow-400 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 hover:scale-105">
                        æŸ¥çœ‹æœ€ç»ˆç»“æœ
                    </button>
                    <div class="text-xs text-gray-400 mt-2">
                        ç‚¹å‡»æŸ¥çœ‹æˆ–10ç§’åè‡ªåŠ¨å…³é—­
                    </div>
                </div>
            `;
            
            document.body.appendChild(statsNotification);
            
            // ç‚¹å‡»æŒ‰é’®å…³é—­
            statsNotification.querySelector('button').addEventListener('click', () => {
                statsNotification.remove();
            });
            
            // 10ç§’åè‡ªåŠ¨å…³é—­ï¼Œç»™ç”¨æˆ·å……è¶³æ—¶é—´æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
            setTimeout(() => {
                if (statsNotification.parentNode) {
                    statsNotification.remove();
                }
            }, 10000);
        }
        
        // æ˜¾ç¤ºæˆå°±
        function displayAchievements() {
            const achievementsEl = document.getElementById('achievements');
            
            if (gameState.achievements.length > 0) {
                achievementsEl.innerHTML = `
                    <h3 class="text-lg font-bold mb-4">è·å¾—æˆå°±</h3>
                    <div class="flex flex-wrap justify-center gap-3">
                        ${gameState.achievements.map(achievement => `
                            <div class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-2 rounded-full text-sm">
                                <span class="mr-2">${achievement.icon}</span>
                                <span>${achievement.name}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                achievementsEl.innerHTML = '';
            }
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            resultScreen.classList.add('hidden');
            startGame();
        }
        
        // è¿”å›é¦–é¡µ
        function goHome() {
            resultScreen.classList.add('hidden');
            gameScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }
        
        // å·¥å…·å‡½æ•°ï¼šæ‰“ä¹±æ•°ç»„
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // åˆå§‹åŒ–éš¾åº¦æŒ‰é’®æ ·å¼
        document.addEventListener('DOMContentLoaded', () => {
            const style = document.createElement('style');
            style.textContent = `
                .difficulty-btn {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 0.25rem;
                    padding: 1rem;
                    border-radius: 1rem;
                    border: 2px solid #e5e7eb;
                    background: white;
                    cursor: pointer;
                    transition: all 0.3s;
                }
                .difficulty-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
                }
                .difficulty-btn.active {
                    border-color: #4F46E5;
                    background: linear-gradient(135deg, #4F46E5, #10B981);
                    color: white;
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>